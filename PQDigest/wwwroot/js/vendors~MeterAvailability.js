(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~MeterAvailability"],{

/***/ "../node_modules/@gpa-gemstone/react-table/index.js":
/*!**********************************************************!*\
  !*** ../node_modules/@gpa-gemstone/react-table/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

//  ******************************************************************************************************
//  Table.tsx - Gbtc
//
//  Copyright Â© 2018, Grid Protection Alliance.  All Rights Reserved.
//
//  Licensed to the Grid Protection Alliance (GPA) under one or more contributor license agreements. See
//  the NOTICE file distributed with this work for additional information regarding copyright ownership.
//  The GPA licenses this file to you under the MIT License (MIT), the "License"; you may not use this
//  file except in compliance with the License. You may obtain a copy of the License at:
//
//      http://opensource.org/licenses/MIT
//
//  Unless agreed to in writing, the subject software distributed under the License is distributed on an
//  "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. Refer to the
//  License for the specific language governing permissions and limitations.
//
//  Code Modification History:
//  ----------------------------------------------------------------------------------------------------
//  08/02/2018 - Billy Ernest
//       Generated original version of source code.
//
//  ******************************************************************************************************
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var React = __webpack_require__(/*! react */ "react");
var _ = __webpack_require__(/*! lodash */ "../node_modules/lodash/lodash.js");
var AngleIcon = function (props) { return (React.createElement("span", { style: { width: 10, height: 10, margin: 3 }, className: 'fa fa-angle-' + (props.ascending ? 'up' : 'down') })); };
var Table = /** @class */ (function (_super) {
    __extends(Table, _super);
    function Table(props) {
        return _super.call(this, props) || this;
    }
    Table.prototype.render = function () {
        var rowComponents = this.generateRows();
        var headerComponents = this.generateHeaders();
        return (React.createElement("table", { className: this.props.tableClass !== undefined ? this.props.tableClass : '', style: this.props.tableStyle },
            React.createElement("thead", { style: this.props.theadStyle }, headerComponents),
            React.createElement("tbody", { style: this.props.tbodyStyle }, rowComponents)));
    };
    Table.prototype.generateHeaders = function () {
        var _this = this;
        if (this.props.cols.length === 0)
            return null;
        var cells = this.props.cols.map(function (colData, index) {
            var style;
            if (colData.headerStyle !== undefined) {
                style = colData.headerStyle;
            }
            else
                style = {};
            if (style.cursor === undefined)
                style.cursor = 'pointer';
            return (React.createElement("th", { key: index, style: style, onClick: function (e) { return _this.handleSort({ col: colData.key, ascending: _this.props.ascending }, e); } },
                colData.label,
                _this.props.sortField === colData.key ? React.createElement(AngleIcon, { ascending: _this.props.ascending }) : null));
        });
        return React.createElement("tr", null, cells);
    };
    Table.prototype.generateRows = function () {
        var _this = this;
        if (this.props.data.length === 0)
            return null;
        return this.props.data.map(function (item, index) {
            var cells = _this.props.cols.map(function (colData) {
                var css;
                if (colData.rowStyle === undefined)
                    css = {};
                else
                    css = _.clone(colData.rowStyle);
                return (React.createElement("td", { key: index.toString() + item[colData.key] + colData.key, style: css, onClick: _this.handleClick.bind(_this, { col: colData.key, row: item, data: item[colData.key] }) }, colData.content !== undefined ? colData.content(item, colData.key, css) : item[colData.key]));
            });
            var style;
            if (_this.props.rowStyle !== undefined) {
                style = _.clone(_this.props.rowStyle);
            }
            else
                style = {};
            if (style.cursor === undefined)
                style.cursor = 'pointer';
            if (_this.props.selected !== undefined && _this.props.selected(item))
                style.backgroundColor = 'yellow';
            return (React.createElement("tr", { style: style, key: index.toString() }, cells));
        });
    };
    Table.prototype.handleClick = function (data, event) {
        this.props.onClick(data, event);
    };
    Table.prototype.handleSort = function (data, event) {
        this.props.onSort(data);
    };
    return Table;
}(React.Component));
exports.default = Table;


/***/ }),

/***/ "../node_modules/@influxdata/influxdb-client/dist/index.browser.js":
/*!*************************************************************************!*\
  !*** ../node_modules/@influxdata/influxdb-client/dist/index.browser.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?e(exports):undefined}(this,(function(t){"use strict";function e(){const t=new TextDecoder("utf-8");return{concat(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r},copy(t,e,r){const s=new Uint8Array(r-e);return s.set(t.subarray(e,r)),s},toUtf8String:(e,r,s)=>t.decode(e.subarray(r,s))}}function r(t,r){const s=null!=r?r:e();let n,i=!1,o=!1;return{next(e){if(!i)try{!function(e){let r,l=0;for(n?(e=s.concat(n,e),r=n.length):r=0;r<e.length;){const n=e[r];if(10===n){if(!o){const n=r>0&&13===e[r-1]?r-1:r;if(i)return;t.next(s.toUtf8String(e,l,n)),l=r+1}}else 34===n&&(o=!o);r++}n=l<r?s.copy(e,l,r):void 0}(e)}catch(t){this.error(t)}},error(e){i||(i=!0,t.error(e))},complete(){i||(n&&t.next(s.toUtf8String(n,0,n.length)),i=!0,t.complete())},useCancellable(e){if(t.useCancellable){const r=this;t.useCancellable({cancel(){e.cancel(),n=void 0,r.complete()},isCancelled:()=>e.isCancelled()})}}}}class s{constructor(){this._reuse=!1}get reuse(){return this._reuse}set reuse(t){t&&!this.reusedValues&&(this.reusedValues=new Array(10)),this._reuse=t}withReuse(){return this.reuse=!0,this}splitLine(t){if(null==t)return this.lastSplitLength=0,[];let e=0,r=0;const s=this._reuse?this.reusedValues:[];let n=0;for(let i=0;i<t.length;i++){const o=t[i];if(","===o){if(e%2==0){const o=this.getValue(t,r,i,e);this._reuse?s[n++]=o:s.push(o),r=i+1,e=0}}else'"'===o&&e++}const i=this.getValue(t,r,t.length,e);return this._reuse?(s[n]=i,this.lastSplitLength=n+1):(s.push(i),this.lastSplitLength=s.length),s}getValue(t,e,r,s){return e===t.length?"":0===s?t.substring(e,r):2===s?t.substring(e+1,r-1):t.substring(e+1,r-1).replace(/""/gi,'"')}}class n{}function i(){return new n}const o=[404,408,425,429,500,502,503,504];function l(t){return o.includes(t)}class a extends Error{constructor(t){super(t),this.name="IllegalArgumentError",Object.setPrototypeOf(this,a.prototype)}}class u extends Error{constructor(t,e,r,s,n,i){if(super(),this.statusCode=t,this.statusMessage=e,this.body=r,this.contentType=n,Object.setPrototypeOf(this,u.prototype),i)this.message=i;else if(r){if(null==n?void 0:n.startsWith("application/json"))try{this.json=JSON.parse(r),this.message=this.json.message,this.code=this.json.code}catch(t){}this.message||(this.message=`${t} ${e} : ${r}`)}else this.message=`${t} ${e}`;this.name="HttpError",this.setRetryAfter(s)}setRetryAfter(t){"string"==typeof t&&/^[0-9]+$/.test(t)?this._retryAfter=parseInt(t):this._retryAfter=0}canRetry(){return l(this.statusCode)}retryAfter(){return this._retryAfter}}const c=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE"];function h(t,e){if(t){let r;return"function"==typeof t.retryAfter?t.retryAfter():(r=0,e&&e>0?r+Math.round(Math.random()*e):r)}return 0}class f extends Error{constructor(){super(),Object.setPrototypeOf(this,f.prototype),this.name="RequestTimedOutError",this.message="Request timed out"}canRetry(){return!0}retryAfter(){return 0}}class d extends Error{constructor(){super(),this.name="AbortError",Object.setPrototypeOf(this,d.prototype),this.message="Response aborted"}canRetry(){return!0}retryAfter(){return 0}}const p=t=>t,g={boolean:t=>"true"===t,unsignedLong:t=>""===t?null:+t,long:t=>""===t?null:+t,double:t=>""===t?null:+t,string:p,base64Binary:p,duration:t=>""===t?null:t,"dateTime:RFC3339":t=>""===t?null:t};class y{constructor(t){t.forEach((t,e)=>t.index=e),this.columns=t}column(t){for(let e=0;e<this.columns.length;e++){const r=this.columns[e];if(r.label===t)return r}throw new a(`Column ${t} not found!`)}toObject(t){var e;const r={};for(let s=0;s<this.columns.length&&s<t.length;s++){let n=t[s];const i=this.columns[s];""===n&&i.defaultValue&&(n=i.defaultValue),r[i.label]=(null!==(e=g[i.dataType])&&void 0!==e?e:p)(n)}return r}}function m(t){return new y(t)}function w(t){const e=(new s).withReuse();let r,n,o=!0,l=0;return{error(e){t.error(e)},next(s){if(""===s)o=!0,r=void 0;else{const a=e.splitLine(s),u=e.lastSplitLength;if(o){if(!r){r=new Array(u);for(let t=0;t<u;t++)r[t]=i()}if(a[0].startsWith("#")){if("#datatype"===a[0])for(let t=1;t<u;t++)r[t].dataType=a[t];else if("#default"===a[0])for(let t=1;t<u;t++)r[t].defaultValue=a[t];else if("#group"===a[0])for(let t=1;t<u;t++)r[t].group="t"===a[t][0]}else{""===a[0]?(l=1,r=r.slice(1)):l=0;for(let t=l;t<u;t++)r[t-l].label=a[t];n=m(r),o=!1}}else t.next(a.slice(l,u),n)}},complete(){t.complete()},useCancellable(e){t.useCancellable&&t.useCancellable(e)}}}const b={retryJitter:200,minRetryDelay:5e3,maxRetryDelay:18e4,exponentialBase:5},x={batchSize:1e3,flushInterval:6e4,writeFailed:function(){},writeSuccess:function(){},maxRetries:3,maxBufferLines:32e3,retryJitter:200,minRetryDelay:5e3,maxRetryDelay:18e4,exponentialBase:5,gzipThreshold:1e3};function v(t,e){return function(r){let s="",n=0,i=0;for(;i<r.length;){const o=t.indexOf(r[i]);o>=0&&(s+=r.substring(n,i),s+=e[o],n=i+1),i++}return 0==n?r:(n<r.length&&(s+=r.substring(n,r.length)),s)}}const T={measurement:v(", \n\r\t",["\\,","\\ ","\\n","\\r","\\t"]),quoted:function(t,e){const r=v(t,e);return t=>'"'+r(t)+'"'}('"\\',['\\"',"\\\\"]),tag:v(", =\n\r\t",["\\,","\\ ","\\=","\\n","\\r","\\t"])};let O=Date.now(),R=0;function S(){{const t=Date.now();t!==O?(O=t,R=0):R++;const e=String(R);return String(t)+"000000000".substr(0,6-e.length)+e}}function E(){return String(Date.now())+"000000000".substr(0,3)}function D(){return String(Date.now())}function C(){return String(Math.floor(Date.now()/1e3))}const A={s:C,ms:D,us:E,ns:S,seconds:C,millis:D,micros:E,nanos:S},j={s:t=>""+Math.floor(t.getTime()/1e3),ms:t=>""+t.getTime(),us:t=>t.getTime()+"000",ns:t=>t.getTime()+"000000"},$={error(t,e){console.error("ERROR: "+t,e||"")},warn(t,e){console.warn("WARN: "+t,e||"")}};let L=$;const _={error(t,e){L.error(t,e)},warn(t,e){L.warn(t,e)}};const B=Symbol("FLUX_VALUE");class P{constructor(t){this.fluxValue=t}toString(){return this.fluxValue}[B](){return this.fluxValue}}function F(t){if(null==t)return"";t=t.toString();let e=void 0,r=0;function s(){void 0===e&&(e=t.substring(0,r))}for(;r<t.length;r++){const n=t.charAt(r);switch(n){case"\r":s(),e+="\\r";break;case"\n":s(),e+="\\n";break;case"\t":s(),e+="\\t";break;case'"':case"\\":s(),e=e+"\\"+n;break;case"$":if(r+1<t.length&&"{"===t.charAt(r+1)){s(),r++,e+="\\${";break}null!=e&&(e+=n);break;default:null!=e&&(e+=n)}}return void 0!==e?e:t}function z(t){if("number"==typeof t){if(!isFinite(t))throw new Error("not a flux float: "+t);return t.toString()}const e=String(t);let r=!1;for(const t of e)if("."!==t){if("."!==t&&"-"!==t&&(t<"0"||t>"9"))throw new Error("not a flux float: "+e)}else{if(r)throw new Error("not a flux float: "+e);r=!r}return e}function M(t){return`regexp.compile(v: "${F(t)}")`}function U(t){return new P(String(t))}function q(t){if(void 0===t)return"";if(null===t)return"null";if("boolean"==typeof t)return t.toString();if("string"==typeof t)return`"${F(t)}"`;if("number"==typeof t)return z(t);if("object"==typeof t){if("function"==typeof t[B])return t[B]();if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return M(t);if(Array.isArray(t))return`[${t.map(q).join(",")}]`}return q(t.toString())}const H="function"==typeof Symbol&&Symbol.observable||"@@observable";function I(t,e,r,s){return new(r||(r=Promise))((function(n,i){function o(t){try{a(s.next(t))}catch(t){i(t)}}function l(t){try{a(s.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,l)}a((s=s.apply(t,e||[])).next())}))}class N{constructor(t){this.options=Object.assign(Object.assign({},b),t),this.success()}nextDelay(t,e){const r=h(t);if(r&&r>0)return r+Math.round(Math.random()*this.options.retryJitter);if(e&&e>0){let t=this.options.minRetryDelay;for(let r=1;r<e&&(t*=this.options.exponentialBase,!(t>=this.options.maxRetryDelay));r++);return Math.min(Math.max(t,1),this.options.maxRetryDelay)+Math.round(Math.random()*this.options.retryJitter)}return this.currentDelay?this.currentDelay=Math.min(Math.max(this.currentDelay*this.options.exponentialBase,1)+Math.round(Math.random()*this.options.retryJitter),this.options.maxRetryDelay):this.currentDelay=this.options.minRetryDelay+Math.round(Math.random()*this.options.retryJitter),this.currentDelay}success(){this.currentDelay=void 0}}class k{constructor(t,e){this.maxLines=t,this.retryLines=e,this.size=0,this.nextRetryTime=0,this.closed=!1,this._timeoutHandle=void 0}addLines(t,e,r){if(this.closed)return;if(!t.length)return;const s=Date.now()+r;if(s>this.nextRetryTime&&(this.nextRetryTime=s),this.first&&this.size+t.length>this.maxLines){const e=this.size,r=.7*e;do{const t=this.first.next;this.size-=this.first.lines.length,this.first=t}while(this.first&&this.size+t.length>r);_.error(`RetryBuffer: ${e-this.size} oldest lines removed to keep buffer size under the limit of ${this.maxLines} lines`)}const n={lines:t,retryCount:e};this.last?(this.last.next=n,this.last=n):(this.first=n,this.last=n,this.scheduleRetry(r)),this.size+=t.length}removeLines(){if(this.first){const t=this.first;return this.first=this.first.next,this.size-=t.lines.length,this.first||(this.last=void 0),t}}scheduleRetry(t){this._timeoutHandle=setTimeout(()=>{const t=this.removeLines();t?this.retryLines(t.lines,t.retryCount).then(()=>{this.scheduleRetry(1)}).catch(t=>{this.scheduleRetry(this.nextRetryTime-Date.now())}):this._timeoutHandle=void 0},t)}flush(){return I(this,void 0,void 0,(function*(){let t;for(;t=this.removeLines();)yield this.retryLines(t.lines,t.retryCount)}))}close(){return this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=void 0),this.closed=!0,this.size}}class V{constructor(t,e,r){this.maxChunkRecords=t,this.flushFn=e,this.scheduleSend=r,this.length=0,this.lines=new Array(t)}add(t){0===this.length&&this.scheduleSend(),this.lines[this.length]=t,this.length++,this.length>=this.maxChunkRecords&&this.flush().catch(t=>{})}flush(){const t=this.reset();return t.length>0?this.flushFn(t):Promise.resolve()}reset(){const t=this.lines.slice(0,this.length);return this.length=0,t}}class W{constructor(t,e,r,s,n){this.transport=t,this.closed=!1,this._timeoutHandle=void 0,this.httpPath=`/api/v2/write?org=${encodeURIComponent(e)}&bucket=${encodeURIComponent(r)}&precision=${s}`,this.writeOptions=Object.assign(Object.assign({},x),n),this.currentTime=A[s],this.dateToProtocolTimestamp=j[s],this.writeOptions.defaultTags&&this.useDefaultTags(this.writeOptions.defaultTags),this.sendOptions={method:"POST",headers:Object.assign({"content-type":"text/plain; charset=utf-8"},null==n?void 0:n.headers),gzipThreshold:this.writeOptions.gzipThreshold};var i;this.writeBuffer=new V(this.writeOptions.batchSize,t=>(this._clearFlushTimeout(),this.sendBatch(t,this.writeOptions.maxRetries+1)),()=>{this.writeOptions.flushInterval>0&&(this._clearFlushTimeout(),this.closed||(this._timeoutHandle=setTimeout(()=>this.sendBatch(this.writeBuffer.reset(),this.writeOptions.maxRetries+1).catch(t=>{}),this.writeOptions.flushInterval)))}),this.sendBatch=this.sendBatch.bind(this),this.retryStrategy=(i=this.writeOptions,new N(i)),this.retryBuffer=new k(this.writeOptions.maxBufferLines,this.sendBatch)}sendBatch(t,e){const r=this;return!this.closed&&t.length>0?new Promise((s,n)=>{let i;const o={responseStarted(t,e){i=e},error(i){const o=r.writeOptions.maxRetries+2-e,l=r.writeOptions.writeFailed.call(r,i,t,o);if(l)l.then(s,n);else{if(!r.closed&&e>1&&(!(i instanceof u)||i.statusCode>=429))return _.warn(`Write to InfluxDB failed (remaining attempts: ${e-1}).`,i),r.retryBuffer.addLines(t,e-1,r.retryStrategy.nextDelay(i,o)),void n(i);_.error("Write to InfluxDB failed.",i),n(i)}},complete(){if(204==i||null==i)r.writeOptions.writeSuccess.call(r,t),r.retryStrategy.success(),s();else{const t=`204 HTTP response status code expected, but ${i} returned`,e=new u(i,t,void 0,"0");e.message=t,o.error(e)}}};this.transport.send(this.httpPath,t.join("\n"),this.sendOptions,o)}):Promise.resolve()}_clearFlushTimeout(){void 0!==this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=void 0)}writeRecord(t){if(this.closed)throw new Error("writeApi: already closed!");this.writeBuffer.add(t)}writeRecords(t){if(this.closed)throw new Error("writeApi: already closed!");for(let e=0;e<t.length;e++)this.writeBuffer.add(t[e])}writePoint(t){if(this.closed)throw new Error("writeApi: already closed!");const e=t.toLineProtocol(this);e&&this.writeBuffer.add(e)}writePoints(t){if(this.closed)throw new Error("writeApi: already closed!");for(let e=0;e<t.length;e++){const r=t[e].toLineProtocol(this);r&&this.writeBuffer.add(r)}}flush(t){return I(this,void 0,void 0,(function*(){if(yield this.writeBuffer.flush(),t)return yield this.retryBuffer.flush()}))}close(){return this.writeBuffer.flush().finally(()=>{const t=this.retryBuffer.close();t&&_.error(`Retry buffer closed with ${t} items that were not written to InfluxDB!`,null),this.closed=!0})}dispose(){return this._clearFlushTimeout(),this.closed=!0,this.retryBuffer.close()+this.writeBuffer.length}useDefaultTags(t){return this.defaultTags=void 0,Object.keys(t).forEach(e=>{(this.defaultTags||(this.defaultTags={}))[e]=T.tag(t[e])}),this}convertTime(t){return void 0===t?this.currentTime():"string"==typeof t?t.length>0?t:void 0:t instanceof Date?this.dateToProtocolTimestamp(t):String("number"==typeof t?Math.floor(t):t)}}function J(t){const e={};return t.headers.forEach((t,r)=>{const s=e[r];void 0===s?e[r]=t:Array.isArray(s)?s.push(t):e[r]=[s,t]}),e}class X{constructor(t){this.connectionOptions=t,this.chunkCombiner=e(),this.requestDecorator=function(){},this.defaultHeaders={"content-type":"application/json; charset=utf-8"},this.connectionOptions.token&&(this.defaultHeaders.Authorization="Token "+this.connectionOptions.token),this.url=String(this.connectionOptions.url),this.url.endsWith("/")&&(this.url=this.url.substring(0,this.url.length-1)),this.url.endsWith("/api/v2")&&(this.url=this.url.substring(0,this.url.length-"/api/v2".length),_.warn(`Please remove '/api/v2' context path from InfluxDB base url, using ${this.url} !`))}send(t,e,r,s){const n=function(t={}){let e=0;return{next:r=>{0===e&&t.next&&null!=r&&t.next(r)},error:r=>{0===e&&(e=1,t.error&&t.error(r))},complete:()=>{0===e&&(e=2,t.complete&&t.complete())},responseStarted:(e,r)=>{t.responseStarted&&t.responseStarted(e,r)}}}(s);let i=!1,o=r.signal;if(s&&s.useCancellable){const t=new AbortController;o||(o=t.signal,r=Object.assign(Object.assign({},r),o)),s.useCancellable({cancel(){i=!0,t.abort()},isCancelled:()=>i||o.aborted})}this.fetch(t,e,r).then(t=>I(this,void 0,void 0,(function*(){if((null==s?void 0:s.responseStarted)&&n.responseStarted(J(t),t.status),t.status>=300)return t.text().then(e=>{if(!e){const r=t.headers.get("x-influxdb-error");r&&(e=r)}n.error(new u(t.status,t.statusText,e,t.headers.get("retry-after"),t.headers.get("content-type")))}).catch(e=>{_.warn("Unable to receive error body",e),n.error(new u(t.status,t.statusText,void 0,t.headers.get("retry-after"),t.headers.get("content-type")))});if(t.body){const e=t.body.getReader();let r;do{r=yield e.read(),n.next(r.value)}while(!r.done)}else if(t.arrayBuffer){const e=yield t.arrayBuffer();n.next(new Uint8Array(e))}else{const e=yield t.text();n.next((new TextEncoder).encode(e))}}))).catch(t=>{i||n.error(t)}).finally(()=>n.complete())}request(t,e,r,s){var n,i;return I(this,void 0,void 0,(function*(){const o=yield this.fetch(t,e,r),{status:l,headers:a}=o,c=a.get("content-type")||"";if(s&&s(J(o),o.status),l>=300){let t=yield o.text();if(!t){const e=a.get("x-influxdb-error");e&&(t=e)}throw new u(l,o.statusText,t,o.headers.get("retry-after"),o.headers.get("content-type"))}const h=null!==(i=null===(n=r.headers)||void 0===n?void 0:n.accept)&&void 0!==i?i:c;return h.includes("json")?yield o.json():h.includes("text")||h.startsWith("application/csv")?yield o.text():void 0}))}fetch(t,e,r){const{method:s,headers:n}=r,i=
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]])}return r}(r,["method","headers"]),o=`${this.url}${t}`,l=Object.assign({method:s,body:"GET"===s||"HEAD"===s?void 0:"string"==typeof e?e:JSON.stringify(e),headers:Object.assign(Object.assign({},this.defaultHeaders),n),credentials:"omit"},i);return this.requestDecorator(l,r,o),fetch(o,l)}}function G(t,e){return e.toObject(t)}class K{constructor(t,e){this.isClosed=!1;try{e({next:e=>{t.next(e)},error:e=>{this.isClosed=!0,t.error(e)},complete:()=>{this.isClosed=!0,t.complete()},useCancellable:t=>{this.cancellable=t}})}catch(e){this.isClosed=!0,t.error(e)}}get closed(){return this.isClosed}unsubscribe(){var t;null===(t=this.cancellable)||void 0===t||t.cancel(),this.isClosed=!0}}function Q(){}class Y{constructor(t,e){this.executor=t,this.decorator=e}subscribe(t,e,r){const s=function(t){const{next:e,error:r,complete:s}=t;return{next:e?e.bind(t):Q,error:r?r.bind(t):Q,complete:s?s.bind(t):Q}}("object"!=typeof t||null===t?{next:t,error:e,complete:r}:t);return new K(this.decorator(s),this.executor)}[H](){return this}}const Z={header:!0,delimiter:",",quoteChar:'"',commentPrefix:"#",annotations:["datatype","group","default"]},tt=t=>t;class et{constructor(t,e){this.transport=t,this.options="string"==typeof e?{org:e}:e}with(t){return new et(this.transport,Object.assign(Object.assign({},this.options),t))}lines(t){return new Y(this.createExecutor(t),tt)}rows(t){return new Y(this.createExecutor(t),t=>w({next(e,r){t.next({values:e,tableMeta:r})},error(e){t.error(e)},complete(){t.complete()}}))}queryLines(t,e){this.createExecutor(t)(e)}queryRows(t,e){this.createExecutor(t)(w(e))}collectRows(t,e=G){const r=[];return new Promise((s,n)=>{this.queryRows(t,{next(t,s){const n=e.call(this,t,s);void 0!==n&&r.push(n)},error(t){n(t)},complete(){s(r)}})})}collectLines(t){const e=[];return new Promise((r,s)=>{this.queryLines(t,{next(t){e.push(t)},error(t){s(t)},complete(){r(e)}})})}queryRaw(t){const{org:e,type:r,gzip:s,headers:n}=this.options;return this.transport.request("/api/v2/query?org="+encodeURIComponent(e),JSON.stringify(this.decorateRequest({query:t.toString(),dialect:Z,type:r})),{method:"POST",headers:Object.assign({accept:"text/csv","accept-encoding":s?"gzip":"identity","content-type":"application/json; encoding=utf-8"},n)})}createExecutor(t){const{org:e,type:s,gzip:n,headers:i}=this.options;return o=>{this.transport.send("/api/v2/query?org="+encodeURIComponent(e),JSON.stringify(this.decorateRequest({query:t.toString(),dialect:Z,type:s})),{method:"POST",headers:Object.assign({"content-type":"application/json; encoding=utf-8","accept-encoding":n?"gzip":"identity"},i)},r(o,this.transport.chunkCombiner))}}decorateRequest(t){var e;return"function"==typeof this.options.now&&(t.now=this.options.now()),t.type=null!==(e=this.options.type)&&void 0!==e?e:"flux",t}}t.AbortError=d,t.DEFAULT_ConnectionOptions={timeout:1e4},t.DEFAULT_RetryDelayStrategyOptions=b,t.DEFAULT_WriteOptions=x,t.FLUX_VALUE=B,t.HttpError=u,t.IllegalArgumentError=a,t.InfluxDB=class{constructor(t){var e;if("string"==typeof t)this._options={url:t};else{if(null===t||"object"!=typeof t)throw new a("No url or configuration specified!");this._options=t}const r=this._options.url;if("string"!=typeof r)throw new a("No url specified!");r.endsWith("/")&&(this._options.url=r.substring(0,r.length-1)),this.transport=null!==(e=this._options.transport)&&void 0!==e?e:new X(this._options)}getWriteApi(t,e,r="ns",s){return new W(this.transport,t,e,r,null!=s?s:this._options.writeOptions)}getQueryApi(t){return new et(this.transport,t)}},t.LineSplitter=s,t.Logger=_,t.Point=class{constructor(t){this.tags={},this.fields={},t&&(this.name=t)}measurement(t){return this.name=t,this}tag(t,e){return this.tags[t]=e,this}booleanField(t,e){return this.fields[t]=e?"T":"F",this}intField(t,e){if("number"!=typeof e){let r;if(isNaN(r=parseInt(String(e))))throw new Error(`Expected integer value for field ${t}, but got '${e}'!`);e=r}return this.fields[t]=Math.floor(e)+"i",this}floatField(t,e){if("number"!=typeof e){let r;if(isNaN(r=parseFloat(e)))throw new Error(`Expected float value for field ${t}, but got '${e}'!`);e=r}return this.fields[t]=String(e),this}stringField(t,e){return null!=e&&("string"!=typeof e&&(e=String(e)),this.fields[t]=T.quoted(e)),this}timestamp(t){return this.time=t,this}toLineProtocol(t){if(!this.name)return;let e="";if(Object.keys(this.fields).sort().forEach(t=>{if(t){const r=this.fields[t];e.length>0&&(e+=","),e+=`${T.tag(t)}=${r}`}}),0===e.length)return;let r="";const s=t&&t.defaultTags?Object.assign(Object.assign({},t.defaultTags),this.tags):this.tags;Object.keys(s).sort().forEach(t=>{if(t){const e=s[t];e&&(r+=",",r+=`${T.tag(t)}=${T.tag(e)}`)}});let n=this.time;return t&&t.convertTime&&(n=t.convertTime(n)),`${T.measurement(this.name)}${r} ${e}${void 0!==n?" "+n:""}`}toString(){const t=this.toLineProtocol(void 0);return t||"invalid point: "+JSON.stringify(this,void 0)}},t.RequestTimedOutError=f,t.canRetryHttpCall=function(t){return!!t&&("function"==typeof t.canRetry?!!t.canRetry():!(!t.code||!c.includes(t.code)))},t.chunksToLines=r,t.consoleLogger=$,t.createFluxTableColumn=function(t){var e,r;const s=new n;return s.label=String(t.label),s.dataType=t.dataType,s.group=Boolean(t.group),s.defaultValue=null!==(e=t.defaultValue)&&void 0!==e?e:"",s.index=null!==(r=t.index)&&void 0!==r?r:0,s},t.createFluxTableMetaData=m,t.createTextDecoderCombiner=e,t.currentTime=A,t.dateToProtocolTimestamp=j,t.escape=T,t.flux=function(t,...e){if(1==t.length&&0===e.length)return U(t[0]);const r=new Array(t.length+e.length);let s=0;for(let i=0;i<t.length;i++){const o=t[i];if(r[s++]=o,i<e.length){const l=e[i];let a;if(o.endsWith('"')&&i+1<t.length&&t[i+1].startsWith('"'))a=F(l);else if(a=q(l),""===a&&("object"!=typeof(n=l)||"function"!=typeof n[B]))throw new Error(`Unsupported parameter literal '${l}' at index: ${i}, type: ${typeof l}`);r[s++]=a}else if(i<t.length-1)throw new Error("Too few parameters supplied!")}var n;return U(r.join(""))},t.fluxBool=function(t){return new P("true"===t||"false"===t?t:(!!t).toString())},t.fluxDateTime=function(t){return new P(function(t){return`time(v: "${F(t)}")`}(t))},t.fluxDuration=function(t){return new P(`duration(v: "${F(t)}")`)},t.fluxExpression=U,t.fluxFloat=function(t){return new P(z(t))},t.fluxInteger=function(t){const e=z(t);for(const t of e)if("."===t)throw new Error("not a flux integer: "+e);return new P(e)},t.fluxRegExp=function(t){return new P(M(t))},t.fluxString=function(t){return new P(`"${F(t)}"`)},t.getRetryDelay=h,t.isStatusCodeRetriable=l,t.linesToTables=w,t.newFluxTableColumn=i,t.sanitizeFloat=z,t.serializeDateTimeAsDate=function(){g["dateTime:RFC3339"]=t=>""===t?null:new Date(Date.parse(t))},t.serializeDateTimeAsNumber=function(){g["dateTime:RFC3339"]=t=>""===t?null:Date.parse(t)},t.serializeDateTimeAsString=function(){g["dateTime:RFC3339"]=t=>""===t?null:t},t.setLogger=function(t){const e=L;return L=t,e},t.stringToLines=function(t,e){let r=!1,s=0,n=0;for(;n<t.length;){const i=t.charCodeAt(n);if(10===i){if(!r){const r=n>0&&13===t.charCodeAt(n-1)?n-1:n;e.next(t.substring(s,r)),s=n+1}}else 34===i&&(r=!r);n++}s<n&&e.next(t.substring(s,n)),e.complete()},t.symbolObservable=H,t.toFluxValue=q,t.typeSerializers=g,t.useProcessHrtime=function(t){return!1},Object.defineProperty(t,"__esModule",{value:!0})}));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL0BncGEtZ2Vtc3RvbmUvcmVhY3QtdGFibGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9yZXN1bHRzL2NodW5rQ29tYmluZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9yZXN1bHRzL2NodW5rc1RvTGluZXMudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9yZXN1bHRzL0xpbmVTcGxpdHRlci50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL3Jlc3VsdHMvRmx1eFRhYmxlQ29sdW1uLnRzIiwid2VicGFjazovLy8uLi9zcmMvZXJyb3JzLnRzIiwid2VicGFjazovLy8uLi9zcmMvcmVzdWx0cy9GbHV4VGFibGVNZXRhRGF0YS50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL3Jlc3VsdHMvbGluZXNUb1RhYmxlcy50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL29wdGlvbnMudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy91dGlsL2VzY2FwZS50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL3V0aWwvY3VycmVudFRpbWUudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy91dGlsL2xvZ2dlci50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL3F1ZXJ5L2ZsdXgudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9vYnNlcnZhYmxlL3N5bWJvbC50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2ltcGwvcmV0cnlTdHJhdGVneS50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2ltcGwvUmV0cnlCdWZmZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9pbXBsL1dyaXRlQXBpSW1wbC50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2ltcGwvYnJvd3Nlci9GZXRjaFRyYW5zcG9ydC50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2ltcGwvY29tcGxldGVDb21tdW5pY2F0aW9uT2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9RdWVyeUFwaS50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL2ltcGwvT2JzZXJ2YWJsZVF1ZXJ5LnRzIiwid2VicGFjazovLy8uLi9zcmMvaW1wbC9RdWVyeUFwaUltcGwudHMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9JbmZsdXhEQi50cyIsIndlYnBhY2s6Ly8vLi4vc3JjL1BvaW50LnRzIiwid2VicGFjazovLy8uLi9zcmMvcmVzdWx0cy9zdHJpbmdUb0xpbmVzLnRzIl0sIm5hbWVzIjpbImNyZWF0ZVRleHREZWNvZGVyQ29tYmluZXIiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJbb2JqZWN0IE9iamVjdF0iLCJmaXJzdCIsInNlY29uZCIsInJldFZhbCIsIlVpbnQ4QXJyYXkiLCJsZW5ndGgiLCJzZXQiLCJjaHVuayIsInN0YXJ0IiwiZW5kIiwic3ViYXJyYXkiLCJ0b1V0ZjhTdHJpbmciLCJkZWNvZGUiLCJjaHVua3NUb0xpbmVzIiwidGFyZ2V0IiwiY2h1bmtDb21iaW5lciIsImNodW5rcyIsInByZXZpb3VzIiwiZmluaXNoZWQiLCJxdW90ZWQiLCJpbmRleCIsImNvbmNhdCIsImMiLCJuZXh0IiwiY29weSIsInVuZGVmaW5lZCIsImJ1ZmZlclJlY2VpdmVkIiwiZSIsInRoaXMiLCJlcnJvciIsImNvbXBsZXRlIiwiY2FuY2VsbGFibGUiLCJ1c2VDYW5jZWxsYWJsZSIsInNlbGYiLCJjYW5jZWwiLCJpc0NhbmNlbGxlZCIsIkxpbmVTcGxpdHRlciIsInJldXNlIiwiX3JldXNlIiwidmFsIiwicmV1c2VkVmFsdWVzIiwiQXJyYXkiLCJsaW5lIiwibGFzdFNwbGl0TGVuZ3RoIiwicXVvdGVDb3VudCIsInN0YXJ0SW5kZXgiLCJ2YWx1ZXMiLCJjb3VudCIsImkiLCJnZXRWYWx1ZSIsInB1c2giLCJzdWJzdHJpbmciLCJyZXBsYWNlIiwiRmx1eFRhYmxlQ29sdW1uSW1wbCIsIm5ld0ZsdXhUYWJsZUNvbHVtbiIsInJldHJpYWJsZVN0YXR1c0NvZGVzIiwiaXNTdGF0dXNDb2RlUmV0cmlhYmxlIiwic3RhdHVzQ29kZSIsImluY2x1ZGVzIiwiSWxsZWdhbEFyZ3VtZW50RXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJzdXBlciIsIm5hbWUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIkh0dHBFcnJvciIsInN0YXR1c01lc3NhZ2UiLCJib2R5IiwicmV0cnlBZnRlciIsImNvbnRlbnRUeXBlIiwic3RhcnRzV2l0aCIsImpzb24iLCJKU09OIiwicGFyc2UiLCJjb2RlIiwic2V0UmV0cnlBZnRlciIsInRlc3QiLCJfcmV0cnlBZnRlciIsInBhcnNlSW50IiwiUkVUUllfQ09ERVMiLCJnZXRSZXRyeURlbGF5IiwicmV0cnlKaXR0ZXIiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJSZXF1ZXN0VGltZWRPdXRFcnJvciIsIkFib3J0RXJyb3IiLCJpZGVudGl0eSIsIngiLCJ0eXBlU2VyaWFsaXplcnMiLCJib29sZWFuIiwidW5zaWduZWRMb25nIiwibG9uZyIsImRvdWJsZSIsInN0cmluZyIsImJhc2U2NEJpbmFyeSIsImR1cmF0aW9uIiwiZGF0ZVRpbWU6UkZDMzMzOSIsIkZsdXhUYWJsZU1ldGFEYXRhSW1wbCIsImNvbHVtbnMiLCJmb3JFYWNoIiwiY29sIiwibGFiZWwiLCJhY2MiLCJjb2x1bW4iLCJkZWZhdWx0VmFsdWUiLCJkYXRhVHlwZSIsImNyZWF0ZUZsdXhUYWJsZU1ldGFEYXRhIiwibGluZXNUb1RhYmxlcyIsImNvbnN1bWVyIiwic3BsaXR0ZXIiLCJ3aXRoUmV1c2UiLCJsYXN0TWV0YSIsImV4cGVjdE1ldGEiLCJmaXJzdENvbHVtbkluZGV4Iiwic3BsaXRMaW5lIiwic2l6ZSIsImdyb3VwIiwic2xpY2UiLCJERUZBVUxUX1JldHJ5RGVsYXlTdHJhdGVneU9wdGlvbnMiLCJtaW5SZXRyeURlbGF5IiwibWF4UmV0cnlEZWxheSIsImV4cG9uZW50aWFsQmFzZSIsIkRFRkFVTFRfV3JpdGVPcHRpb25zIiwiYmF0Y2hTaXplIiwiZmx1c2hJbnRlcnZhbCIsIndyaXRlRmFpbGVkIiwid3JpdGVTdWNjZXNzIiwibWF4UmV0cmllcyIsIm1heEJ1ZmZlckxpbmVzIiwiZ3ppcFRocmVzaG9sZCIsImNyZWF0ZUVzY2FwZXIiLCJjaGFyYWN0ZXJzIiwicmVwbGFjZW1lbnRzIiwidmFsdWUiLCJmcm9tIiwiZm91bmQiLCJpbmRleE9mIiwiZXNjYXBlIiwibWVhc3VyZW1lbnQiLCJlc2NhcGVyIiwiY3JlYXRlUXVvdGVkRXNjYXBlciIsInRhZyIsImxhc3RNaWxsaXMiLCJEYXRlIiwibm93Iiwic3RlcHNJbk1pbGxpcyIsIm5hbm9zIiwibWlsbGlzIiwiU3RyaW5nIiwic3Vic3RyIiwibWljcm9zIiwic2Vjb25kcyIsImZsb29yIiwiY3VycmVudFRpbWUiLCJzIiwibXMiLCJ1cyIsIm5zIiwiZGF0ZVRvUHJvdG9jb2xUaW1lc3RhbXAiLCJkIiwiZ2V0VGltZSIsImNvbnNvbGVMb2dnZXIiLCJjb25zb2xlIiwid2FybiIsInByb3ZpZGVyIiwiTG9nZ2VyIiwiRkxVWF9WQUxVRSIsIlN5bWJvbCIsIkZsdXhQYXJhbWV0ZXIiLCJmbHV4VmFsdWUiLCJzYW5pdGl6ZVN0cmluZyIsInRvU3RyaW5nIiwicHJlcGFyZVJldFZhbCIsImNoYXJBdCIsInNhbml0aXplRmxvYXQiLCJpc0Zpbml0ZSIsImRvdCIsInNhbml0aXplUmVnRXhwIiwiZmx1eEV4cHJlc3Npb24iLCJ0b0ZsdXhWYWx1ZSIsInRvSVNPU3RyaW5nIiwiUmVnRXhwIiwiaXNBcnJheSIsIm1hcCIsImpvaW4iLCJzeW1ib2xPYnNlcnZhYmxlIiwib2JzZXJ2YWJsZSIsIlJldHJ5U3RyYXRlZ3lJbXBsIiwib3B0aW9ucyIsInN1Y2Nlc3MiLCJmYWlsZWRBdHRlbXB0cyIsImRlbGF5IiwibWluIiwibWF4IiwiY3VycmVudERlbGF5IiwiUmV0cnlCdWZmZXIiLCJtYXhMaW5lcyIsInJldHJ5TGluZXMiLCJsaW5lcyIsInJldHJ5Q291bnQiLCJjbG9zZWQiLCJyZXRyeVRpbWUiLCJuZXh0UmV0cnlUaW1lIiwib3JpZ1NpemUiLCJuZXdTaXplIiwibmV3Rmlyc3QiLCJ0b0FkZCIsImxhc3QiLCJzY2hlZHVsZVJldHJ5IiwidG9SZXRyeSIsIl90aW1lb3V0SGFuZGxlIiwic2V0VGltZW91dCIsInJlbW92ZUxpbmVzIiwidGhlbiIsImNhdGNoIiwiX2UiLCJjbGVhclRpbWVvdXQiLCJXcml0ZUJ1ZmZlciIsIm1heENodW5rUmVjb3JkcyIsImZsdXNoRm4iLCJzY2hlZHVsZVNlbmQiLCJyZWNvcmQiLCJmbHVzaCIsInJlc2V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJXcml0ZUFwaUltcGwiLCJ0cmFuc3BvcnQiLCJvcmciLCJidWNrZXQiLCJwcmVjaXNpb24iLCJ3cml0ZU9wdGlvbnMiLCJodHRwUGF0aCIsImVuY29kZVVSSUNvbXBvbmVudCIsImRlZmF1bHRUYWdzIiwidXNlRGVmYXVsdFRhZ3MiLCJzZW5kT3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJjb250ZW50LXR5cGUiLCJ3cml0ZUJ1ZmZlciIsIl9jbGVhckZsdXNoVGltZW91dCIsInNlbmRCYXRjaCIsImJpbmQiLCJyZXRyeVN0cmF0ZWd5IiwicmV0cnlCdWZmZXIiLCJhdHRlbXB0cyIsInJlamVjdCIsInJlc3BvbnNlU3RhdHVzQ29kZSIsImNhbGxiYWNrcyIsIl9oZWFkZXJzIiwib25SZXRyeSIsImNhbGwiLCJhZGRMaW5lcyIsIm5leHREZWxheSIsInNlbmQiLCJhZGQiLCJyZWNvcmRzIiwicG9pbnQiLCJ0b0xpbmVQcm90b2NvbCIsInBvaW50cyIsIndpdGhSZXRyeUJ1ZmZlciIsImZpbmFsbHkiLCJyZW1haW5pbmciLCJjbG9zZSIsInRhZ3MiLCJrZXlzIiwia2V5IiwiZ2V0UmVzcG9uc2VIZWFkZXJzIiwicmVzcG9uc2UiLCJGZXRjaFRyYW5zcG9ydCIsImNvbm5lY3Rpb25PcHRpb25zIiwiZGVmYXVsdEhlYWRlcnMiLCJ0b2tlbiIsInVybCIsImVuZHNXaXRoIiwicGF0aCIsIm9ic2VydmVyIiwic3RhdGUiLCJkYXRhIiwicmVzcG9uc2VTdGFydGVkIiwiY29tcGxldGVDb21tdW5pY2F0aW9uT2JzZXJ2ZXIiLCJjYW5jZWxsZWQiLCJzaWduYWwiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwiYWJvcnQiLCJhYm9ydGVkIiwiZmV0Y2giLCJzdGF0dXMiLCJ0ZXh0IiwiaGVhZGVyRXJyb3IiLCJnZXQiLCJzdGF0dXNUZXh0IiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwicmVhZCIsImRvbmUiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwicmVzcG9uc2VDb250ZW50VHlwZSIsInJlc3BvbnNlVHlwZSIsImFjY2VwdCIsIm90aGVyIiwicmVxdWVzdCIsInN0cmluZ2lmeSIsImNyZWRlbnRpYWxzIiwicmVxdWVzdERlY29yYXRvciIsImRlZmF1bHRSb3dNYXBwaW5nIiwidGFibGVNZXRhIiwidG9PYmplY3QiLCJRdWVyeVN1YnNjcmlwdGlvbiIsImV4ZWN1dG9yIiwiaXNDbG9zZWQiLCJub29wIiwiT2JzZXJ2YWJsZVF1ZXJ5IiwiZGVjb3JhdG9yIiwib2JzZXJ2ZXJPck5leHQiLCJjb21wbGV0ZU9ic2VydmVyIiwiREVGQVVMVF9kaWFsZWN0IiwiaGVhZGVyIiwiZGVsaW1pdGVyIiwicXVvdGVDaGFyIiwiY29tbWVudFByZWZpeCIsImFubm90YXRpb25zIiwiUXVlcnlBcGlJbXBsIiwicXVlcnkiLCJjcmVhdGVFeGVjdXRvciIsInJvd01hcHBlciIsInF1ZXJ5Um93cyIsInF1ZXJ5TGluZXMiLCJ0eXBlIiwiZ3ppcCIsImRlY29yYXRlUmVxdWVzdCIsImRpYWxlY3QiLCJhY2NlcHQtZW5jb2RpbmciLCJ0aW1lb3V0IiwiX29wdGlvbnMiLCJUcmFuc3BvcnRJbXBsIiwibWVhc3VyZW1lbnROYW1lIiwiZmllbGRzIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwidGltZSIsInNldHRpbmdzIiwiZmllbGRzTGluZSIsInNvcnQiLCJ0YWdzTGluZSIsImNvbnZlcnRUaW1lIiwiY2FuUmV0cnkiLCJvYmplY3QiLCJCb29sZWFuIiwic3RyaW5ncyIsInBhcnRzIiwicGFydEluZGV4Iiwic2FuaXRpemVkIiwic2FuaXRp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QUFPeFQsVUFBVTNDLEVBQU9ZLElBRXRDTixFQUFPZ0IsaUdkaEN3QitVLEdBSzdCLE9BQU8iLCJmaWxlIjoidmVuZG9yc35NZXRlckF2YWlsYWJpbGl0eS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLy8gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuLy8gIFRhYmxlLnRzeCAtIEdidGNcbi8vXG4vLyAgQ29weXJpZ2h0IMKpIDIwMTgsIEdyaWQgUHJvdGVjdGlvbiBBbGxpYW5jZS4gIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vL1xuLy8gIExpY2Vuc2VkIHRvIHRoZSBHcmlkIFByb3RlY3Rpb24gQWxsaWFuY2UgKEdQQSkgdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWVcbi8vICB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuXG4vLyAgVGhlIEdQQSBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgdGhlIFwiTGljZW5zZVwiOyB5b3UgbWF5IG5vdCB1c2UgdGhpc1xuLy8gIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0OlxuLy9cbi8vICAgICAgaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuLy9cbi8vICBVbmxlc3MgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHRoZSBzdWJqZWN0IHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4vLyAgXCJBUy1JU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gUmVmZXIgdG8gdGhlXG4vLyAgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMuXG4vL1xuLy8gIENvZGUgTW9kaWZpY2F0aW9uIEhpc3Rvcnk6XG4vLyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gIDA4LzAyLzIwMTggLSBCaWxseSBFcm5lc3Rcbi8vICAgICAgIEdlbmVyYXRlZCBvcmlnaW5hbCB2ZXJzaW9uIG9mIHNvdXJjZSBjb2RlLlxuLy9cbi8vICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFJlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xudmFyIF8gPSByZXF1aXJlKFwibG9kYXNoXCIpO1xudmFyIEFuZ2xlSWNvbiA9IGZ1bmN0aW9uIChwcm9wcykgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgc3R5bGU6IHsgd2lkdGg6IDEwLCBoZWlnaHQ6IDEwLCBtYXJnaW46IDMgfSwgY2xhc3NOYW1lOiAnZmEgZmEtYW5nbGUtJyArIChwcm9wcy5hc2NlbmRpbmcgPyAndXAnIDogJ2Rvd24nKSB9KSk7IH07XG52YXIgVGFibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRhYmxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRhYmxlKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICB9XG4gICAgVGFibGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJvd0NvbXBvbmVudHMgPSB0aGlzLmdlbmVyYXRlUm93cygpO1xuICAgICAgICB2YXIgaGVhZGVyQ29tcG9uZW50cyA9IHRoaXMuZ2VuZXJhdGVIZWFkZXJzKCk7XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcInRhYmxlXCIsIHsgY2xhc3NOYW1lOiB0aGlzLnByb3BzLnRhYmxlQ2xhc3MgIT09IHVuZGVmaW5lZCA/IHRoaXMucHJvcHMudGFibGVDbGFzcyA6ICcnLCBzdHlsZTogdGhpcy5wcm9wcy50YWJsZVN0eWxlIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwidGhlYWRcIiwgeyBzdHlsZTogdGhpcy5wcm9wcy50aGVhZFN0eWxlIH0sIGhlYWRlckNvbXBvbmVudHMpLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInRib2R5XCIsIHsgc3R5bGU6IHRoaXMucHJvcHMudGJvZHlTdHlsZSB9LCByb3dDb21wb25lbnRzKSkpO1xuICAgIH07XG4gICAgVGFibGUucHJvdG90eXBlLmdlbmVyYXRlSGVhZGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuY29scy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5wcm9wcy5jb2xzLm1hcChmdW5jdGlvbiAoY29sRGF0YSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBzdHlsZTtcbiAgICAgICAgICAgIGlmIChjb2xEYXRhLmhlYWRlclN0eWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZSA9IGNvbERhdGEuaGVhZGVyU3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIGlmIChzdHlsZS5jdXJzb3IgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBzdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLCB7IGtleTogaW5kZXgsIHN0eWxlOiBzdHlsZSwgb25DbGljazogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmhhbmRsZVNvcnQoeyBjb2w6IGNvbERhdGEua2V5LCBhc2NlbmRpbmc6IF90aGlzLnByb3BzLmFzY2VuZGluZyB9LCBlKTsgfSB9LFxuICAgICAgICAgICAgICAgIGNvbERhdGEubGFiZWwsXG4gICAgICAgICAgICAgICAgX3RoaXMucHJvcHMuc29ydEZpZWxkID09PSBjb2xEYXRhLmtleSA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQW5nbGVJY29uLCB7IGFzY2VuZGluZzogX3RoaXMucHJvcHMuYXNjZW5kaW5nIH0pIDogbnVsbCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0clwiLCBudWxsLCBjZWxscyk7XG4gICAgfTtcbiAgICBUYWJsZS5wcm90b3R5cGUuZ2VuZXJhdGVSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5kYXRhLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5kYXRhLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjZWxscyA9IF90aGlzLnByb3BzLmNvbHMubWFwKGZ1bmN0aW9uIChjb2xEYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNzcztcbiAgICAgICAgICAgICAgICBpZiAoY29sRGF0YS5yb3dTdHlsZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBjc3MgPSB7fTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGNzcyA9IF8uY2xvbmUoY29sRGF0YS5yb3dTdHlsZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwidGRcIiwgeyBrZXk6IGluZGV4LnRvU3RyaW5nKCkgKyBpdGVtW2NvbERhdGEua2V5XSArIGNvbERhdGEua2V5LCBzdHlsZTogY3NzLCBvbkNsaWNrOiBfdGhpcy5oYW5kbGVDbGljay5iaW5kKF90aGlzLCB7IGNvbDogY29sRGF0YS5rZXksIHJvdzogaXRlbSwgZGF0YTogaXRlbVtjb2xEYXRhLmtleV0gfSkgfSwgY29sRGF0YS5jb250ZW50ICE9PSB1bmRlZmluZWQgPyBjb2xEYXRhLmNvbnRlbnQoaXRlbSwgY29sRGF0YS5rZXksIGNzcykgOiBpdGVtW2NvbERhdGEua2V5XSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgc3R5bGU7XG4gICAgICAgICAgICBpZiAoX3RoaXMucHJvcHMucm93U3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHN0eWxlID0gXy5jbG9uZShfdGhpcy5wcm9wcy5yb3dTdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc3R5bGUgPSB7fTtcbiAgICAgICAgICAgIGlmIChzdHlsZS5jdXJzb3IgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBzdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICBpZiAoX3RoaXMucHJvcHMuc2VsZWN0ZWQgIT09IHVuZGVmaW5lZCAmJiBfdGhpcy5wcm9wcy5zZWxlY3RlZChpdGVtKSlcbiAgICAgICAgICAgICAgICBzdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAneWVsbG93JztcbiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcInRyXCIsIHsgc3R5bGU6IHN0eWxlLCBrZXk6IGluZGV4LnRvU3RyaW5nKCkgfSwgY2VsbHMpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBUYWJsZS5wcm90b3R5cGUuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoZGF0YSwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKGRhdGEsIGV2ZW50KTtcbiAgICB9O1xuICAgIFRhYmxlLnByb3RvdHlwZS5oYW5kbGVTb3J0ID0gZnVuY3Rpb24gKGRhdGEsIGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Tb3J0KGRhdGEpO1xuICAgIH07XG4gICAgcmV0dXJuIFRhYmxlO1xufShSZWFjdC5Db21wb25lbnQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFRhYmxlO1xuIiwiLyoqXG4gKiBDaHVua0NvbWJpbmVyIGlzIGEgc2ltcGxpZmllZCBwbGF0Zm9ybS1uZXV0cmFsIG1hbmlwdWxhdGlvbiBvZiBVaW50OGFycmF5c1xuICogdGhhdCBhbGxvd3MgdG8gcHJvY2VzcyB0ZXh0IGRhdGEgb24gdGhlIGZseS4gVGhlIGltcGxlbWVudGF0aW9uIGNhbiBiZSBvcHRpbWl6ZWRcbiAqIGZvciB0aGUgdGFyZ2V0IHBsYXRmb3JtIChub2RlIHZzIGJyb3dzZXIpLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENodW5rQ29tYmluZXIge1xuICAvKipcbiAgICogQ29uY2F0ZW5hdGVzIGZpcnN0IGFuZCBzZWNvbmQgY2h1bmsuXG4gICAqIEBwYXJhbSBmaXJzdCAtIGZpcnN0IGNodW5rXG4gICAqIEBwYXJhbSBzZWNvbmQgLSBzZWNvbmQgY2h1bmtcbiAgICogQHJldHVybnMgZmlyc3QgKyBzZWNvbmRcbiAgICovXG4gIGNvbmNhdChmaXJzdDogVWludDhBcnJheSwgc2Vjb25kOiBVaW50OEFycmF5KTogVWludDhBcnJheVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBjaHVuayBpbnRvIGEgc3RyaW5nLlxuICAgKiBAcGFyYW0gY2h1bmsgLSBjaHVua1xuICAgKiBAcGFyYW0gc3RhcnQgLSBzdGFydCBpbmRleFxuICAgKiBAcGFyYW0gZW5kIC0gZW5kIGluZGV4XG4gICAqIEByZXR1cm5zIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBjaHVuayBzbGljZVxuICAgKi9cbiAgdG9VdGY4U3RyaW5nKGNodW5rOiBVaW50OEFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHN0cmluZ1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGNodW5rIGZyb20gdGhlIHN1cHBsaWVkIGNodW5rLlxuICAgKiBAcGFyYW0gY2h1bmsgLSBjaHVuayB0byBjb3B5XG4gICAqIEBwYXJhbSBzdGFydCAtIHN0YXJ0IGluZGV4XG4gICAqIEBwYXJhbSBlbmQgLSBlbmQgaW5kZXhcbiAgICogQHJldHVybnMgYSBjb3B5IG9mIGEgY2h1bmsgc2xpY2VcbiAgICovXG4gIGNvcHkoY2h1bms6IFVpbnQ4QXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogVWludDhBcnJheVxufVxuXG4vLyBUZXh0RGVjb2RlciBpcyBhdmFpbGFibGUgc2luY2Ugbm9kZSB2OC4zLjAgYW5kIGluIGFsbCBtb2Rlcm4gYnJvd3NlcnNcbmRlY2xhcmUgY29uc3QgVGV4dERlY29kZXI6IGFueVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjaHVuayBjb21iaW5lciBpbnN0YW5jZSB0aGF0IHVzZXMgVVRGLThcbiAqIFRleHREZWNvZGVyIHRvIGRlY29kZSBVaW50OEFycmF5cyBpbnRvIHN0cmluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXh0RGVjb2RlckNvbWJpbmVyKCk6IENodW5rQ29tYmluZXIge1xuICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpXG4gIHJldHVybiB7XG4gICAgY29uY2F0KGZpcnN0OiBVaW50OEFycmF5LCBzZWNvbmQ6IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5IHtcbiAgICAgIGNvbnN0IHJldFZhbCA9IG5ldyBVaW50OEFycmF5KGZpcnN0Lmxlbmd0aCArIHNlY29uZC5sZW5ndGgpXG4gICAgICByZXRWYWwuc2V0KGZpcnN0KVxuICAgICAgcmV0VmFsLnNldChzZWNvbmQsIGZpcnN0Lmxlbmd0aClcbiAgICAgIHJldHVybiByZXRWYWxcbiAgICB9LFxuICAgIGNvcHkoY2h1bms6IFVpbnQ4QXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogVWludDhBcnJheSB7XG4gICAgICBjb25zdCByZXRWYWwgPSBuZXcgVWludDhBcnJheShlbmQgLSBzdGFydClcbiAgICAgIHJldFZhbC5zZXQoY2h1bmsuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gICAgICByZXR1cm4gcmV0VmFsXG4gICAgfSxcbiAgICB0b1V0ZjhTdHJpbmcoY2h1bms6IFVpbnQ4QXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShjaHVuay5zdWJhcnJheShzdGFydCwgZW5kKSlcbiAgICB9LFxuICB9XG59XG4iLCJpbXBvcnQge0NodW5rQ29tYmluZXIsIGNyZWF0ZVRleHREZWNvZGVyQ29tYmluZXJ9IGZyb20gJy4vY2h1bmtDb21iaW5lcidcbmltcG9ydCB7Q29tbXVuaWNhdGlvbk9ic2VydmVyfSBmcm9tICcuL0NvbW11bmljYXRpb25PYnNlcnZlcidcbmltcG9ydCB7Q2FuY2VsbGFibGV9IGZyb20gJy4vQ2FuY2VsbGFibGUnXG5cbi8qKlxuICogQ2h1bmtzVG9MaW5lcyBpcyBhIHRyYW5zZm9ybWF0aW9uIHRoYXQgYWNjZXB0cyBVaW50OEFycmF5IGluc3RhbmNlc1xuICogYW5kIGVtbWl0cyBzdHJpbmdzIHJlcHJlc2VudGluZyBDU1YgbGluZXMuXG4gKiBAcGFyYW0gdGFyZ2V0IC0gdGFyZ2V0IHRvIGVtbWl0IENTViBsaW5lcyB0b1xuICogQHBhcmFtIGNodW5rcyAtIGNodW5rIGNvbWJpbmVyXG4gKiBAcmV0dXJucyBjb21tdW5pY2F0aW9uIG9icnZlciB0byBhY2NlcHQgVWludDhBcnJheXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNodW5rc1RvTGluZXMoXG4gIHRhcmdldDogQ29tbXVuaWNhdGlvbk9ic2VydmVyPHN0cmluZz4sXG4gIGNodW5rQ29tYmluZXI/OiBDaHVua0NvbWJpbmVyXG4pOiBDb21tdW5pY2F0aW9uT2JzZXJ2ZXI8VWludDhBcnJheT4ge1xuICBjb25zdCBjaHVua3MgPSBjaHVua0NvbWJpbmVyID8/IGNyZWF0ZVRleHREZWNvZGVyQ29tYmluZXIoKVxuICBsZXQgcHJldmlvdXM6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWRcbiAgbGV0IGZpbmlzaGVkID0gZmFsc2VcbiAgbGV0IHF1b3RlZCA9IGZhbHNlXG5cbiAgZnVuY3Rpb24gYnVmZmVyUmVjZWl2ZWQoY2h1bms6IFVpbnQ4QXJyYXkpOiB2b2lkIHtcbiAgICBsZXQgaW5kZXg6IG51bWJlclxuICAgIGxldCBzdGFydCA9IDBcbiAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgIGNodW5rID0gY2h1bmtzLmNvbmNhdChwcmV2aW91cywgY2h1bmspXG4gICAgICBpbmRleCA9IChwcmV2aW91cyBhcyBCdWZmZXIpLmxlbmd0aFxuICAgIH0gZWxzZSB7XG4gICAgICBpbmRleCA9IDBcbiAgICB9XG4gICAgd2hpbGUgKGluZGV4IDwgY2h1bmsubGVuZ3RoKSB7XG4gICAgICBjb25zdCBjID0gY2h1bmtbaW5kZXhdXG4gICAgICBpZiAoYyA9PT0gMTApIHtcbiAgICAgICAgaWYgKCFxdW90ZWQpIHtcbiAgICAgICAgICAvKiBkbyBub3QgZW1pdCBDUitMUiBvciBMRiBsaW5lIGVuZGluZyAqL1xuICAgICAgICAgIGNvbnN0IGVuZCA9IGluZGV4ID4gMCAmJiBjaHVua1tpbmRleCAtIDFdID09PSAxMyA/IGluZGV4IC0gMSA6IGluZGV4XG4gICAgICAgICAgLy8gZG8gbm90IGVtbWl0IG1vcmUgbGluZXMgaWYgdGhlIHByb2Nlc3NpbmcgaXMgYWxyZWFkeSBmaW5pc2hlZFxuICAgICAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIHRhcmdldC5uZXh0KGNodW5rcy50b1V0ZjhTdHJpbmcoY2h1bmssIHN0YXJ0LCBlbmQpKVxuICAgICAgICAgIHN0YXJ0ID0gaW5kZXggKyAxXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYyA9PT0gMzQgLyogXCIgKi8pIHtcbiAgICAgICAgcXVvdGVkID0gIXF1b3RlZFxuICAgICAgfVxuICAgICAgaW5kZXgrK1xuICAgIH1cbiAgICBpZiAoc3RhcnQgPCBpbmRleCkge1xuICAgICAgcHJldmlvdXMgPSBjaHVua3MuY29weShjaHVuaywgc3RhcnQsIGluZGV4KVxuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2aW91cyA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbmV4dChjaHVuazogVWludDhBcnJheSk6IHZvaWQge1xuICAgICAgaWYgKGZpbmlzaGVkKSByZXR1cm5cbiAgICAgIHRyeSB7XG4gICAgICAgIGJ1ZmZlclJlY2VpdmVkKGNodW5rKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aGlzLmVycm9yKGUpXG4gICAgICB9XG4gICAgfSxcbiAgICBlcnJvcihlcnJvcjogRXJyb3IpOiB2b2lkIHtcbiAgICAgIGlmICghZmluaXNoZWQpIHtcbiAgICAgICAgZmluaXNoZWQgPSB0cnVlXG4gICAgICAgIHRhcmdldC5lcnJvcihlcnJvcilcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBsZXRlKCk6IHZvaWQge1xuICAgICAgaWYgKCFmaW5pc2hlZCkge1xuICAgICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgICB0YXJnZXQubmV4dChjaHVua3MudG9VdGY4U3RyaW5nKHByZXZpb3VzLCAwLCBwcmV2aW91cy5sZW5ndGgpKVxuICAgICAgICB9XG4gICAgICAgIGZpbmlzaGVkID0gdHJ1ZVxuICAgICAgICB0YXJnZXQuY29tcGxldGUoKVxuICAgICAgfVxuICAgIH0sXG4gICAgdXNlQ2FuY2VsbGFibGUoY2FuY2VsbGFibGU6IENhbmNlbGxhYmxlKTogdm9pZCB7XG4gICAgICBpZiAodGFyZ2V0LnVzZUNhbmNlbGxhYmxlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpc1xuICAgICAgICB0YXJnZXQudXNlQ2FuY2VsbGFibGUoe1xuICAgICAgICAgIGNhbmNlbCgpOiB2b2lkIHtcbiAgICAgICAgICAgIGNhbmNlbGxhYmxlLmNhbmNlbCgpXG4gICAgICAgICAgICBwcmV2aW91cyA9IHVuZGVmaW5lZCAvLyBkbyBub3QgZW1pdCBtb3JlIGxpbmVzXG4gICAgICAgICAgICBzZWxmLmNvbXBsZXRlKClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlzQ2FuY2VsbGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbmNlbGxhYmxlLmlzQ2FuY2VsbGVkKClcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sXG4gIH1cbn1cbiIsIi8qKlxuICogT3B0aW1pemVkIHRva2VuaXplciBvZiBhIHNpbmdsZSBDU1YgbGluZS5cbiAqL1xuZXhwb3J0IGNsYXNzIExpbmVTcGxpdHRlciB7XG4gIC8qKiByZXR1cm5lZCB2YWx1ZSB3aGVuIHJldXNlZCAgKi9cbiAgcmV1c2VkVmFsdWVzOiBzdHJpbmdbXVxuICAvKiogbGFzdCBsZW5ndGggb2YgZWxlbWVudHMgaW4gKi9cbiAgbGFzdFNwbGl0TGVuZ3RoOiBudW1iZXJcbiAgcHJpdmF0ZSBfcmV1c2UgPSBmYWxzZVxuXG4gIC8qKlxuICAgKiBSZXVzZSByZXR1cm5lZCBhcnJheSBiZXR3ZWVuIGNvbnNlY3V0aXZlIGNhbGxzLlxuICAgKi9cbiAgZ2V0IHJldXNlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9yZXVzZVxuICB9XG4gIHNldCByZXVzZSh2YWw6IGJvb2xlYW4pIHtcbiAgICBpZiAodmFsICYmICF0aGlzLnJldXNlZFZhbHVlcykge1xuICAgICAgdGhpcy5yZXVzZWRWYWx1ZXMgPSBuZXcgQXJyYXkoMTApXG4gICAgfVxuICAgIHRoaXMuX3JldXNlID0gdmFsXG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcmV1c2UgZmxhZyBhbmQgcmV0dXJucyB0aGlzLlxuICAgKi9cbiAgd2l0aFJldXNlKCk6IExpbmVTcGxpdHRlciB7XG4gICAgdGhpcy5yZXVzZSA9IHRydWVcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0cyB0aGUgc3VwcGxpZWQgbGluZSB0byBlbGVtZW50cyB0aGF0IGFyZSBzZXBhcmF0ZWQgYnlcbiAgICogY29tbWEgd2l0aCB2YWx1ZXMgcG9zc2libHkgZXNjYXBlZCB3aXRoaW4gZG91YmxlIHF1b3RlcyAoXCJ2YWx1ZVwiKVxuICAgKiBAcGFyYW0gbGluZSAtIGxpbmVcbiAgICogQHJldHVybnMgYXJyYXkgb2Ygc3BsaXR0ZWQgcGFydHNcbiAgICovXG4gIHNwbGl0TGluZShsaW5lOiBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKTogc3RyaW5nW10ge1xuICAgIGlmIChsaW5lID09PSBudWxsIHx8IGxpbmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5sYXN0U3BsaXRMZW5ndGggPSAwXG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgbGV0IHF1b3RlQ291bnQgPSAwXG4gICAgbGV0IHN0YXJ0SW5kZXggPSAwXG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5fcmV1c2UgPyB0aGlzLnJldXNlZFZhbHVlcyA6IFtdXG4gICAgbGV0IGNvdW50ID0gMFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYyA9IGxpbmVbaV1cbiAgICAgIGlmIChjID09PSAnLCcpIHtcbiAgICAgICAgaWYgKHF1b3RlQ291bnQgJSAyID09PSAwKSB7XG4gICAgICAgICAgY29uc3QgdmFsID0gdGhpcy5nZXRWYWx1ZShsaW5lLCBzdGFydEluZGV4LCBpLCBxdW90ZUNvdW50KVxuICAgICAgICAgIGlmICh0aGlzLl9yZXVzZSkge1xuICAgICAgICAgICAgdmFsdWVzW2NvdW50KytdID0gdmFsXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbClcbiAgICAgICAgICB9XG4gICAgICAgICAgc3RhcnRJbmRleCA9IGkgKyAxXG4gICAgICAgICAgcXVvdGVDb3VudCA9IDBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjID09PSAnXCInKSB7XG4gICAgICAgIHF1b3RlQ291bnQrK1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB2YWwgPSB0aGlzLmdldFZhbHVlKGxpbmUsIHN0YXJ0SW5kZXgsIGxpbmUubGVuZ3RoLCBxdW90ZUNvdW50KVxuICAgIGlmICh0aGlzLl9yZXVzZSkge1xuICAgICAgdmFsdWVzW2NvdW50XSA9IHZhbFxuICAgICAgdGhpcy5sYXN0U3BsaXRMZW5ndGggPSBjb3VudCArIDFcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVzLnB1c2godmFsKVxuICAgICAgdGhpcy5sYXN0U3BsaXRMZW5ndGggPSB2YWx1ZXMubGVuZ3RoXG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlc1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRWYWx1ZShcbiAgICBsaW5lOiBzdHJpbmcsXG4gICAgc3RhcnQ6IG51bWJlcixcbiAgICBlbmQ6IG51bWJlcixcbiAgICBxdW90ZUNvdW50OiBudW1iZXJcbiAgKTogc3RyaW5nIHtcbiAgICBpZiAoc3RhcnQgPT09IGxpbmUubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9IGVsc2UgaWYgKHF1b3RlQ291bnQgPT09IDApIHtcbiAgICAgIHJldHVybiBsaW5lLnN1YnN0cmluZyhzdGFydCwgZW5kKVxuICAgIH0gZWxzZSBpZiAocXVvdGVDb3VudCA9PT0gMikge1xuICAgICAgcmV0dXJuIGxpbmUuc3Vic3RyaW5nKHN0YXJ0ICsgMSwgZW5kIC0gMSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcXVvdGVDb3VudCA+PSA0XG4gICAgICByZXR1cm4gbGluZS5zdWJzdHJpbmcoc3RhcnQgKyAxLCBlbmQgLSAxKS5yZXBsYWNlKC9cIlwiL2dpLCAnXCInKVxuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBUeXBlIG9mIHF1ZXJ5IHJlc3VsdCBjb2x1bW4sIHNlZSB7QGxpbmsgaHR0cHM6Ly92Mi5kb2NzLmluZmx1eGRhdGEuY29tL3YyLjAvcmVmZXJlbmNlL3N5bnRheC9hbm5vdGF0ZWQtY3N2LyN2YWxpZC1kYXRhLXR5cGVzIH1cbiAqL1xuZXhwb3J0IHR5cGUgQ29sdW1uVHlwZSA9XG4gIHwgJ2Jvb2xlYW4nXG4gIHwgJ3Vuc2lnbmVkTG9uZydcbiAgfCAnbG9uZydcbiAgfCAnZG91YmxlJ1xuICB8ICdzdHJpbmcnXG4gIHwgJ2Jhc2U2NEJpbmFyeSdcbiAgfCAnZGF0ZVRpbWU6UkZDMzMzOSdcbiAgfCAnZHVyYXRpb24nXG4gIHwgc3RyaW5nXG5cbi8qKlxuICogQ29sdW1uIG1ldGFkYXRhIGNsYXNzIG9mIGEge0BsaW5rIGh0dHA6Ly9iaXQubHkvZmx1eC1zcGVjI3RhYmxlIHwgZmx1eCB0YWJsZX0gY29sdW1uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZsdXhUYWJsZUNvbHVtbiB7XG4gIC8qKlxuICAgKiBMYWJlbCAoZS5nLiwgXCJfc3RhcnRcIiwgXCJfc3RvcFwiLCBcIl90aW1lXCIpLlxuICAgKi9cbiAgbGFiZWw6IHN0cmluZ1xuXG4gIC8qKlxuICAgKiBUaGUgZGF0YSB0eXBlIG9mIGNvbHVtbiAoZS5nLiwgXCJzdHJpbmdcIiwgXCJsb25nXCIsIFwiZGF0ZVRpbWU6UkZDMzMzOVwiKS5cbiAgICovXG4gIGRhdGFUeXBlOiBDb2x1bW5UeXBlXG5cbiAgLyoqXG4gICAqIEJvb2xlYW4gZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBjb2x1bW4gaXMgYSBwYXJ0IG9mIHRoZSB0YWJsZSdzIGdyb3VwIGtleS5cbiAgICovXG4gIGdyb3VwOiBib29sZWFuXG5cbiAgLyoqXG4gICAqIERlZmF1bHQgdmFsdWUgdG8gYmUgdXNlZCBmb3Igcm93cyB3aG9zZSBzdHJpbmcgdmFsdWUgaXMgYW4gZW1wdHkgc3RyaW5nLlxuICAgKi9cbiAgZGVmYXVsdFZhbHVlOiBzdHJpbmdcblxuICAvKipcbiAgICogSW5kZXggb2YgdGhpcyBjb2x1bW4gaW4gYSByb3cgYXJyYXkuXG4gICAqL1xuICBpbmRleDogbnVtYmVyXG59XG5cbi8qKlxuICogRmx1eFRhYmxlQ29sdW1uIGltcGxlbWVudGF0aW9uLlxuICovXG5jbGFzcyBGbHV4VGFibGVDb2x1bW5JbXBsIGltcGxlbWVudHMgRmx1eFRhYmxlQ29sdW1uIHtcbiAgbGFiZWw6IHN0cmluZ1xuICBkYXRhVHlwZTogQ29sdW1uVHlwZVxuICBncm91cDogYm9vbGVhblxuICBkZWZhdWx0VmFsdWU6IHN0cmluZ1xuICBpbmRleDogbnVtYmVyXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBmbHV4IHRhYmxlIGNvbHVtbi5cbiAqIEByZXR1cm5zIGNvbHVtbiBpbnN0YW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbmV3Rmx1eFRhYmxlQ29sdW1uKCk6IEZsdXhUYWJsZUNvbHVtbiB7XG4gIHJldHVybiBuZXcgRmx1eFRhYmxlQ29sdW1uSW1wbCgpXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZsdXggdGFibGUgY29sdW1uIGZyb20gYSBwYXJ0aWFsIEZsdXhUYWJsZUNvbHVtbi5cbiAqIEBwYXJhbSBvYmplY3QgLSBzb3VyY2Ugb2JqZWN0XG4gKiBAcmV0dXJucyBjb2x1bW4gaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZsdXhUYWJsZUNvbHVtbihcbiAgb2JqZWN0OiBQYXJ0aWFsPEZsdXhUYWJsZUNvbHVtbj5cbik6IEZsdXhUYWJsZUNvbHVtbiB7XG4gIGNvbnN0IHJldFZhbCA9IG5ldyBGbHV4VGFibGVDb2x1bW5JbXBsKClcbiAgcmV0VmFsLmxhYmVsID0gU3RyaW5nKG9iamVjdC5sYWJlbClcbiAgcmV0VmFsLmRhdGFUeXBlID0gb2JqZWN0LmRhdGFUeXBlIGFzIENvbHVtblR5cGVcbiAgcmV0VmFsLmdyb3VwID0gQm9vbGVhbihvYmplY3QuZ3JvdXApXG4gIHJldFZhbC5kZWZhdWx0VmFsdWUgPSBvYmplY3QuZGVmYXVsdFZhbHVlID8/ICcnXG4gIHJldFZhbC5pbmRleCA9IG9iamVjdC5pbmRleCA/PyAwXG4gIHJldHVybiByZXRWYWxcbn1cbiIsIi8qKlxuICogU3RyYXRlZ3kgZm9yIGNhbGN1bGF0aW5nIHJldHJ5IGRlbGF5cy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXRyeURlbGF5U3RyYXRlZ3kge1xuICAvKipcbiAgICogUmV0dXJucyBkZWxheSBmb3IgYSBuZXh0IHJldHJ5XG4gICAqIEBwYXJhbSBlcnJvciAtIHJlYXNvbiBmb3IgcmV0cnlpbmdcbiAgICogQHBhcmFtIGZhaWxlZEF0dGVtcHRzIC0gYSBjb3VudCBvZiBhbHJlYWR5IGZhaWxlZCBhdHRlbXB0cywgMSBiZWluZyB0aGUgZmlyc3RcbiAgICogQHJldHVybnMgbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHJldHJ5aW5nXG4gICAqL1xuICBuZXh0RGVsYXkoZXJyb3I/OiBFcnJvciwgZmFpbGVkQXR0ZW1wdHM/OiBudW1iZXIpOiBudW1iZXJcbiAgLyoqIEltcGxlbWVudGF0aW9uIHNob3VsZCByZXNldCBpdHMgc3RhdGUsIHRoaXMgaXMgbWFuZGF0b3J5IHRvIGNhbGwgdXBvbiBzdWNjZXNzLiAgKi9cbiAgc3VjY2VzcygpOiB2b2lkXG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBlcnJvcnMgdG8gaW5mb3JtIHRoYXQgYW4gYXNzb2NpYXRlZCBvcGVyYXRpb24gY2FuIGJlIHJldHJpZWQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cmlhYmxlRGVjaXNpb24ge1xuICAvKipcbiAgICogSW5mb3JtcyB3aGV0aGVyIHRoaXMgY2FuIGJlIHJldHJpZWQuXG4gICAqL1xuICBjYW5SZXRyeSgpOiBib29sZWFuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlbGF5IGluIG1pbGxpc2Vjb25kcyB0byByZXRyeSB0aGUgYWN0aW9uLlxuICAgKiBAcmV0dXJucyAwIHRvIGxldCB0aGUgaW1wbGVtZW50YXRpb24gZGVjaWRlLCBtaWxpc2Vjb25kcyBkZWxheSBvdGhlcndpc2VcbiAgICovXG4gIHJldHJ5QWZ0ZXIoKTogbnVtYmVyXG59XG5cbmNvbnN0IHJldHJpYWJsZVN0YXR1c0NvZGVzID0gWzQwNCwgNDA4LCA0MjUsIDQyOSwgNTAwLCA1MDIsIDUwMywgNTA0XVxuLyoqIGlzU3RhdHVzQ29kZVJldHJpYWJsZSBjaGVja3Mgd2hldGhlciB0aGUgc3VwcGxpZWQgSFRUUCBzdGF0dXMgY29kZSBpcyByZXRyaWFibGUuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdGF0dXNDb2RlUmV0cmlhYmxlKHN0YXR1c0NvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gcmV0cmlhYmxlU3RhdHVzQ29kZXMuaW5jbHVkZXMoc3RhdHVzQ29kZSlcbn1cblxuLyoqIElsbGVnYWxBcmd1bWVudEVycm9yIGlzIHRocm93biB3aGVuIGlsbGVnYWwgYXJndW1lbnQgaXMgc3VwcGxpZWQuICovXG5leHBvcnQgY2xhc3MgSWxsZWdhbEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpXG4gICAgdGhpcy5uYW1lID0gJ0lsbGVnYWxBcmd1bWVudEVycm9yJ1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBJbGxlZ2FsQXJndW1lbnRFcnJvci5wcm90b3R5cGUpXG4gIH1cbn1cblxuLyoqXG4gKiBBIGdlbmVyYWwgSFRUUCBlcnJvci5cbiAqL1xuZXhwb3J0IGNsYXNzIEh0dHBFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgUmV0cmlhYmxlRGVjaXNpb24ge1xuICBwcml2YXRlIF9yZXRyeUFmdGVyOiBudW1iZXJcbiAgLyoqIGFwcGxpY2F0aW9uIGVycm9yIGNvZGUsIHdoZW4gYXZhaWxhYmxlICovXG4gIHB1YmxpYyBjb2RlOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgLyoqIGpzb24gZXJyb3IgcmVzcG9uc2UgKi9cbiAgcHVibGljIGpzb246IGFueVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0IGJlY2F1c2Ugb2Ygc3VwZXIoKSBub3QgYmVpbmcgY292ZXJlZCovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHJlYWRvbmx5IHN0YXR1c0NvZGU6IG51bWJlcixcbiAgICByZWFkb25seSBzdGF0dXNNZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgcmVhZG9ubHkgYm9keT86IHN0cmluZyxcbiAgICByZXRyeUFmdGVyPzogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgICByZWFkb25seSBjb250ZW50VHlwZT86IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwsXG4gICAgbWVzc2FnZT86IHN0cmluZ1xuICApIHtcbiAgICBzdXBlcigpXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEh0dHBFcnJvci5wcm90b3R5cGUpXG4gICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICB9IGVsc2UgaWYgKGJvZHkpIHtcbiAgICAgIGlmIChjb250ZW50VHlwZT8uc3RhcnRzV2l0aCgnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5qc29uID0gSlNPTi5wYXJzZShib2R5KVxuICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHRoaXMuanNvbi5tZXNzYWdlXG4gICAgICAgICAgdGhpcy5jb2RlID0gdGhpcy5qc29uLmNvZGVcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZSwgYm9keSBzdHJpbmcgaXMgc3RpbGwgYXZhaWxhYmxlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5tZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGAke3N0YXR1c0NvZGV9ICR7c3RhdHVzTWVzc2FnZX0gOiAke2JvZHl9YFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBgJHtzdGF0dXNDb2RlfSAke3N0YXR1c01lc3NhZ2V9YFxuICAgIH1cbiAgICB0aGlzLm5hbWUgPSAnSHR0cEVycm9yJ1xuICAgIHRoaXMuc2V0UmV0cnlBZnRlcihyZXRyeUFmdGVyKVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRSZXRyeUFmdGVyKHJldHJ5QWZ0ZXI/OiBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiByZXRyeUFmdGVyID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gdHJ5IHRvIHBhcnNlIHRoZSBzdXBwbGllZCBudW1iZXIgYXMgbWlsbGlzZWNvbmRzXG4gICAgICBpZiAoL15bMC05XSskLy50ZXN0KHJldHJ5QWZ0ZXIpKSB7XG4gICAgICAgIHRoaXMuX3JldHJ5QWZ0ZXIgPSBwYXJzZUludChyZXRyeUFmdGVyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcmV0cnlBZnRlciA9IDBcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmV0cnlBZnRlciA9IDBcbiAgICB9XG4gIH1cblxuICBjYW5SZXRyeSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNTdGF0dXNDb2RlUmV0cmlhYmxlKHRoaXMuc3RhdHVzQ29kZSlcbiAgfVxuICByZXRyeUFmdGVyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3JldHJ5QWZ0ZXJcbiAgfVxufVxuXG4vL3NlZSBodHRwczovL25vZGVqcy5vcmcvYXBpL2Vycm9ycy5odG1sXG5jb25zdCBSRVRSWV9DT0RFUyA9IFtcbiAgJ0VDT05OUkVTRVQnLFxuICAnRU5PVEZPVU5EJyxcbiAgJ0VTT0NLRVRUSU1FRE9VVCcsXG4gICdFVElNRURPVVQnLFxuICAnRUNPTk5SRUZVU0VEJyxcbiAgJ0VIT1NUVU5SRUFDSCcsXG4gICdFUElQRScsXG5dXG5cbi8qKlxuICogVGVzdHMgdGhlIGVycm9yIGluIG9yZGVyIHRvIGtub3cgaWYgYW4gSFRUUCBjYWxsIGNhbiBiZSByZXRyaWVkLlxuICogQHBhcmFtIGVycm9yIC0gZXJyb3IgdG8gdGVzdFxuICogQHJldHVybnMgdHJ1ZSBmb3IgYSByZXRyaWFibGUgZXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhblJldHJ5SHR0cENhbGwoZXJyb3I6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAoIWVycm9yKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH0gZWxzZSBpZiAodHlwZW9mIChlcnJvciBhcyBhbnkpLmNhblJldHJ5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuICEhKChlcnJvciBhcyBhbnkpLmNhblJldHJ5IGFzICgpID0+IGJvb2xlYW4pKClcbiAgfSBlbHNlIGlmICgoZXJyb3IgYXMgYW55KS5jb2RlICYmIFJFVFJZX0NPREVTLmluY2x1ZGVzKChlcnJvciBhcyBhbnkpLmNvZGUpKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuLyoqXG4gKiBHZXRzIHJldHJ5IGRlbGF5IGZyb20gdGhlIHN1cHBsaWVkIGVycm9yLCBwb3NzaWJseSB1c2luZyByYW5kb20gbnVtYmVyIHVwIHRvIHJldHJ5Sml0dGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmV0cnlEZWxheShlcnJvcj86IEVycm9yLCByZXRyeUppdHRlcj86IG51bWJlcik6IG51bWJlciB7XG4gIGlmICghZXJyb3IpIHtcbiAgICByZXR1cm4gMFxuICB9IGVsc2Uge1xuICAgIGxldCByZXRWYWxcbiAgICBpZiAodHlwZW9mIChlcnJvciBhcyBhbnkpLnJldHJ5QWZ0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiAoKGVycm9yIGFzIGFueSkucmV0cnlBZnRlciBhcyAoKSA9PiBudW1iZXIpKClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0VmFsID0gMFxuICAgIH1cbiAgICBpZiAocmV0cnlKaXR0ZXIgJiYgcmV0cnlKaXR0ZXIgPiAwKSB7XG4gICAgICByZXR1cm4gcmV0VmFsICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogcmV0cnlKaXR0ZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXRWYWxcbiAgICB9XG4gIH1cbn1cblxuLyoqIFJlcXVlc3RUaW1lZE91dEVycm9yIGluZGljYXRlcyByZXF1ZXN0IHRpbWVvdXQgaW4gdGhlIGNvbW11bmljYXRpb24gd2l0aCB0aGUgc2VydmVyICovXG5leHBvcnQgY2xhc3MgUmVxdWVzdFRpbWVkT3V0RXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIFJldHJpYWJsZURlY2lzaW9uIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgYmVjYXVzZSBvZiBzdXBlcigpIG5vdCBiZWluZyBjb3ZlcmVkICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKClcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgUmVxdWVzdFRpbWVkT3V0RXJyb3IucHJvdG90eXBlKVxuICAgIHRoaXMubmFtZSA9ICdSZXF1ZXN0VGltZWRPdXRFcnJvcidcbiAgICB0aGlzLm1lc3NhZ2UgPSAnUmVxdWVzdCB0aW1lZCBvdXQnXG4gIH1cbiAgY2FuUmV0cnkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICByZXRyeUFmdGVyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDBcbiAgfVxufVxuXG4vKiogQWJvcnRFcnJvciBpbmRpY2F0ZXMgdGhhdCB0aGUgY29tbXVuaWNhdGlvbiB3aXRoIHRoZSBzZXJ2ZXIgd2FzIGFib3J0ZWQgKi9cbmV4cG9ydCBjbGFzcyBBYm9ydEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBSZXRyaWFibGVEZWNpc2lvbiB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0IGJlY2F1c2Ugb2Ygc3VwZXIoKSBub3QgYmVpbmcgY292ZXJlZCAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5uYW1lID0gJ0Fib3J0RXJyb3InXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEFib3J0RXJyb3IucHJvdG90eXBlKVxuICAgIHRoaXMubWVzc2FnZSA9ICdSZXNwb25zZSBhYm9ydGVkJ1xuICB9XG4gIGNhblJldHJ5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgcmV0cnlBZnRlcigpOiBudW1iZXIge1xuICAgIHJldHVybiAwXG4gIH1cbn1cbiIsImltcG9ydCB7Rmx1eFRhYmxlQ29sdW1uLCBDb2x1bW5UeXBlfSBmcm9tICcuL0ZsdXhUYWJsZUNvbHVtbidcbmltcG9ydCB7SWxsZWdhbEFyZ3VtZW50RXJyb3J9IGZyb20gJy4uL2Vycm9ycydcblxuY29uc3QgaWRlbnRpdHkgPSAoeDogc3RyaW5nKTogYW55ID0+IHhcbi8qKlxuICogQSBkaWN0aW9uYXJ5IG9mIHNlcmlhbGl6ZXJzIG9mIHBhcnRpY3VsYXIgdHlwZXMgcmV0dXJuZWQgYnkgYSBmbHV4IHF1ZXJ5LlxuICogU2VlIHtAbGluayBodHRwczovL3YyLmRvY3MuaW5mbHV4ZGF0YS5jb20vdjIuMC9yZWZlcmVuY2Uvc3ludGF4L2Fubm90YXRlZC1jc3YvI3ZhbGlkLWRhdGEtdHlwZXMgfVxuICovXG5leHBvcnQgY29uc3QgdHlwZVNlcmlhbGl6ZXJzOiBSZWNvcmQ8Q29sdW1uVHlwZSwgKHZhbDogc3RyaW5nKSA9PiBhbnk+ID0ge1xuICBib29sZWFuOiAoeDogc3RyaW5nKTogYW55ID0+IHggPT09ICd0cnVlJyxcbiAgdW5zaWduZWRMb25nOiAoeDogc3RyaW5nKTogYW55ID0+ICh4ID09PSAnJyA/IG51bGwgOiAreCksXG4gIGxvbmc6ICh4OiBzdHJpbmcpOiBhbnkgPT4gKHggPT09ICcnID8gbnVsbCA6ICt4KSxcbiAgZG91YmxlOiAoeDogc3RyaW5nKTogYW55ID0+ICh4ID09PSAnJyA/IG51bGwgOiAreCksXG4gIHN0cmluZzogaWRlbnRpdHksXG4gIGJhc2U2NEJpbmFyeTogaWRlbnRpdHksXG4gIGR1cmF0aW9uOiAoeDogc3RyaW5nKTogYW55ID0+ICh4ID09PSAnJyA/IG51bGwgOiB4KSxcbiAgJ2RhdGVUaW1lOlJGQzMzMzknOiAoeDogc3RyaW5nKTogYW55ID0+ICh4ID09PSAnJyA/IG51bGwgOiB4KSxcbn1cblxuLyoqXG4gKiBzZXJpYWxpemVEYXRlVGltZUFzRGF0ZSBjaGFuZ2VzIHR5cGUgc2VyaWFsaXplcnMgdG8gcmV0dXJuIEphdmFTY3JpcHQgRGF0ZSBpbnN0YW5jZXNcbiAqIGZvciAnZGF0ZVRpbWU6UkZDMzMzOScgcXVlcnkgcmVzdWx0IGRhdGEgdHlwZS4gRW1wdHkgdmFsdWUgaXMgY29udmVydGVkIHRvIG51bGwuXG4gKiBAcmVtYXJrc1xuICogUGxlYXNlIG5vdGUgdGhhdCB0aGUgcmVzdWx0IGhhcyBtaWxsaXNlY29uZCBwcmVjaXNpb24gd2hlcmVhcyBJbmZsdXhEQiByZXR1cm5zIGRhdGVUaW1lXG4gKiBpbiBuYW5vc2Vjb25kIHByZWNpc2lvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZURhdGVUaW1lQXNEYXRlKCk6IHZvaWQge1xuICB0eXBlU2VyaWFsaXplcnNbJ2RhdGVUaW1lOlJGQzMzMzknXSA9ICh4OiBzdHJpbmcpOiBhbnkgPT5cbiAgICB4ID09PSAnJyA/IG51bGwgOiBuZXcgRGF0ZShEYXRlLnBhcnNlKHgpKVxufVxuLyoqXG4gKiBzZXJpYWxpemVEYXRlVGltZUFzTnVtYmVyIGNoYW5nZXMgdHlwZSBzZXJpYWxpemVycyB0byByZXR1cm4gbWlsbGlzZWNvbmRzIHNpbmNlIGVwb2NoXG4gKiBmb3IgJ2RhdGVUaW1lOlJGQzMzMzknIHF1ZXJ5IHJlc3VsdCBkYXRhIHR5cGUuIEVtcHR5IHZhbHVlIGlzIGNvbnZlcnRlZCB0byBudWxsLlxuICogQHJlbWFya3NcbiAqIFBsZWFzZSBub3RlIHRoYXQgdGhlIHJlc3VsdCBoYXMgbWlsbGlzZWNvbmQgcHJlY2lzaW9uIHdoZXJlYXMgSW5mbHV4REIgcmV0dXJucyBkYXRlVGltZVxuICogaW4gbmFub3NlY29uZCBwcmVjaXNpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVEYXRlVGltZUFzTnVtYmVyKCk6IHZvaWQge1xuICB0eXBlU2VyaWFsaXplcnNbJ2RhdGVUaW1lOlJGQzMzMzknXSA9ICh4OiBzdHJpbmcpOiBhbnkgPT5cbiAgICB4ID09PSAnJyA/IG51bGwgOiBEYXRlLnBhcnNlKHgpXG59XG4vKipcbiAqIHNlcmlhbGl6ZURhdGVUaW1lQXNTdHJpbmcgY2hhbmdlcyB0eXBlIHNlcmlhbGl6ZXJzIHRvIHJldHVybiBzdHJpbmcgdmFsdWVzXG4gKiBmb3IgYGRhdGVUaW1lOlJGQzMzMzlgIHF1ZXJ5IHJlc3VsdCBkYXRhIHR5cGUuICBFbXB0eSB2YWx1ZSBpcyBjb252ZXJ0ZWQgdG8gbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZURhdGVUaW1lQXNTdHJpbmcoKTogdm9pZCB7XG4gIHR5cGVTZXJpYWxpemVyc1snZGF0ZVRpbWU6UkZDMzMzOSddID0gKHg6IHN0cmluZyk6IGFueSA9PlxuICAgIHggPT09ICcnID8gbnVsbCA6IHhcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIG1ldGFkYXRhIG9mIGEge0BsaW5rIGh0dHA6Ly9iaXQubHkvZmx1eC1zcGVjI3RhYmxlIHwgZmx1eCB0YWJsZX0uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmx1eFRhYmxlTWV0YURhdGEge1xuICAvKipcbiAgICogVGFibGUgY29sdW1ucy5cbiAgICovXG4gIGNvbHVtbnM6IEFycmF5PEZsdXhUYWJsZUNvbHVtbj5cblxuICAvKipcbiAgICogR2V0cyBjb2x1bW5zIGJ5IG5hbWVcbiAgICogQHBhcmFtIGxhYmVsIC0gY29sdW1uIGxhYmVsXG4gICAqIEByZXR1cm5zIHRhYmxlIGNvbHVtblxuICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEVycm9yIGlmIGNvbHVtbiBpcyBub3QgZm91bmRcbiAgICoqL1xuICBjb2x1bW4obGFiZWw6IHN0cmluZyk6IEZsdXhUYWJsZUNvbHVtblxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9iamVjdCBvdXQgb2YgdGhlIHN1cHBsaWVkIHZhbHVlcyB3aXRoIHRoZSBoZWxwIG9mIGNvbHVtbnMgLlxuICAgKiBAcGFyYW0gdmFsdWVzIC0gYSByb3cgd2l0aCBkYXRhIGZvciBlYWNoIGNvbHVtblxuICAgKi9cbiAgdG9PYmplY3QodmFsdWVzOiBzdHJpbmdbXSk6IHtba2V5OiBzdHJpbmddOiBhbnl9XG59XG5cbi8qKlxuICogRmx1eFRhYmxlTWV0YURhdGEgSW1wbGVtZW50YXRpb24uXG4gKi9cbmNsYXNzIEZsdXhUYWJsZU1ldGFEYXRhSW1wbCBpbXBsZW1lbnRzIEZsdXhUYWJsZU1ldGFEYXRhIHtcbiAgY29sdW1uczogQXJyYXk8Rmx1eFRhYmxlQ29sdW1uPlxuICBjb25zdHJ1Y3Rvcihjb2x1bW5zOiBGbHV4VGFibGVDb2x1bW5bXSkge1xuICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sLCBpKSA9PiAoY29sLmluZGV4ID0gaSkpXG4gICAgdGhpcy5jb2x1bW5zID0gY29sdW1uc1xuICB9XG4gIGNvbHVtbihsYWJlbDogc3RyaW5nKTogRmx1eFRhYmxlQ29sdW1uIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY29sID0gdGhpcy5jb2x1bW5zW2ldXG4gICAgICBpZiAoY29sLmxhYmVsID09PSBsYWJlbCkgcmV0dXJuIGNvbFxuICAgIH1cbiAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXJyb3IoYENvbHVtbiAke2xhYmVsfSBub3QgZm91bmQhYClcbiAgfVxuICB0b09iamVjdCh2YWx1ZXM6IHN0cmluZ1tdKToge1trZXk6IHN0cmluZ106IGFueX0ge1xuICAgIGNvbnN0IGFjYzogYW55ID0ge31cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGggJiYgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHZhbCA9IHZhbHVlc1tpXVxuICAgICAgY29uc3QgY29sdW1uID0gdGhpcy5jb2x1bW5zW2ldXG4gICAgICBpZiAodmFsID09PSAnJyAmJiBjb2x1bW4uZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHZhbCA9IGNvbHVtbi5kZWZhdWx0VmFsdWVcbiAgICAgIH1cbiAgICAgIGFjY1tjb2x1bW4ubGFiZWxdID0gKHR5cGVTZXJpYWxpemVyc1tjb2x1bW4uZGF0YVR5cGVdID8/IGlkZW50aXR5KSh2YWwpXG4gICAgfVxuICAgIHJldHVybiBhY2NcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZWQgRmx1eFRhYmxlTWV0YURhdGEgZnJvbSB0aGUgY29sdW1ucyBzdXBwbGllZC5cbiAqIEBwYXJhbSBjb2x1bW5zIC0gIGNvbHVtbnNcbiAqIEByZXR1cm5zIC0gaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZsdXhUYWJsZU1ldGFEYXRhKFxuICBjb2x1bW5zOiBGbHV4VGFibGVDb2x1bW5bXVxuKTogRmx1eFRhYmxlTWV0YURhdGEge1xuICByZXR1cm4gbmV3IEZsdXhUYWJsZU1ldGFEYXRhSW1wbChjb2x1bW5zKVxufVxuIiwiaW1wb3J0IHtDb21tdW5pY2F0aW9uT2JzZXJ2ZXJ9IGZyb20gJy4vQ29tbXVuaWNhdGlvbk9ic2VydmVyJ1xuaW1wb3J0IHtDYW5jZWxsYWJsZX0gZnJvbSAnLi9DYW5jZWxsYWJsZSdcbmltcG9ydCB7TGluZVNwbGl0dGVyfSBmcm9tICcuL0xpbmVTcGxpdHRlcidcbmltcG9ydCB7Rmx1eFJlc3VsdE9ic2VydmVyfSBmcm9tICcuL0ZsdXhSZXN1bHRPYnNlcnZlcidcbmltcG9ydCB7XG4gIEZsdXhUYWJsZUNvbHVtbixcbiAgQ29sdW1uVHlwZSxcbiAgbmV3Rmx1eFRhYmxlQ29sdW1uLFxufSBmcm9tICcuL0ZsdXhUYWJsZUNvbHVtbidcbmltcG9ydCB7Rmx1eFRhYmxlTWV0YURhdGEsIGNyZWF0ZUZsdXhUYWJsZU1ldGFEYXRhfSBmcm9tICcuL0ZsdXhUYWJsZU1ldGFEYXRhJ1xuXG4vKipcbiAqIGxpbmVzVG9UYWJsZXMgY3JlYXRlcyBhIHRyYW5zZm9ybWF0aW9udGhhdCBhY2NlcHRzIChmbHV4KSBhbm5vdGF0ZWQgQ1NWIGxpbmVzXG4gKiBhbmQgZW1pdHMgcm93cyB0b2dldGhlciB3aXRoIHRhYmxlIG1ldGFkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZXNUb1RhYmxlcyhcbiAgY29uc3VtZXI6IEZsdXhSZXN1bHRPYnNlcnZlcjxzdHJpbmdbXT5cbik6IENvbW11bmljYXRpb25PYnNlcnZlcjxzdHJpbmc+IHtcbiAgY29uc3Qgc3BsaXR0ZXIgPSBuZXcgTGluZVNwbGl0dGVyKCkud2l0aFJldXNlKClcbiAgbGV0IGNvbHVtbnM6IEZsdXhUYWJsZUNvbHVtbltdIHwgdW5kZWZpbmVkXG4gIGxldCBleHBlY3RNZXRhID0gdHJ1ZVxuICBsZXQgZmlyc3RDb2x1bW5JbmRleCA9IDBcbiAgbGV0IGxhc3RNZXRhOiBGbHV4VGFibGVNZXRhRGF0YVxuICByZXR1cm4ge1xuICAgIGVycm9yKGVycm9yOiBFcnJvcik6IHZvaWQge1xuICAgICAgY29uc3VtZXIuZXJyb3IoZXJyb3IpXG4gICAgfSxcbiAgICBuZXh0KGxpbmU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgaWYgKGxpbmUgPT09ICcnKSB7XG4gICAgICAgIGV4cGVjdE1ldGEgPSB0cnVlXG4gICAgICAgIGNvbHVtbnMgPSB1bmRlZmluZWRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHNwbGl0dGVyLnNwbGl0TGluZShsaW5lKVxuICAgICAgICBjb25zdCBzaXplID0gc3BsaXR0ZXIubGFzdFNwbGl0TGVuZ3RoXG4gICAgICAgIGlmIChleHBlY3RNZXRhKSB7XG4gICAgICAgICAgLy8gY3JlYXRlIGNvbHVtbnNcbiAgICAgICAgICBpZiAoIWNvbHVtbnMpIHtcbiAgICAgICAgICAgIGNvbHVtbnMgPSBuZXcgQXJyYXkoc2l6ZSlcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgIGNvbHVtbnNbaV0gPSBuZXdGbHV4VGFibGVDb2x1bW4oKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXZhbHVlc1swXS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgIC8vIGZpbGwgaW4gY29sdW1uIG5hbWVzXG4gICAgICAgICAgICBpZiAodmFsdWVzWzBdID09PSAnJykge1xuICAgICAgICAgICAgICBmaXJzdENvbHVtbkluZGV4ID0gMVxuICAgICAgICAgICAgICBjb2x1bW5zID0gY29sdW1ucy5zbGljZSgxKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZmlyc3RDb2x1bW5JbmRleCA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmaXJzdENvbHVtbkluZGV4OyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgIGNvbHVtbnNbaSAtIGZpcnN0Q29sdW1uSW5kZXhdLmxhYmVsID0gdmFsdWVzW2ldXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0TWV0YSA9IGNyZWF0ZUZsdXhUYWJsZU1ldGFEYXRhKGNvbHVtbnMpXG4gICAgICAgICAgICBleHBlY3RNZXRhID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlc1swXSA9PT0gJyNkYXRhdHlwZScpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgIGNvbHVtbnNbaV0uZGF0YVR5cGUgPSB2YWx1ZXNbaV0gYXMgQ29sdW1uVHlwZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVzWzBdID09PSAnI2RlZmF1bHQnKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgICBjb2x1bW5zW2ldLmRlZmF1bHRWYWx1ZSA9IHZhbHVlc1tpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVzWzBdID09PSAnI2dyb3VwJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgY29sdW1uc1tpXS5ncm91cCA9IHZhbHVlc1tpXVswXSA9PT0gJ3QnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN1bWVyLm5leHQodmFsdWVzLnNsaWNlKGZpcnN0Q29sdW1uSW5kZXgsIHNpemUpLCBsYXN0TWV0YSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY29tcGxldGUoKTogdm9pZCB7XG4gICAgICBjb25zdW1lci5jb21wbGV0ZSgpXG4gICAgfSxcbiAgICB1c2VDYW5jZWxsYWJsZShjYW5jZWxsYWJsZTogQ2FuY2VsbGFibGUpOiB2b2lkIHtcbiAgICAgIGlmIChjb25zdW1lci51c2VDYW5jZWxsYWJsZSkgY29uc3VtZXIudXNlQ2FuY2VsbGFibGUoY2FuY2VsbGFibGUpXG4gICAgfSxcbiAgfVxufVxuIiwiaW1wb3J0IHtUcmFuc3BvcnR9IGZyb20gJy4vdHJhbnNwb3J0J1xuaW1wb3J0IFdyaXRlQXBpIGZyb20gJy4vV3JpdGVBcGknXG5cbi8qKlxuICogT3B0aW9uIGZvciB0aGUgY29tbXVuaWNhdGlvbiB3aXRoIEluZmx1eERCIHNlcnZlci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0aW9uT3B0aW9ucyB7XG4gIC8qKiBiYXNlIFVSTCAqL1xuICB1cmw6IHN0cmluZ1xuICAvKiogYXV0aGVudGljYXRpb24gdG9rZW4gKi9cbiAgdG9rZW4/OiBzdHJpbmdcbiAgLyoqIHNvY2tldCB0aW1lb3V0ICovXG4gIHRpbWVvdXQ/OiBudW1iZXJcbiAgLyoqIGV4dHJhIG9wdGlvbnMgZm9yIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZXkgY2FuIHNldHVwIGEgcHJveHkgYWdlbnQgb3IgYW4gYWJvcnQgc2lnbmFsIGluIG5vZGUuanMgdHJhbnNwb3J0IHRoYXQgcmVsaWVzIHVwb24ge0BsaW5rIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfaHR0cF9yZXF1ZXN0X3VybF9vcHRpb25zX2NhbGxiYWNrIH0gKi9cbiAgdHJhbnNwb3J0T3B0aW9ucz86IHtba2V5OiBzdHJpbmddOiBhbnl9XG59XG5cbi8qKiBkZWZhdWx0IGNvbm5lY3Rpb24gb3B0aW9ucyAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ29ubmVjdGlvbk9wdGlvbnM6IFBhcnRpYWw8Q29ubmVjdGlvbk9wdGlvbnM+ID0ge1xuICB0aW1lb3V0OiAxMDAwMCxcbn1cblxuLyoqXG4gKiBPcHRpb25zIHRoYXQgY29uZmlndXJlIHN0cmF0ZWd5IGZvciByZXRyeWluZyBmYWlsZWQgcmVxdWVzdHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlEZWxheVN0cmF0ZWd5T3B0aW9ucyB7XG4gIC8qKiBpbmNsdWRlIHJhbmRvbSBtaWxsaXNlY29uZHMgd2hlbiByZXRyeWluZyBIVFRQIGNhbGxzICovXG4gIHJldHJ5Sml0dGVyOiBudW1iZXJcbiAgLyoqIG1pbmltdW0gZGVsYXkgd2hlbiByZXRyeWluZyB3cml0ZSAobWlsbGlzZWNvbmRzKSAqL1xuICBtaW5SZXRyeURlbGF5OiBudW1iZXJcbiAgLyoqIG1heGltdW0gZGVsYXkgd2hlbiByZXRyeWluZyB3cml0ZSAobWlsbGlzZWNvbmRzKSAqL1xuICBtYXhSZXRyeURlbGF5OiBudW1iZXJcbiAgLyoqIGJhc2UgZm9yIHRoZSBleHBvbmVudGlhbCByZXRyeSBkZWxheSwgdGhlIG5leHQgZGVsYXkgaXMgY29tcHV0ZWQgYXMgYG1pblJldHJ5RGVsYXkgKiBleHBvbmVudGlhbEJhc2VeKGF0dGVtcHRzLTEpICsgcmFuZG9tKHJldHJ5Sml0dGVyKWAgKi9cbiAgZXhwb25lbnRpYWxCYXNlOiBudW1iZXJcbn1cblxuLyoqXG4gKiBPcHRpb25zIHRoYXQgY29uZmlndXJlIHN0cmF0ZWd5IGZvciByZXRyeWluZyBmYWlsZWQgSW5mbHV4REIgd3JpdGUgb3BlcmF0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXcml0ZVJldHJ5T3B0aW9ucyBleHRlbmRzIFJldHJ5RGVsYXlTdHJhdGVneU9wdGlvbnMge1xuICAvKipcbiAgICogV3JpdGVGYWlsZWQgaXMgY2FsbGVkIHRvIGluZm9ybSBhYm91dCB3cml0ZSBlcnJvcnMuXG4gICAqIEBwYXJhbSB0aGlzIC0gdGhlIGluc3RhbmNlIG9mIHRoZSBBUEkgdGhhdCBmYWlsZWRcbiAgICogQHBhcmFtIGVycm9yIC0gd3JpdGUgZXJyb3JcbiAgICogQHBhcmFtIGxpbmVzIC0gZmFpbGVkIGxpbmVzXG4gICAqIEBwYXJhbSBhdHRlbXB0cyAtIGEgbnVtYmVyIG9mIGZhaWxlZCBhdHRlbXB0cyB0byB3cml0ZSB0aGUgbGluZXNcbiAgICogQHJldHVybnMgYSBQcm9taXNlIHRvIGZvcmNlIHRoZSBBUEkgdG8gdXNlIGl0IGFzIGEgcmVzdWx0IG9mIHRoZSBmbHVzaCBvcGVyYXRpb24sXG4gICAqIHZvaWQvdW5kZWZpbmVkIHRvIGNvbnRpbnVlIHdpdGggZGVmYXVsdCByZXRyeSBtZWNoYW5pc21cbiAgICovXG4gIHdyaXRlRmFpbGVkKFxuICAgIHRoaXM6IFdyaXRlQXBpLFxuICAgIGVycm9yOiBFcnJvcixcbiAgICBsaW5lczogQXJyYXk8c3RyaW5nPixcbiAgICBhdHRlbXB0czogbnVtYmVyXG4gICk6IFByb21pc2U8dm9pZD4gfCB2b2lkXG5cbiAgLyoqXG4gICAqIFdyaXRlU3VjY2VzcyBpcyBpbmZvcm1lZCBhYm91dCBzdWNjZXNzZnVsbHkgd3JpdHRlbiBsaW5lcy5cbiAgICogQHBhcmFtIHRoaXMgLSB0aGUgaW5zdGFuY2Ugb2YgdGhlIEFQSSBpbiB1c2VcbiAgICogQHBhcmFtIGxpbmVzIC0gd3JpdHRlbiBsaW5lc1xuICAgKi9cbiAgd3JpdGVTdWNjZXNzKHRoaXM6IFdyaXRlQXBpLCBsaW5lczogQXJyYXk8c3RyaW5nPik6IHZvaWRcblxuICAvKiogbWF4IG51bWJlciBvZiByZXRyaWVzIHdoZW4gd3JpdGUgZmFpbHMgKi9cbiAgbWF4UmV0cmllczogbnVtYmVyXG4gIC8qKiB0aGUgbWF4aW11bSBzaXplIG9mIHJldHJ5LWJ1ZmZlciAoaW4gbGluZXMpICovXG4gIG1heEJ1ZmZlckxpbmVzOiBudW1iZXJcbn1cblxuLyoqXG4gKiBPcHRpb25zIHVzZWQgYnkge0BsaW5rIFdyaXRlQXBpfSAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV3JpdGVPcHRpb25zIGV4dGVuZHMgV3JpdGVSZXRyeU9wdGlvbnMge1xuICAvKiogbWF4IG51bWJlciBvZiByZWNvcmRzIHRvIHNlbmQgaW4gYSBiYXRjaCAgICovXG4gIGJhdGNoU2l6ZTogbnVtYmVyXG4gIC8qKiBkZWxheSBiZXR3ZWVuIGRhdGEgZmx1c2hlcyBpbiBtaWxsaXNlY29uZHMsIGF0IG1vc3QgYGJhdGNoIHNpemVgIHJlY29yZHMgYXJlIHNlbnQgZHVyaW5nIGZsdXNoICAqL1xuICBmbHVzaEludGVydmFsOiBudW1iZXJcbiAgLyoqIGRlZmF1bHQgdGFncywgdW5lc2NhcGVkICovXG4gIGRlZmF1bHRUYWdzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICAvKiogSFRUUCBoZWFkZXJzIHRoYXQgd2lsbCBiZSBzZW50IHdpdGggZXZlcnkgd3JpdGUgcmVxdWVzdCAqL1xuICBoZWFkZXJzPzoge1trZXk6IHN0cmluZ106IHN0cmluZ31cbiAgLyoqIFdoZW4gc3BlY2lmaWVkLCB3cml0ZSBib2RpZXMgbGFyZ2VyIHRoYW4gdGhlIHRocmVzaG9sZCBhcmUgZ3ppcHBlZCAgKi9cbiAgZ3ppcFRocmVzaG9sZD86IG51bWJlclxufVxuXG4vKiogZGVmYXVsdCBSZXRyeURlbGF5U3RyYXRlZ3lPcHRpb25zICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9SZXRyeURlbGF5U3RyYXRlZ3lPcHRpb25zID0ge1xuICByZXRyeUppdHRlcjogMjAwLFxuICBtaW5SZXRyeURlbGF5OiA1MDAwLFxuICBtYXhSZXRyeURlbGF5OiAxODAwMDAsXG4gIGV4cG9uZW50aWFsQmFzZTogNSxcbn1cblxuLyoqIGRlZmF1bHQgd3JpdGVPcHRpb25zICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9Xcml0ZU9wdGlvbnM6IFdyaXRlT3B0aW9ucyA9IHtcbiAgYmF0Y2hTaXplOiAxMDAwLFxuICBmbHVzaEludGVydmFsOiA2MDAwMCxcbiAgd3JpdGVGYWlsZWQ6IGZ1bmN0aW9uKCkge30sXG4gIHdyaXRlU3VjY2VzczogZnVuY3Rpb24oKSB7fSxcbiAgbWF4UmV0cmllczogMyxcbiAgbWF4QnVmZmVyTGluZXM6IDMyXzAwMCxcbiAgLy8gYSBjb3B5IG9mIERFRkFVTFRfUmV0cnlEZWxheVN0cmF0ZWd5T3B0aW9ucywgc28gdGhhdCBERUZBVUxUX1dyaXRlT3B0aW9ucyBjb3VsZCBiZSB0cmVlLXNoYWtlblxuICByZXRyeUppdHRlcjogMjAwLFxuICBtaW5SZXRyeURlbGF5OiA1MDAwLFxuICBtYXhSZXRyeURlbGF5OiAxODAwMDAsXG4gIGV4cG9uZW50aWFsQmFzZTogNSxcbiAgZ3ppcFRocmVzaG9sZDogMTAwMCxcbn1cblxuLyoqXG4gKiBPcHRpb25zIHVzZWQgYnkge0BsaW5rIEluZmx1eERCfSAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpZW50T3B0aW9ucyBleHRlbmRzIENvbm5lY3Rpb25PcHRpb25zIHtcbiAgLyoqIHN1cHBsaWVzIGFuZCBvdmVycmlkZXMgZGVmYXVsdCB3cml0aW5nIG9wdGlvbnMgKi9cbiAgd3JpdGVPcHRpb25zPzogUGFydGlhbDxXcml0ZU9wdGlvbnM+XG4gIC8qKiBzcGVjaWZpZXMgY3VzdG9tIHRyYW5zcG9ydCAqL1xuICB0cmFuc3BvcnQ/OiBUcmFuc3BvcnRcbn1cblxuLyoqXG4gKiBUaW1lc3RhbXAgcHJlY2lzaW9uIHVzZWQgaW4gd3JpdGUgb3BlcmF0aW9ucy5cbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly92Mi5kb2NzLmluZmx1eGRhdGEuY29tL3YyLjAvYXBpLyNvcGVyYXRpb24vUG9zdFdyaXRlIH1cbiAqL1xuZXhwb3J0IHR5cGUgV3JpdGVQcmVjaXNpb25UeXBlID0gJ25zJyB8ICd1cycgfCAnbXMnIHwgJ3MnXG4iLCJmdW5jdGlvbiBjcmVhdGVFc2NhcGVyKFxuICBjaGFyYWN0ZXJzOiBzdHJpbmcsXG4gIHJlcGxhY2VtZW50czogc3RyaW5nW11cbik6ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IHJldFZhbCA9ICcnXG4gICAgbGV0IGZyb20gPSAwXG4gICAgbGV0IGkgPSAwXG4gICAgd2hpbGUgKGkgPCB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGZvdW5kID0gY2hhcmFjdGVycy5pbmRleE9mKHZhbHVlW2ldKVxuICAgICAgaWYgKGZvdW5kID49IDApIHtcbiAgICAgICAgcmV0VmFsICs9IHZhbHVlLnN1YnN0cmluZyhmcm9tLCBpKVxuICAgICAgICByZXRWYWwgKz0gcmVwbGFjZW1lbnRzW2ZvdW5kXVxuICAgICAgICBmcm9tID0gaSArIDFcbiAgICAgIH1cbiAgICAgIGkrK1xuICAgIH1cbiAgICBpZiAoZnJvbSA9PSAwKSB7XG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9IGVsc2UgaWYgKGZyb20gPCB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgIHJldFZhbCArPSB2YWx1ZS5zdWJzdHJpbmcoZnJvbSwgdmFsdWUubGVuZ3RoKVxuICAgIH1cbiAgICByZXR1cm4gcmV0VmFsXG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVF1b3RlZEVzY2FwZXIoXG4gIGNoYXJhY3RlcnM6IHN0cmluZyxcbiAgcmVwbGFjZW1lbnRzOiBzdHJpbmdbXVxuKTogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZyB7XG4gIGNvbnN0IGVzY2FwZXIgPSBjcmVhdGVFc2NhcGVyKGNoYXJhY3RlcnMsIHJlcGxhY2VtZW50cylcbiAgcmV0dXJuICh2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+ICdcIicgKyBlc2NhcGVyKHZhbHVlKSArICdcIidcbn1cblxuLyoqXG4gKiBQcm92aWRlcyBmdW5jdGlvbnMgZXNjYXBlIHNwZWNpZmljIHBhcnRzIGluIEluZmx1eERCIGxpbmUgcHJvdG9jb2wuXG4gKi9cbmV4cG9ydCBjb25zdCBlc2NhcGUgPSB7XG4gIC8qKlxuICAgKiBNZWFzdXJlbWVudCBlc2NhcGVzIG1lYXN1cmVtZW50IG5hbWVzLlxuICAgKi9cbiAgbWVhc3VyZW1lbnQ6IGNyZWF0ZUVzY2FwZXIoJywgXFxuXFxyXFx0JywgWydcXFxcLCcsICdcXFxcICcsICdcXFxcbicsICdcXFxccicsICdcXFxcdCddKSxcbiAgLyoqXG4gICAqIFF1b3RlZCBlc2NhcGVzIHF1b3RlZCB2YWx1ZXMsIHN1Y2ggYXMgZGF0YWJhc2UgbmFtZXMuXG4gICAqL1xuICBxdW90ZWQ6IGNyZWF0ZVF1b3RlZEVzY2FwZXIoJ1wiXFxcXCcsIFsnXFxcXFwiJywgJ1xcXFxcXFxcJ10pLFxuXG4gIC8qKlxuICAgKiBUYWdFc2NhcGVyIGVzY2FwZXMgdGFnIGtleXMsIHRhZyB2YWx1ZXMsIGFuZCBmaWVsZCBrZXlzLlxuICAgKi9cbiAgdGFnOiBjcmVhdGVFc2NhcGVyKCcsID1cXG5cXHJcXHQnLCBbJ1xcXFwsJywgJ1xcXFwgJywgJ1xcXFw9JywgJ1xcXFxuJywgJ1xcXFxyJywgJ1xcXFx0J10pLFxufVxuIiwiZGVjbGFyZSBsZXQgcHJvY2VzczogYW55XG5jb25zdCB6ZXJvUGFkZGluZyA9ICcwMDAwMDAwMDAnXG5sZXQgdXNlSHJUaW1lID0gZmFsc2VcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVByb2Nlc3NIcnRpbWUodXNlOiBib29sZWFuKTogYm9vbGVhbiB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmICghcHJvY2Vzcy5lbnYuUk9MTFVQX0JST1dTRVIpIHtcbiAgICByZXR1cm4gKHVzZUhyVGltZSA9IHVzZSAmJiBwcm9jZXNzICYmIHR5cGVvZiBwcm9jZXNzLmhydGltZSA9PT0gJ2Z1bmN0aW9uJylcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxudXNlUHJvY2Vzc0hydGltZSh0cnVlKSAvLyBwcmVmZmVyIG5vZGVcblxubGV0IHN0YXJ0SHJNaWxsaXM6IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxubGV0IHN0YXJ0SHJUaW1lOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXG5sZXQgbGFzdE1pbGxpcyA9IERhdGUubm93KClcbmxldCBzdGVwc0luTWlsbGlzID0gMFxuZnVuY3Rpb24gbmFub3MoKTogc3RyaW5nIHtcbiAgaWYgKCFwcm9jZXNzLmVudi5ST0xMVVBfQlJPV1NFUiAmJiB1c2VIclRpbWUpIHtcbiAgICBjb25zdCBoclRpbWUgPSBwcm9jZXNzLmhydGltZSgpIGFzIFtudW1iZXIsIG51bWJlcl1cbiAgICBsZXQgbWlsbGlzID0gRGF0ZS5ub3coKVxuICAgIGlmICghc3RhcnRIclRpbWUpIHtcbiAgICAgIHN0YXJ0SHJUaW1lID0gaHJUaW1lXG4gICAgICBzdGFydEhyTWlsbGlzID0gbWlsbGlzXG4gICAgfSBlbHNlIHtcbiAgICAgIGhyVGltZVswXSA9IGhyVGltZVswXSAtIHN0YXJ0SHJUaW1lWzBdXG4gICAgICBoclRpbWVbMV0gPSBoclRpbWVbMV0gLSBzdGFydEhyVGltZVsxXVxuICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHQgXCJjYW5ub3QgbW9jayBzeXN0ZW0gY2xvY2ssIG1hbnVhbGx5IHJldmlld2VkXCJcbiAgICAgIGlmIChoclRpbWVbMV0gPCAwKSB7XG4gICAgICAgIGhyVGltZVswXSAtPSAxXG4gICAgICAgIGhyVGltZVsxXSArPSAxMDAwXzAwMF8wMDBcbiAgICAgIH1cbiAgICAgIG1pbGxpcyA9XG4gICAgICAgIChzdGFydEhyTWlsbGlzIGFzIG51bWJlcikgK1xuICAgICAgICBoclRpbWVbMF0gKiAxMDAwICtcbiAgICAgICAgTWF0aC5mbG9vcihoclRpbWVbMV0gLyAxMDAwXzAwMClcbiAgICB9XG4gICAgY29uc3QgbmFub3MgPSBTdHJpbmcoaHJUaW1lWzFdICUgMTAwMF8wMDApXG4gICAgcmV0dXJuIFN0cmluZyhtaWxsaXMpICsgemVyb1BhZGRpbmcuc3Vic3RyKDAsIDYgLSBuYW5vcy5sZW5ndGgpICsgbmFub3NcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBtaWxsaXMgPSBEYXRlLm5vdygpXG4gICAgaWYgKG1pbGxpcyAhPT0gbGFzdE1pbGxpcykge1xuICAgICAgbGFzdE1pbGxpcyA9IG1pbGxpc1xuICAgICAgc3RlcHNJbk1pbGxpcyA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgc3RlcHNJbk1pbGxpcysrXG4gICAgfVxuICAgIGNvbnN0IG5hbm9zID0gU3RyaW5nKHN0ZXBzSW5NaWxsaXMpXG4gICAgcmV0dXJuIFN0cmluZyhtaWxsaXMpICsgemVyb1BhZGRpbmcuc3Vic3RyKDAsIDYgLSBuYW5vcy5sZW5ndGgpICsgbmFub3NcbiAgfVxufVxuXG5mdW5jdGlvbiBtaWNyb3MoKTogc3RyaW5nIHtcbiAgaWYgKCFwcm9jZXNzLmVudi5ST0xMVVBfQlJPV1NFUiAmJiB1c2VIclRpbWUpIHtcbiAgICBjb25zdCBoclRpbWUgPSBwcm9jZXNzLmhydGltZSgpIGFzIFtudW1iZXIsIG51bWJlcl1cbiAgICBjb25zdCBtaWNyb3MgPSBTdHJpbmcoTWF0aC50cnVuYyhoclRpbWVbMV0gLyAxMDAwKSAlIDEwMDApXG4gICAgcmV0dXJuIChcbiAgICAgIFN0cmluZyhEYXRlLm5vdygpKSArIHplcm9QYWRkaW5nLnN1YnN0cigwLCAzIC0gbWljcm9zLmxlbmd0aCkgKyBtaWNyb3NcbiAgICApXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFN0cmluZyhEYXRlLm5vdygpKSArIHplcm9QYWRkaW5nLnN1YnN0cigwLCAzKVxuICB9XG59XG5mdW5jdGlvbiBtaWxsaXMoKTogc3RyaW5nIHtcbiAgcmV0dXJuIFN0cmluZyhEYXRlLm5vdygpKVxufVxuZnVuY3Rpb24gc2Vjb25kcygpOiBzdHJpbmcge1xuICByZXR1cm4gU3RyaW5nKE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApKVxufVxuXG4vKipcbiAqIEV4cG9zZXMgZnVuY3Rpb25zIHRoYXQgY3JlYXRlcyBzdHJpbmdzIHRoYXQgcmVwcmVzZW50IGEgdGltZXN0YW1wIHRoYXRcbiAqIGNhbiBiZSB1c2VkIGluIHRoZSBsaW5lIHByb3RvY29sLiBNaWNybyBhbmQgbmFubyB0aW1lc3RhbXBzIGFyZSBlbXVsYXRlZFxuICogZGVwZW5kaW5nIG9uIHRoZSBqcyBwbGF0Zm9ybSBpbiB1c2UuXG4gKi9cbmV4cG9ydCBjb25zdCBjdXJyZW50VGltZSA9IHtcbiAgczogc2Vjb25kcyBhcyAoKSA9PiBzdHJpbmcsXG4gIG1zOiBtaWxsaXMgYXMgKCkgPT4gc3RyaW5nLFxuICB1czogbWljcm9zIGFzICgpID0+IHN0cmluZyxcbiAgbnM6IG5hbm9zIGFzICgpID0+IHN0cmluZyxcbiAgc2Vjb25kczogc2Vjb25kcyBhcyAoKSA9PiBzdHJpbmcsXG4gIG1pbGxpczogbWlsbGlzIGFzICgpID0+IHN0cmluZyxcbiAgbWljcm9zOiBtaWNyb3MgYXMgKCkgPT4gc3RyaW5nLFxuICBuYW5vczogbmFub3MgYXMgKCkgPT4gc3RyaW5nLFxufVxuXG4vKipcbiAqIGRhdGVUb1Byb3RvY29sVGltZXN0YW1wIHByb3ZpZGVzIGNvbnZlcnRlcnMgZm9yIEphdmFTY3JpcHQgRGF0ZSB0byBJbmZsdXhEQiBXcml0ZSBQcm90b2NvbCBUaW1lc3RhbXAuIEtleXMgYXJlIHN1cHBvcnRlZCBwcmVjaXNpb25zLlxuICovXG5leHBvcnQgY29uc3QgZGF0ZVRvUHJvdG9jb2xUaW1lc3RhbXAgPSB7XG4gIHM6IChkOiBEYXRlKTogc3RyaW5nID0+IGAke01hdGguZmxvb3IoZC5nZXRUaW1lKCkgLyAxMDAwKX1gLFxuICBtczogKGQ6IERhdGUpOiBzdHJpbmcgPT4gYCR7ZC5nZXRUaW1lKCl9YCxcbiAgdXM6IChkOiBEYXRlKTogc3RyaW5nID0+IGAke2QuZ2V0VGltZSgpfTAwMGAsXG4gIG5zOiAoZDogRGF0ZSk6IHN0cmluZyA9PiBgJHtkLmdldFRpbWUoKX0wMDAwMDBgLFxufVxuIiwiLyoqXG4gKiBMb2dnaW5nIGludGVyZmFjZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2dnZXIge1xuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycj86IGFueSk6IHZvaWRcbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIGVycj86IGFueSk6IHZvaWRcbn1cblxuLyoqXG4gKiBMb2dnZXIgdGhhdCBsb2dzIHRvIGNvbnNvbGUub3V0XG4gKi9cbmV4cG9ydCBjb25zdCBjb25zb2xlTG9nZ2VyOiBMb2dnZXIgPSB7XG4gIGVycm9yKG1lc3NhZ2UsIGVycm9yKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmVycm9yKCdFUlJPUjogJyArIG1lc3NhZ2UsIGVycm9yID8gZXJyb3IgOiAnJylcbiAgfSxcbiAgd2FybihtZXNzYWdlLCBlcnJvcikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS53YXJuKCdXQVJOOiAnICsgbWVzc2FnZSwgZXJyb3IgPyBlcnJvciA6ICcnKVxuICB9LFxufVxubGV0IHByb3ZpZGVyOiBMb2dnZXIgPSBjb25zb2xlTG9nZ2VyXG5cbmV4cG9ydCBjb25zdCBMb2dnZXI6IExvZ2dlciA9IHtcbiAgZXJyb3IobWVzc2FnZSwgZXJyb3IpIHtcbiAgICBwcm92aWRlci5lcnJvcihtZXNzYWdlLCBlcnJvcilcbiAgfSxcbiAgd2FybihtZXNzYWdlLCBlcnJvcikge1xuICAgIHByb3ZpZGVyLndhcm4obWVzc2FnZSwgZXJyb3IpXG4gIH0sXG59XG5cbi8qKlxuICogU2V0cyBjdXN0b20gbG9nZ2VyLlxuICogQHBhcmFtIGxvZ2dlciAtIGxvZ2dlciB0byB1c2VcbiAqIEByZXR1cm5zIHByZXZpb3VzIGxvZ2dlclxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9nZ2VyKGxvZ2dlcjogTG9nZ2VyKTogTG9nZ2VyIHtcbiAgY29uc3QgcHJldmlvdXMgPSBwcm92aWRlclxuICBwcm92aWRlciA9IGxvZ2dlclxuICByZXR1cm4gcHJldmlvdXNcbn1cbiIsIi8qKiBQcm9wZXJ0eSB0aGF0IG9mZmVycyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBmbHV4LXNhbml0aXplZCB2YWx1ZSBvZiBhbiBvYmplY3QuICAqL1xuZXhwb3J0IGNvbnN0IEZMVVhfVkFMVUUgPSBTeW1ib2woJ0ZMVVhfVkFMVUUnKVxuXG4vKipcbiAqIEEgZmx1eCBwYXJhbWV0ZXIgY2FuIHByaW50IGl0cyAoc2FuaXRpemVkKSBmbHV4IHZhbHVlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZsdXhQYXJhbWV0ZXJMaWtlIHtcbiAgW0ZMVVhfVkFMVUVdKCk6IHN0cmluZ1xufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBwYXJhbWV0ZXJpemVkIHF1ZXJ5LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcmFtZXRlcml6ZWRRdWVyeSB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIGZsdXggcXVlcnkgd2l0aCBzYW5pdGl6ZWQgcGFyYW1ldGVycy5cbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZ1xufVxuXG5jbGFzcyBGbHV4UGFyYW1ldGVyIGltcGxlbWVudHMgRmx1eFBhcmFtZXRlckxpa2UsIFBhcmFtZXRlcml6ZWRRdWVyeSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZmx1eFZhbHVlOiBzdHJpbmcpIHt9XG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZmx1eFZhbHVlXG4gIH1cbiAgW0ZMVVhfVkFMVUVdKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZmx1eFZhbHVlXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHN1cHBsaWVkIG9iamVjdCBpcyBGbHV4UGFyYW1ldGVyTGlrZVxuICogQHBhcmFtIHZhbHVlIC0gYW55IHZhbHVlXG4gKiBAcmV0dXJucyB0cnVlIGlmIGl0IGlzXG4gKi9cbmZ1bmN0aW9uIGlzRmx1eFBhcmFtZXRlckxpa2UodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWVbRkxVWF9WQUxVRV0gPT09ICdmdW5jdGlvbidcbn1cblxuLyoqXG4gKiBFc2NhcGVzIGNvbnRlbnQgb2YgdGhlIHN1cHBsaWVkIHN0cmluZyBzbyBpdCBjYW4gYmUgd3JhcHBlZCBpbnRvIGRvdWJsZSBxb3V0ZXNcbiAqIHRvIGJlY29tZSBhIFtmbHV4IHN0cmluZyBsaXRlcmFsXShodHRwczovL2RvY3MuaW5mbHV4ZGF0YS5jb20vZmx1eC92MC42NS9sYW5ndWFnZS9sZXhpY2FsLWVsZW1lbnRzLyNzdHJpbmctbGl0ZXJhbHMpLlxuICogQHBhcmFtIHZhbHVlIC0gc3RyaW5nIHZhbHVlXG4gKiBAcmV0dXJucyBzYW5pdGl6ZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIHNhbml0aXplU3RyaW5nKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnXG4gIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKVxuICBsZXQgcmV0VmFsOiBhbnkgPSB1bmRlZmluZWRcbiAgbGV0IGkgPSAwXG4gIGZ1bmN0aW9uIHByZXBhcmVSZXRWYWwoKTogdm9pZCB7XG4gICAgaWYgKHJldFZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXRWYWwgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgaSlcbiAgICB9XG4gIH1cbiAgZm9yICg7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGMgPSB2YWx1ZS5jaGFyQXQoaSlcbiAgICBzd2l0Y2ggKGMpIHtcbiAgICAgIGNhc2UgJ1xccic6XG4gICAgICAgIHByZXBhcmVSZXRWYWwoKVxuICAgICAgICByZXRWYWwgKz0gJ1xcXFxyJ1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnXFxuJzpcbiAgICAgICAgcHJlcGFyZVJldFZhbCgpXG4gICAgICAgIHJldFZhbCArPSAnXFxcXG4nXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdcXHQnOlxuICAgICAgICBwcmVwYXJlUmV0VmFsKClcbiAgICAgICAgcmV0VmFsICs9ICdcXFxcdCdcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ1wiJzpcbiAgICAgIGNhc2UgJ1xcXFwnOlxuICAgICAgICBwcmVwYXJlUmV0VmFsKClcbiAgICAgICAgcmV0VmFsID0gcmV0VmFsICsgJ1xcXFwnICsgY1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnJCc6XG4gICAgICAgIC8vIGVzY2FwZSAke1xuICAgICAgICBpZiAoaSArIDEgPCB2YWx1ZS5sZW5ndGggJiYgdmFsdWUuY2hhckF0KGkgKyAxKSA9PT0gJ3snKSB7XG4gICAgICAgICAgcHJlcGFyZVJldFZhbCgpXG4gICAgICAgICAgaSsrXG4gICAgICAgICAgcmV0VmFsICs9ICdcXFxcJHsnXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICAvLyBhcHBlbmQgJFxuICAgICAgICBpZiAocmV0VmFsICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldFZhbCArPSBjXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChyZXRWYWwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0VmFsICs9IGNcbiAgICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAocmV0VmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gcmV0VmFsXG4gIH1cbiAgcmV0dXJuIHZhbHVlXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZsdXggc3RyaW5nIGxpdGVyYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmbHV4U3RyaW5nKHZhbHVlOiBhbnkpOiBGbHV4UGFyYW1ldGVyTGlrZSB7XG4gIHJldHVybiBuZXcgRmx1eFBhcmFtZXRlcihgXCIke3Nhbml0aXplU3RyaW5nKHZhbHVlKX1cImApXG59XG5cbi8qKlxuICogU2FuaXRpemVzIGZsb2F0IHZhbHVlIHRvIGF2b2lkIGluamVjdGlvbnMuXG4gKiBAcGFyYW0gdmFsdWUgLSBJbmZsdXhEQiBmbG9hdCBsaXRlcmFsXG4gKiBAcmV0dXJucyBzYW5pdGl6ZWQgZmxvYXQgdmFsdWVcbiAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIHRoZSB2YWx1ZSBjYW5ub3QgYmUgc2FuaXRpemVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUZsb2F0KHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIGlmICghaXNGaW5pdGUodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYG5vdCBhIGZsdXggZmxvYXQ6ICR7dmFsdWV9YClcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKClcbiAgfVxuICBjb25zdCB2YWwgPSBTdHJpbmcodmFsdWUpXG4gIGxldCBkb3QgPSBmYWxzZVxuICBmb3IgKGNvbnN0IGMgb2YgdmFsKSB7XG4gICAgaWYgKGMgPT09ICcuJykge1xuICAgICAgaWYgKGRvdCkgdGhyb3cgbmV3IEVycm9yKGBub3QgYSBmbHV4IGZsb2F0OiAke3ZhbH1gKVxuICAgICAgZG90ID0gIWRvdFxuICAgICAgY29udGludWVcbiAgICB9XG4gICAgaWYgKGMgIT09ICcuJyAmJiBjICE9PSAnLScgJiYgKGMgPCAnMCcgfHwgYyA+ICc5JykpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYG5vdCBhIGZsdXggZmxvYXQ6ICR7dmFsfWApXG4gIH1cbiAgcmV0dXJuIHZhbFxufVxuLyoqXG4gKiBDcmVhdGVzIGEgZmx1eCBmbG9hdCBsaXRlcmFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmx1eEZsb2F0KHZhbHVlOiBhbnkpOiBGbHV4UGFyYW1ldGVyTGlrZSB7XG4gIHJldHVybiBuZXcgRmx1eFBhcmFtZXRlcihzYW5pdGl6ZUZsb2F0KHZhbHVlKSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZmx1eCBpbnRlZ2VyIGxpdGVyYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmbHV4SW50ZWdlcih2YWx1ZTogYW55KTogRmx1eFBhcmFtZXRlckxpa2Uge1xuICBjb25zdCB2YWwgPSBzYW5pdGl6ZUZsb2F0KHZhbHVlKVxuICBmb3IgKGNvbnN0IGMgb2YgdmFsKSB7XG4gICAgaWYgKGMgPT09ICcuJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBub3QgYSBmbHV4IGludGVnZXI6ICR7dmFsfWApXG4gICAgfVxuICB9XG4gIHJldHVybiBuZXcgRmx1eFBhcmFtZXRlcih2YWwpXG59XG5cbmZ1bmN0aW9uIHNhbml0aXplRGF0ZVRpbWUodmFsdWU6IGFueSk6IHN0cmluZyB7XG4gIHJldHVybiBgdGltZSh2OiBcIiR7c2FuaXRpemVTdHJpbmcodmFsdWUpfVwiKWBcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGZsdXggZGF0ZS10aW1lIGxpdGVyYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmbHV4RGF0ZVRpbWUodmFsdWU6IGFueSk6IEZsdXhQYXJhbWV0ZXJMaWtlIHtcbiAgcmV0dXJuIG5ldyBGbHV4UGFyYW1ldGVyKHNhbml0aXplRGF0ZVRpbWUodmFsdWUpKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgZmx1eCBkYXRlLXRpbWUgbGl0ZXJhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsdXhEdXJhdGlvbih2YWx1ZTogYW55KTogRmx1eFBhcmFtZXRlckxpa2Uge1xuICByZXR1cm4gbmV3IEZsdXhQYXJhbWV0ZXIoYGR1cmF0aW9uKHY6IFwiJHtzYW5pdGl6ZVN0cmluZyh2YWx1ZSl9XCIpYClcbn1cblxuZnVuY3Rpb24gc2FuaXRpemVSZWdFeHAodmFsdWU6IGFueSk6IHN0cmluZyB7XG4gIHJldHVybiBgcmVnZXhwLmNvbXBpbGUodjogXCIke3Nhbml0aXplU3RyaW5nKHZhbHVlKX1cIilgXG59XG5cbi8qKlxuICogQ3JlYXRlcyBmbHV4IHJlZ2V4cCBsaXRlcmFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmx1eFJlZ0V4cCh2YWx1ZTogYW55KTogRmx1eFBhcmFtZXRlckxpa2Uge1xuICAvLyBsZXQgdGhlIHNlcnZlciBkZWNpZGUgaWYgaXQgY2FuIGJlIHBhcnNlZFxuICByZXR1cm4gbmV3IEZsdXhQYXJhbWV0ZXIoc2FuaXRpemVSZWdFeHAodmFsdWUpKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgZmx1eCBib29sZWFuIGxpdGVyYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmbHV4Qm9vbCh2YWx1ZTogYW55KTogRmx1eFBhcmFtZXRlckxpa2Uge1xuICBpZiAodmFsdWUgPT09ICd0cnVlJyB8fCB2YWx1ZSA9PT0gJ2ZhbHNlJykge1xuICAgIHJldHVybiBuZXcgRmx1eFBhcmFtZXRlcih2YWx1ZSlcbiAgfVxuICByZXR1cm4gbmV3IEZsdXhQYXJhbWV0ZXIoKCEhdmFsdWUpLnRvU3RyaW5nKCkpXG59XG5cbi8qKlxuICogQXNzdW1lcyB0aGF0IHRoZSBzdXBwbGllZCB2YWx1ZSBpcyBmbHV4IGV4cHJlc3Npb24gb3IgbGl0ZXJhbCB0aGF0IGRvZXMgbm90IG5lZWQgc2FuaXRpemluZy5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBhbnkgdmFsdWVcbiAqIEByZXR1cm5zIHRoZSBzdXBwbGllZCB2YWx1ZSBhcy1pc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZmx1eEV4cHJlc3Npb24odmFsdWU6IGFueSk6IEZsdXhQYXJhbWV0ZXJMaWtlIHtcbiAgcmV0dXJuIG5ldyBGbHV4UGFyYW1ldGVyKFN0cmluZyh2YWx1ZSkpXG59XG5cbi8qKlxuICogRXNjYXBlcyBjb250ZW50IG9mIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgc28gdGhhdCBpdCBjYW4gYmUgc2FmZWx5IGVtYmVkZGVkIGludG8gZmx1eCBxdWVyeS5cbiAqIEBwYXJhbSB2YWx1ZSAtIHBhcmFtZXRlciB2YWx1ZVxuICogQHJldHVybnMgc2FuaXRpemVkIGZsdXggdmFsdWUgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIGl0IGNhbm5vdCBiZSBjb252ZXJ0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRmx1eFZhbHVlKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnJ1xuICB9IGVsc2UgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuICdudWxsJ1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKClcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGBcIiR7c2FuaXRpemVTdHJpbmcodmFsdWUpfVwiYFxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gc2FuaXRpemVGbG9hdCh2YWx1ZSlcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZVtGTFVYX1ZBTFVFXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHZhbHVlW0ZMVVhfVkFMVUVdKClcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvSVNPU3RyaW5nKClcbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICByZXR1cm4gc2FuaXRpemVSZWdFeHAodmFsdWUpXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGBbJHt2YWx1ZS5tYXAodG9GbHV4VmFsdWUpLmpvaW4oJywnKX1dYFxuICAgIH1cbiAgfVxuICAvLyB1c2UgdG9TdHJpbmcgdmFsdWUgZm9yIHVucmVjb2duaXplZCBvYmplY3QsIGJpZ2ludCwgc3ltYm9sXG4gIHJldHVybiB0b0ZsdXhWYWx1ZSh2YWx1ZS50b1N0cmluZygpKVxufVxuXG4vKipcbiAqIEZsdXggaXMgYSB0YWdnZWQgdGVtcGxhdGUgdGhhdCBzYW5pdGl6ZXMgc3VwcGxpZWQgcGFyYW1ldGVyc1xuICogdG8gYXZvaWQgaW5qZWN0aW9uIGF0dGFja3MgaW4gZmx1eC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsdXgoXG4gIHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5LFxuICAuLi52YWx1ZXM6IGFueVxuKTogUGFyYW1ldGVyaXplZFF1ZXJ5IHtcbiAgaWYgKHN0cmluZ3MubGVuZ3RoID09IDEgJiYgdmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmbHV4RXhwcmVzc2lvbihzdHJpbmdzWzBdKSAvLyB0aGUgc2ltcGxlc3QgY2FzZVxuICB9XG4gIGNvbnN0IHBhcnRzID0gbmV3IEFycmF5PHN0cmluZz4oc3RyaW5ncy5sZW5ndGggKyB2YWx1ZXMubGVuZ3RoKVxuICBsZXQgcGFydEluZGV4ID0gMFxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB0ZXh0ID0gc3RyaW5nc1tpXVxuICAgIHBhcnRzW3BhcnRJbmRleCsrXSA9IHRleHRcbiAgICBpZiAoaSA8IHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHZhbCA9IHZhbHVlc1tpXVxuICAgICAgbGV0IHNhbml0aXplZDogc3RyaW5nXG4gICAgICBpZiAoXG4gICAgICAgIHRleHQuZW5kc1dpdGgoJ1wiJykgJiZcbiAgICAgICAgaSArIDEgPCBzdHJpbmdzLmxlbmd0aCAmJlxuICAgICAgICBzdHJpbmdzW2kgKyAxXS5zdGFydHNXaXRoKCdcIicpXG4gICAgICApIHtcbiAgICAgICAgLy8gcGFyYW1ldGVyIGlzIHdyYXBwZWQgaW50byBmbHV4IGRvdWJsZSBxdW90ZXNcbiAgICAgICAgc2FuaXRpemVkID0gc2FuaXRpemVTdHJpbmcodmFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2FuaXRpemVkID0gdG9GbHV4VmFsdWUodmFsKVxuICAgICAgICBpZiAoc2FuaXRpemVkID09PSAnJykge1xuICAgICAgICAgIC8vIGRvIG5vdCBhbGxvdyB0byBpbnNlcnQgZW1wdHkgc3RyaW5ncywgdW5sZXNzIGl0IGlzIEZsdXhQYXJhbWV0ZXJMaWtlXG4gICAgICAgICAgaWYgKCFpc0ZsdXhQYXJhbWV0ZXJMaWtlKHZhbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFVuc3VwcG9ydGVkIHBhcmFtZXRlciBsaXRlcmFsICcke3ZhbH0nIGF0IGluZGV4OiAke2l9LCB0eXBlOiAke3R5cGVvZiB2YWx9YFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcGFydHNbcGFydEluZGV4KytdID0gc2FuaXRpemVkXG4gICAgfSBlbHNlIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RvbyBmZXcgcGFyYW1ldGVycyBzdXBwbGllZCEnKVxuICAgIH1cbiAgfVxuICAvLyByZXR1cm4gZmx1eCBleHByZXNzaW9uIHNvIHRoYXQgZmx1eCBjYW4gYmUgZW1iZWRkZWQgaW50byBhbm90aGVyIGZsdXggYXMtaXNcbiAgcmV0dXJuIGZsdXhFeHByZXNzaW9uKHBhcnRzLmpvaW4oJycpKVxufVxuIiwiLyogT2JzZXJ2YWJsZSBpbnRlcm9wIHR5cGluZy4gVGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vUmVhY3RpdmVYL3J4anMgKi9cblxuLyogTm90ZTogVGhpcyB3aWxsIGFkZCBTeW1ib2wub2JzZXJ2YWJsZSBnbG9iYWxseSBmb3IgYWxsIFR5cGVTY3JpcHQgdXNlcnMgKi9cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFN5bWJvbENvbnN0cnVjdG9yIHtcbiAgICByZWFkb25seSBvYnNlcnZhYmxlOiBzeW1ib2xcbiAgfVxufVxuXG4vKiogU3ltYm9sLm9ic2VydmFibGUgb3IgYSBzdHJpbmcgXCJcXEBcXEBvYnNlcnZhYmxlXCIuIFVzZWQgZm9yIGludGVyb3AgKi9cbmV4cG9ydCBjb25zdCBzeW1ib2xPYnNlcnZhYmxlID0gKCgpOlxuICB8IHR5cGVvZiBTeW1ib2wub2JzZXJ2YWJsZVxuICB8ICdAQG9ic2VydmFibGUnID0+XG4gICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlKSB8fCAnQEBvYnNlcnZhYmxlJykoKVxuIiwiaW1wb3J0IHtnZXRSZXRyeURlbGF5LCBSZXRyeURlbGF5U3RyYXRlZ3l9IGZyb20gJy4uL2Vycm9ycydcbmltcG9ydCB7XG4gIFJldHJ5RGVsYXlTdHJhdGVneU9wdGlvbnMsXG4gIERFRkFVTFRfUmV0cnlEZWxheVN0cmF0ZWd5T3B0aW9ucyxcbn0gZnJvbSAnLi4vb3B0aW9ucydcblxuLyoqXG4gKiBBcHBsaWVzIGEgdmFyaWFudCBvZiBleHBvbmVudGlhbCBiYWNrb2ZmIHdpdGggaW5pdGlhbCBhbmQgbWF4IGRlbGF5IGFuZCBhIHJhbmRvbVxuICogaml0dGVyIGRlbGF5LiBJdCBhbHNvIHJlc3BlY3RzIGByZXRyeSBkZWxheWAgd2hlbiBzcGVjaWZpZWQgdG9nZXRoZXIgd2l0aCBhbiBlcnJvci5cbiAqL1xuZXhwb3J0IGNsYXNzIFJldHJ5U3RyYXRlZ3lJbXBsIGltcGxlbWVudHMgUmV0cnlEZWxheVN0cmF0ZWd5IHtcbiAgb3B0aW9uczogUmV0cnlEZWxheVN0cmF0ZWd5T3B0aW9uc1xuICBjdXJyZW50RGVsYXk6IG51bWJlciB8IHVuZGVmaW5lZFxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBQYXJ0aWFsPFJldHJ5RGVsYXlTdHJhdGVneU9wdGlvbnM+KSB7XG4gICAgdGhpcy5vcHRpb25zID0gey4uLkRFRkFVTFRfUmV0cnlEZWxheVN0cmF0ZWd5T3B0aW9ucywgLi4ub3B0aW9uc31cbiAgICB0aGlzLnN1Y2Nlc3MoKVxuICB9XG5cbiAgbmV4dERlbGF5KGVycm9yPzogRXJyb3IsIGZhaWxlZEF0dGVtcHRzPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBkZWxheSA9IGdldFJldHJ5RGVsYXkoZXJyb3IpXG4gICAgaWYgKGRlbGF5ICYmIGRlbGF5ID4gMCkge1xuICAgICAgcmV0dXJuIGRlbGF5ICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogdGhpcy5vcHRpb25zLnJldHJ5Sml0dGVyKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZmFpbGVkQXR0ZW1wdHMgJiYgZmFpbGVkQXR0ZW1wdHMgPiAwKSB7XG4gICAgICAgIC8vIGNvbXB1dGUgZGVsYXlcbiAgICAgICAgbGV0IGRlbGF5ID0gdGhpcy5vcHRpb25zLm1pblJldHJ5RGVsYXlcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBmYWlsZWRBdHRlbXB0czsgaSsrKSB7XG4gICAgICAgICAgZGVsYXkgPSBkZWxheSAqIHRoaXMub3B0aW9ucy5leHBvbmVudGlhbEJhc2VcbiAgICAgICAgICBpZiAoZGVsYXkgPj0gdGhpcy5vcHRpb25zLm1heFJldHJ5RGVsYXkpIHtcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgTWF0aC5taW4oTWF0aC5tYXgoZGVsYXksIDEpLCB0aGlzLm9wdGlvbnMubWF4UmV0cnlEZWxheSkgK1xuICAgICAgICAgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIHRoaXMub3B0aW9ucy5yZXRyeUppdHRlcilcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnREZWxheSkge1xuICAgICAgICB0aGlzLmN1cnJlbnREZWxheSA9IE1hdGgubWluKFxuICAgICAgICAgIE1hdGgubWF4KHRoaXMuY3VycmVudERlbGF5ICogdGhpcy5vcHRpb25zLmV4cG9uZW50aWFsQmFzZSwgMSkgK1xuICAgICAgICAgICAgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogdGhpcy5vcHRpb25zLnJldHJ5Sml0dGVyKSxcbiAgICAgICAgICB0aGlzLm9wdGlvbnMubWF4UmV0cnlEZWxheVxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmN1cnJlbnREZWxheSA9XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm1pblJldHJ5RGVsYXkgK1xuICAgICAgICAgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIHRoaXMub3B0aW9ucy5yZXRyeUppdHRlcilcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnREZWxheVxuICAgIH1cbiAgfVxuICBzdWNjZXNzKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudERlbGF5ID0gdW5kZWZpbmVkXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIHJldHJ5IHN0cmF0ZWd5LlxuICogQHBhcmFtIG9wdGlvbnMgLSByZXRyeSBvcHRpb25zXG4gKiBAcmV0dXJucyByZXRyeSBzdHJhdGVneSBpbXBsZW1lbnRhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmV0cnlEZWxheVN0cmF0ZWd5KFxuICBvcHRpb25zPzogUGFydGlhbDxSZXRyeURlbGF5U3RyYXRlZ3lPcHRpb25zPlxuKTogUmV0cnlEZWxheVN0cmF0ZWd5IHtcbiAgcmV0dXJuIG5ldyBSZXRyeVN0cmF0ZWd5SW1wbChvcHRpb25zKVxufVxuIiwiaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uL3V0aWwvbG9nZ2VyJ1xuXG4vKiBpbnRlcnZhbCBiZXR3ZWVuIHN1Y2Nlc3NmdWwgcmV0cmllcyAqL1xuY29uc3QgUkVUUllfSU5URVJWQUwgPSAxXG5cbmludGVyZmFjZSBSZXRyeUl0ZW0ge1xuICBsaW5lczogc3RyaW5nW11cbiAgcmV0cnlDb3VudDogbnVtYmVyXG4gIG5leHQ/OiBSZXRyeUl0ZW1cbn1cblxuLyoqXG4gKiBSZXRyaWVzIGxpbmVzIHVwIHRvIGEgbGltaXQgb2YgbWF4IGJ1ZmZlciBzaXplLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXRyeUJ1ZmZlciB7XG4gIGZpcnN0PzogUmV0cnlJdGVtXG4gIGxhc3Q/OiBSZXRyeUl0ZW1cbiAgc2l6ZSA9IDBcbiAgbmV4dFJldHJ5VGltZSA9IDBcbiAgY2xvc2VkID0gZmFsc2VcbiAgcHJpdmF0ZSBfdGltZW91dEhhbmRsZTogYW55ID0gdW5kZWZpbmVkXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBtYXhMaW5lczogbnVtYmVyLFxuICAgIHByaXZhdGUgcmV0cnlMaW5lczogKFxuICAgICAgbGluZXM6IHN0cmluZ1tdLFxuICAgICAgcmV0cnlDb3VudGRvd246IG51bWJlclxuICAgICkgPT4gUHJvbWlzZTx2b2lkPlxuICApIHt9XG5cbiAgYWRkTGluZXMobGluZXM6IHN0cmluZ1tdLCByZXRyeUNvdW50OiBudW1iZXIsIGRlbGF5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHJldHVyblxuICAgIGlmICghbGluZXMubGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCByZXRyeVRpbWUgPSBEYXRlLm5vdygpICsgZGVsYXlcbiAgICBpZiAocmV0cnlUaW1lID4gdGhpcy5uZXh0UmV0cnlUaW1lKSB0aGlzLm5leHRSZXRyeVRpbWUgPSByZXRyeVRpbWVcbiAgICAvLyBlbnN1cmUgYXQgbW9zdCBtYXhMaW5lcyBhcmUgaW4gdGhlIEJ1ZmZlclxuICAgIGlmICh0aGlzLmZpcnN0ICYmIHRoaXMuc2l6ZSArIGxpbmVzLmxlbmd0aCA+IHRoaXMubWF4TGluZXMpIHtcbiAgICAgIGNvbnN0IG9yaWdTaXplID0gdGhpcy5zaXplXG4gICAgICBjb25zdCBuZXdTaXplID0gb3JpZ1NpemUgKiAwLjcgLy8gcmVkdWNlIHRvIDcwICVcbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbmV3Rmlyc3QgPSB0aGlzLmZpcnN0Lm5leHQgYXMgUmV0cnlJdGVtXG4gICAgICAgIHRoaXMuc2l6ZSAtPSB0aGlzLmZpcnN0LmxpbmVzLmxlbmd0aFxuICAgICAgICB0aGlzLmZpcnN0ID0gbmV3Rmlyc3RcbiAgICAgIH0gd2hpbGUgKHRoaXMuZmlyc3QgJiYgdGhpcy5zaXplICsgbGluZXMubGVuZ3RoID4gbmV3U2l6ZSlcbiAgICAgIExvZ2dlci5lcnJvcihcbiAgICAgICAgYFJldHJ5QnVmZmVyOiAke29yaWdTaXplIC1cbiAgICAgICAgICB0aGlzXG4gICAgICAgICAgICAuc2l6ZX0gb2xkZXN0IGxpbmVzIHJlbW92ZWQgdG8ga2VlcCBidWZmZXIgc2l6ZSB1bmRlciB0aGUgbGltaXQgb2YgJHtcbiAgICAgICAgICB0aGlzLm1heExpbmVzXG4gICAgICAgIH0gbGluZXNgXG4gICAgICApXG4gICAgfVxuICAgIGNvbnN0IHRvQWRkID0ge1xuICAgICAgbGluZXMsXG4gICAgICByZXRyeUNvdW50LFxuICAgIH1cbiAgICBpZiAodGhpcy5sYXN0KSB7XG4gICAgICB0aGlzLmxhc3QubmV4dCA9IHRvQWRkXG4gICAgICB0aGlzLmxhc3QgPSB0b0FkZFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpcnN0ID0gdG9BZGRcbiAgICAgIHRoaXMubGFzdCA9IHRvQWRkXG4gICAgICB0aGlzLnNjaGVkdWxlUmV0cnkoZGVsYXkpXG4gICAgfVxuICAgIHRoaXMuc2l6ZSArPSBsaW5lcy5sZW5ndGhcbiAgfVxuXG4gIHJlbW92ZUxpbmVzKCk6IFJldHJ5SXRlbSB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZmlyc3QpIHtcbiAgICAgIGNvbnN0IHRvUmV0cnkgPSB0aGlzLmZpcnN0XG4gICAgICB0aGlzLmZpcnN0ID0gdGhpcy5maXJzdC5uZXh0XG4gICAgICB0aGlzLnNpemUgLT0gdG9SZXRyeS5saW5lcy5sZW5ndGhcbiAgICAgIGlmICghdGhpcy5maXJzdCkgdGhpcy5sYXN0ID0gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdG9SZXRyeVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzY2hlZHVsZVJldHJ5KGRlbGF5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl90aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB0b1JldHJ5ID0gdGhpcy5yZW1vdmVMaW5lcygpXG4gICAgICBpZiAodG9SZXRyeSkge1xuICAgICAgICB0aGlzLnJldHJ5TGluZXModG9SZXRyeS5saW5lcywgdG9SZXRyeS5yZXRyeUNvdW50KVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnRpbnVlIHdpdGggc3VjY2Vzc2Z1bGwgcmV0cnlcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVSZXRyeShSRVRSWV9JTlRFUlZBTClcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChfZSA9PiB7XG4gICAgICAgICAgICAvLyBhbHJlYWR5IGxvZ2dlZFxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVJldHJ5KHRoaXMubmV4dFJldHJ5VGltZSAtIERhdGUubm93KCkpXG4gICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RpbWVvdXRIYW5kbGUgPSB1bmRlZmluZWRcbiAgICAgIH1cbiAgICB9LCBkZWxheSlcbiAgfVxuXG4gIGFzeW5jIGZsdXNoKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxldCB0b1JldHJ5XG4gICAgd2hpbGUgKCh0b1JldHJ5ID0gdGhpcy5yZW1vdmVMaW5lcygpKSkge1xuICAgICAgYXdhaXQgdGhpcy5yZXRyeUxpbmVzKHRvUmV0cnkubGluZXMsIHRvUmV0cnkucmV0cnlDb3VudClcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLl90aW1lb3V0SGFuZGxlKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dEhhbmRsZSlcbiAgICAgIHRoaXMuX3RpbWVvdXRIYW5kbGUgPSB1bmRlZmluZWRcbiAgICB9XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRoaXMuc2l6ZVxuICB9XG59XG4iLCJpbXBvcnQgV3JpdGVBcGkgZnJvbSAnLi4vV3JpdGVBcGknXG5pbXBvcnQge1xuICBERUZBVUxUX1dyaXRlT3B0aW9ucyxcbiAgV3JpdGVPcHRpb25zLFxuICBXcml0ZVByZWNpc2lvblR5cGUsXG59IGZyb20gJy4uL29wdGlvbnMnXG5pbXBvcnQge1RyYW5zcG9ydCwgU2VuZE9wdGlvbnN9IGZyb20gJy4uL3RyYW5zcG9ydCdcbmltcG9ydCB7SGVhZGVyc30gZnJvbSAnLi4vcmVzdWx0cydcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuLi91dGlsL2xvZ2dlcidcbmltcG9ydCB7SHR0cEVycm9yLCBSZXRyeURlbGF5U3RyYXRlZ3l9IGZyb20gJy4uL2Vycm9ycydcbmltcG9ydCB7UG9pbnR9IGZyb20gJy4uL1BvaW50J1xuaW1wb3J0IHtlc2NhcGV9IGZyb20gJy4uL3V0aWwvZXNjYXBlJ1xuaW1wb3J0IHtjdXJyZW50VGltZSwgZGF0ZVRvUHJvdG9jb2xUaW1lc3RhbXB9IGZyb20gJy4uL3V0aWwvY3VycmVudFRpbWUnXG5pbXBvcnQge2NyZWF0ZVJldHJ5RGVsYXlTdHJhdGVneX0gZnJvbSAnLi9yZXRyeVN0cmF0ZWd5J1xuaW1wb3J0IFJldHJ5QnVmZmVyIGZyb20gJy4vUmV0cnlCdWZmZXInXG5cbmNsYXNzIFdyaXRlQnVmZmVyIHtcbiAgbGVuZ3RoID0gMFxuICBsaW5lczogc3RyaW5nW11cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG1heENodW5rUmVjb3JkczogbnVtYmVyLFxuICAgIHByaXZhdGUgZmx1c2hGbjogKGxpbmVzOiBzdHJpbmdbXSkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICBwcml2YXRlIHNjaGVkdWxlU2VuZDogKCkgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLmxpbmVzID0gbmV3IEFycmF5PHN0cmluZz4obWF4Q2h1bmtSZWNvcmRzKVxuICB9XG5cbiAgYWRkKHJlY29yZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnNjaGVkdWxlU2VuZCgpXG4gICAgfVxuICAgIHRoaXMubGluZXNbdGhpcy5sZW5ndGhdID0gcmVjb3JkXG4gICAgdGhpcy5sZW5ndGgrK1xuICAgIGlmICh0aGlzLmxlbmd0aCA+PSB0aGlzLm1heENodW5rUmVjb3Jkcykge1xuICAgICAgdGhpcy5mbHVzaCgpLmNhdGNoKF9lID0+IHtcbiAgICAgICAgLy8gYW4gZXJyb3IgaXMgbG9nZ2VkIGluIGNhc2Ugb2YgZmFpbHVyZSwgYXZvaWQgVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmdcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIGZsdXNoKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGxpbmVzID0gdGhpcy5yZXNldCgpXG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLmZsdXNoRm4obGluZXMpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgIH1cbiAgfVxuICByZXNldCgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmV0VmFsID0gdGhpcy5saW5lcy5zbGljZSgwLCB0aGlzLmxlbmd0aClcbiAgICB0aGlzLmxlbmd0aCA9IDBcbiAgICByZXR1cm4gcmV0VmFsXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV3JpdGVBcGlJbXBsIGltcGxlbWVudHMgV3JpdGVBcGkge1xuICBwcml2YXRlIHdyaXRlQnVmZmVyOiBXcml0ZUJ1ZmZlclxuICBwcml2YXRlIGNsb3NlZCA9IGZhbHNlXG4gIHByaXZhdGUgaHR0cFBhdGg6IHN0cmluZ1xuICBwcml2YXRlIHdyaXRlT3B0aW9uczogV3JpdGVPcHRpb25zXG4gIHByaXZhdGUgc2VuZE9wdGlvbnM6IFNlbmRPcHRpb25zXG4gIHByaXZhdGUgX3RpbWVvdXRIYW5kbGU6IGFueSA9IHVuZGVmaW5lZFxuICBwcml2YXRlIGN1cnJlbnRUaW1lOiAoKSA9PiBzdHJpbmdcbiAgcHJpdmF0ZSBkYXRlVG9Qcm90b2NvbFRpbWVzdGFtcDogKGQ6IERhdGUpID0+IHN0cmluZ1xuXG4gIHJldHJ5QnVmZmVyOiBSZXRyeUJ1ZmZlclxuICByZXRyeVN0cmF0ZWd5OiBSZXRyeURlbGF5U3RyYXRlZ3lcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHRyYW5zcG9ydDogVHJhbnNwb3J0LFxuICAgIG9yZzogc3RyaW5nLFxuICAgIGJ1Y2tldDogc3RyaW5nLFxuICAgIHByZWNpc2lvbjogV3JpdGVQcmVjaXNpb25UeXBlLFxuICAgIHdyaXRlT3B0aW9ucz86IFBhcnRpYWw8V3JpdGVPcHRpb25zPlxuICApIHtcbiAgICB0aGlzLmh0dHBQYXRoID0gYC9hcGkvdjIvd3JpdGU/b3JnPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgb3JnXG4gICAgKX0mYnVja2V0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGJ1Y2tldCl9JnByZWNpc2lvbj0ke3ByZWNpc2lvbn1gXG4gICAgdGhpcy53cml0ZU9wdGlvbnMgPSB7XG4gICAgICAuLi5ERUZBVUxUX1dyaXRlT3B0aW9ucyxcbiAgICAgIC4uLndyaXRlT3B0aW9ucyxcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50VGltZSA9IGN1cnJlbnRUaW1lW3ByZWNpc2lvbl1cbiAgICB0aGlzLmRhdGVUb1Byb3RvY29sVGltZXN0YW1wID0gZGF0ZVRvUHJvdG9jb2xUaW1lc3RhbXBbcHJlY2lzaW9uXVxuICAgIGlmICh0aGlzLndyaXRlT3B0aW9ucy5kZWZhdWx0VGFncykge1xuICAgICAgdGhpcy51c2VEZWZhdWx0VGFncyh0aGlzLndyaXRlT3B0aW9ucy5kZWZhdWx0VGFncylcbiAgICB9XG4gICAgdGhpcy5zZW5kT3B0aW9ucyA9IHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnY29udGVudC10eXBlJzogJ3RleHQvcGxhaW47IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAuLi53cml0ZU9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgICAgZ3ppcFRocmVzaG9sZDogdGhpcy53cml0ZU9wdGlvbnMuZ3ppcFRocmVzaG9sZCxcbiAgICB9XG5cbiAgICBjb25zdCBzY2hlZHVsZU5leHRTZW5kID0gKCk6IHZvaWQgPT4ge1xuICAgICAgaWYgKHRoaXMud3JpdGVPcHRpb25zLmZsdXNoSW50ZXJ2YWwgPiAwKSB7XG4gICAgICAgIHRoaXMuX2NsZWFyRmx1c2hUaW1lb3V0KClcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgbWFudWFsbHkgcmV2aWV3ZWQsIGhhcmQgdG8gcmVwcm9kdWNlICovXG4gICAgICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICB0aGlzLl90aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICgpID0+XG4gICAgICAgICAgICAgIHRoaXMuc2VuZEJhdGNoKFxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVCdWZmZXIucmVzZXQoKSxcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3B0aW9ucy5tYXhSZXRyaWVzICsgMVxuICAgICAgICAgICAgICApLmNhdGNoKF9lID0+IHtcbiAgICAgICAgICAgICAgICAvLyBhbiBlcnJvciBpcyBsb2dnZWQgaW4gY2FzZSBvZiBmYWlsdXJlLCBhdm9pZCBVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZ1xuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHRoaXMud3JpdGVPcHRpb25zLmZsdXNoSW50ZXJ2YWxcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gd3JpdGUgYnVmZmVyXG4gICAgdGhpcy53cml0ZUJ1ZmZlciA9IG5ldyBXcml0ZUJ1ZmZlcihcbiAgICAgIHRoaXMud3JpdGVPcHRpb25zLmJhdGNoU2l6ZSxcbiAgICAgIGxpbmVzID0+IHtcbiAgICAgICAgdGhpcy5fY2xlYXJGbHVzaFRpbWVvdXQoKVxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kQmF0Y2gobGluZXMsIHRoaXMud3JpdGVPcHRpb25zLm1heFJldHJpZXMgKyAxKVxuICAgICAgfSxcbiAgICAgIHNjaGVkdWxlTmV4dFNlbmRcbiAgICApXG4gICAgdGhpcy5zZW5kQmF0Y2ggPSB0aGlzLnNlbmRCYXRjaC5iaW5kKHRoaXMpXG4gICAgLy8gcmV0cnkgYnVmZmVyXG4gICAgdGhpcy5yZXRyeVN0cmF0ZWd5ID0gY3JlYXRlUmV0cnlEZWxheVN0cmF0ZWd5KHRoaXMud3JpdGVPcHRpb25zKVxuICAgIHRoaXMucmV0cnlCdWZmZXIgPSBuZXcgUmV0cnlCdWZmZXIoXG4gICAgICB0aGlzLndyaXRlT3B0aW9ucy5tYXhCdWZmZXJMaW5lcyxcbiAgICAgIHRoaXMuc2VuZEJhdGNoXG4gICAgKVxuICB9XG5cbiAgc2VuZEJhdGNoKGxpbmVzOiBzdHJpbmdbXSwgYXR0ZW1wdHM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgIGNvbnN0IHNlbGY6IFdyaXRlQXBpSW1wbCA9IHRoaXNcbiAgICBpZiAoIXRoaXMuY2xvc2VkICYmIGxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCByZXNwb25zZVN0YXR1c0NvZGU6IG51bWJlciB8IHVuZGVmaW5lZFxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB7XG4gICAgICAgICAgcmVzcG9uc2VTdGFydGVkKF9oZWFkZXJzOiBIZWFkZXJzLCBzdGF0dXNDb2RlPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgICAgICByZXNwb25zZVN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcihlcnJvcjogRXJyb3IpOiB2b2lkIHtcbiAgICAgICAgICAgIGNvbnN0IGZhaWxlZEF0dGVtcHRzID0gc2VsZi53cml0ZU9wdGlvbnMubWF4UmV0cmllcyArIDIgLSBhdHRlbXB0c1xuICAgICAgICAgICAgLy8gY2FsbCB0aGUgd3JpdGVGYWlsZWQgbGlzdGVuZXIgYW5kIGNoZWNrIGlmIHdlIGNhbiByZXRyeVxuICAgICAgICAgICAgY29uc3Qgb25SZXRyeSA9IHNlbGYud3JpdGVPcHRpb25zLndyaXRlRmFpbGVkLmNhbGwoXG4gICAgICAgICAgICAgIHNlbGYsXG4gICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICBsaW5lcyxcbiAgICAgICAgICAgICAgZmFpbGVkQXR0ZW1wdHNcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIChvblJldHJ5KSB7XG4gICAgICAgICAgICAgIG9uUmV0cnkudGhlbihyZXNvbHZlLCByZWplY3QpXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhc2VsZi5jbG9zZWQgJiZcbiAgICAgICAgICAgICAgYXR0ZW1wdHMgPiAxICYmXG4gICAgICAgICAgICAgICghKGVycm9yIGluc3RhbmNlb2YgSHR0cEVycm9yKSB8fFxuICAgICAgICAgICAgICAgIChlcnJvciBhcyBIdHRwRXJyb3IpLnN0YXR1c0NvZGUgPj0gNDI5KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIExvZ2dlci53YXJuKFxuICAgICAgICAgICAgICAgIGBXcml0ZSB0byBJbmZsdXhEQiBmYWlsZWQgKHJlbWFpbmluZyBhdHRlbXB0czogJHthdHRlbXB0cyAtXG4gICAgICAgICAgICAgICAgICAxfSkuYCxcbiAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHNlbGYucmV0cnlCdWZmZXIuYWRkTGluZXMoXG4gICAgICAgICAgICAgICAgbGluZXMsXG4gICAgICAgICAgICAgICAgYXR0ZW1wdHMgLSAxLFxuICAgICAgICAgICAgICAgIHNlbGYucmV0cnlTdHJhdGVneS5uZXh0RGVsYXkoZXJyb3IsIGZhaWxlZEF0dGVtcHRzKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBMb2dnZXIuZXJyb3IoYFdyaXRlIHRvIEluZmx1eERCIGZhaWxlZC5gLCBlcnJvcilcbiAgICAgICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbXBsZXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gb2xkZXIgaW1wbGVtZW50YXRpb25zIG9mIHRyYW5zcG9ydCBkbyBub3QgcmVwb3J0IHN0YXR1cyBjb2RlXG4gICAgICAgICAgICBpZiAocmVzcG9uc2VTdGF0dXNDb2RlID09IDIwNCB8fCByZXNwb25zZVN0YXR1c0NvZGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHNlbGYud3JpdGVPcHRpb25zLndyaXRlU3VjY2Vzcy5jYWxsKHNlbGYsIGxpbmVzKVxuICAgICAgICAgICAgICBzZWxmLnJldHJ5U3RyYXRlZ3kuc3VjY2VzcygpXG4gICAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGAyMDQgSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZSBleHBlY3RlZCwgYnV0ICR7cmVzcG9uc2VTdGF0dXNDb2RlfSByZXR1cm5lZGBcbiAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgSHR0cEVycm9yKFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlU3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAnMCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID0gbWVzc2FnZVxuICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zcG9ydC5zZW5kKFxuICAgICAgICAgIHRoaXMuaHR0cFBhdGgsXG4gICAgICAgICAgbGluZXMuam9pbignXFxuJyksXG4gICAgICAgICAgdGhpcy5zZW5kT3B0aW9ucyxcbiAgICAgICAgICBjYWxsYmFja3NcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJGbHVzaFRpbWVvdXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3RpbWVvdXRIYW5kbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRIYW5kbGUpXG4gICAgICB0aGlzLl90aW1lb3V0SGFuZGxlID0gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgd3JpdGVSZWNvcmQocmVjb3JkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignd3JpdGVBcGk6IGFscmVhZHkgY2xvc2VkIScpXG4gICAgfVxuICAgIHRoaXMud3JpdGVCdWZmZXIuYWRkKHJlY29yZClcbiAgfVxuICB3cml0ZVJlY29yZHMocmVjb3JkczogQXJyYXlMaWtlPHN0cmluZz4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignd3JpdGVBcGk6IGFscmVhZHkgY2xvc2VkIScpXG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy53cml0ZUJ1ZmZlci5hZGQocmVjb3Jkc1tpXSlcbiAgICB9XG4gIH1cbiAgd3JpdGVQb2ludChwb2ludDogUG9pbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignd3JpdGVBcGk6IGFscmVhZHkgY2xvc2VkIScpXG4gICAgfVxuICAgIGNvbnN0IGxpbmUgPSBwb2ludC50b0xpbmVQcm90b2NvbCh0aGlzKVxuICAgIGlmIChsaW5lKSB0aGlzLndyaXRlQnVmZmVyLmFkZChsaW5lKVxuICB9XG4gIHdyaXRlUG9pbnRzKHBvaW50czogQXJyYXlMaWtlPFBvaW50Pik6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cml0ZUFwaTogYWxyZWFkeSBjbG9zZWQhJylcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBwb2ludHNbaV0udG9MaW5lUHJvdG9jb2wodGhpcylcbiAgICAgIGlmIChsaW5lKSB0aGlzLndyaXRlQnVmZmVyLmFkZChsaW5lKVxuICAgIH1cbiAgfVxuICBhc3luYyBmbHVzaCh3aXRoUmV0cnlCdWZmZXI/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy53cml0ZUJ1ZmZlci5mbHVzaCgpXG4gICAgaWYgKHdpdGhSZXRyeUJ1ZmZlcikge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmV0cnlCdWZmZXIuZmx1c2goKVxuICAgIH1cbiAgfVxuICBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCByZXRWYWwgPSB0aGlzLndyaXRlQnVmZmVyLmZsdXNoKCkuZmluYWxseSgoKSA9PiB7XG4gICAgICBjb25zdCByZW1haW5pbmcgPSB0aGlzLnJldHJ5QnVmZmVyLmNsb3NlKClcbiAgICAgIGlmIChyZW1haW5pbmcpIHtcbiAgICAgICAgTG9nZ2VyLmVycm9yKFxuICAgICAgICAgIGBSZXRyeSBidWZmZXIgY2xvc2VkIHdpdGggJHtyZW1haW5pbmd9IGl0ZW1zIHRoYXQgd2VyZSBub3Qgd3JpdHRlbiB0byBJbmZsdXhEQiFgLFxuICAgICAgICAgIG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gICAgfSlcbiAgICByZXR1cm4gcmV0VmFsXG4gIH1cbiAgZGlzcG9zZSgpOiBudW1iZXIge1xuICAgIHRoaXMuX2NsZWFyRmx1c2hUaW1lb3V0KClcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcbiAgICByZXR1cm4gdGhpcy5yZXRyeUJ1ZmZlci5jbG9zZSgpICsgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGhcbiAgfVxuXG4gIC8vIFBvaW50U2V0dGluZ3NcbiAgZGVmYXVsdFRhZ3M6IHtba2V5OiBzdHJpbmddOiBzdHJpbmd9IHwgdW5kZWZpbmVkXG4gIHVzZURlZmF1bHRUYWdzKHRhZ3M6IHtba2V5OiBzdHJpbmddOiBzdHJpbmd9KTogV3JpdGVBcGkge1xuICAgIHRoaXMuZGVmYXVsdFRhZ3MgPSB1bmRlZmluZWRcbiAgICBPYmplY3Qua2V5cyh0YWdzKS5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuICAgICAgOyh0aGlzLmRlZmF1bHRUYWdzIHx8ICh0aGlzLmRlZmF1bHRUYWdzID0ge30pKVtrZXldID0gZXNjYXBlLnRhZyhcbiAgICAgICAgdGFnc1trZXldXG4gICAgICApXG4gICAgfSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIGNvbnZlcnRUaW1lKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCBEYXRlIHwgdW5kZWZpbmVkKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFRpbWUoKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA+IDAgPyB2YWx1ZSA6IHVuZGVmaW5lZFxuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRlVG9Qcm90b2NvbFRpbWVzdGFtcCh2YWx1ZSlcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiBTdHJpbmcoTWF0aC5mbG9vcih2YWx1ZSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQge1RyYW5zcG9ydCwgU2VuZE9wdGlvbnN9IGZyb20gJy4uLy4uL3RyYW5zcG9ydCdcbmltcG9ydCB7Q29ubmVjdGlvbk9wdGlvbnN9IGZyb20gJy4uLy4uL29wdGlvbnMnXG5pbXBvcnQge0h0dHBFcnJvcn0gZnJvbSAnLi4vLi4vZXJyb3JzJ1xuaW1wb3J0IGNvbXBsZXRlQ29tbXVuaWNhdGlvbk9ic2VydmVyIGZyb20gJy4uL2NvbXBsZXRlQ29tbXVuaWNhdGlvbk9ic2VydmVyJ1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uLy4uL3V0aWwvbG9nZ2VyJ1xuaW1wb3J0IHtcbiAgQ2h1bmtDb21iaW5lcixcbiAgQ29tbXVuaWNhdGlvbk9ic2VydmVyLFxuICBjcmVhdGVUZXh0RGVjb2RlckNvbWJpbmVyLFxuICBIZWFkZXJzLFxuICBSZXNwb25zZVN0YXJ0ZWRGbixcbn0gZnJvbSAnLi4vLi4vcmVzdWx0cydcblxuZnVuY3Rpb24gZ2V0UmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlOiBSZXNwb25zZSk6IEhlYWRlcnMge1xuICBjb25zdCBoZWFkZXJzOiBIZWFkZXJzID0ge31cbiAgcmVzcG9uc2UuaGVhZGVycy5mb3JFYWNoKCh2YWx1ZTogc3RyaW5nLCBrZXk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHByZXZpb3VzID0gaGVhZGVyc1trZXldXG4gICAgaWYgKHByZXZpb3VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGhlYWRlcnNba2V5XSA9IHZhbHVlXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHByZXZpb3VzKSkge1xuICAgICAgcHJldmlvdXMucHVzaCh2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhZGVyc1trZXldID0gW3ByZXZpb3VzLCB2YWx1ZV1cbiAgICB9XG4gIH0pXG4gIHJldHVybiBoZWFkZXJzXG59XG5cbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQgdXNlIGJyb3dzZXIgZmV0Y2guXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZldGNoVHJhbnNwb3J0IGltcGxlbWVudHMgVHJhbnNwb3J0IHtcbiAgY2h1bmtDb21iaW5lcjogQ2h1bmtDb21iaW5lciA9IGNyZWF0ZVRleHREZWNvZGVyQ29tYmluZXIoKVxuICBwcml2YXRlIGRlZmF1bHRIZWFkZXJzOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfVxuICBwcml2YXRlIHVybDogc3RyaW5nXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29ubmVjdGlvbk9wdGlvbnM6IENvbm5lY3Rpb25PcHRpb25zKSB7XG4gICAgdGhpcy5kZWZhdWx0SGVhZGVycyA9IHtcbiAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAvLyAnVXNlci1BZ2VudCc6IGBpbmZsdXhkYi1jbGllbnQtanMvJHtDTElFTlRfTElCX1ZFUlNJT059YCwgLy8gdXNlci1hZ2VudCBjYW4gaGFyZGx5IGJlIGN1c3RvbWl6ZWQgaHR0cHM6Ly9naXRodWIuY29tL2luZmx1eGRhdGEvaW5mbHV4ZGItY2xpZW50LWpzL2lzc3Vlcy8yNjJcbiAgICB9XG4gICAgaWYgKHRoaXMuY29ubmVjdGlvbk9wdGlvbnMudG9rZW4pIHtcbiAgICAgIHRoaXMuZGVmYXVsdEhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9XG4gICAgICAgICdUb2tlbiAnICsgdGhpcy5jb25uZWN0aW9uT3B0aW9ucy50b2tlblxuICAgIH1cbiAgICB0aGlzLnVybCA9IFN0cmluZyh0aGlzLmNvbm5lY3Rpb25PcHRpb25zLnVybClcbiAgICBpZiAodGhpcy51cmwuZW5kc1dpdGgoJy8nKSkge1xuICAgICAgdGhpcy51cmwgPSB0aGlzLnVybC5zdWJzdHJpbmcoMCwgdGhpcy51cmwubGVuZ3RoIC0gMSlcbiAgICB9XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2luZmx1eGRhdGEvaW5mbHV4ZGItY2xpZW50LWpzL2lzc3Vlcy8yNjNcbiAgICAvLyBkb24ndCBhbGxvdyAvYXBpL3YyIHN1ZmZpeCB0byBhdm9pZCBmdXR1cmUgcHJvYmxlbXNcbiAgICBpZiAodGhpcy51cmwuZW5kc1dpdGgoJy9hcGkvdjInKSkge1xuICAgICAgdGhpcy51cmwgPSB0aGlzLnVybC5zdWJzdHJpbmcoMCwgdGhpcy51cmwubGVuZ3RoIC0gJy9hcGkvdjInLmxlbmd0aClcbiAgICAgIExvZ2dlci53YXJuKFxuICAgICAgICBgUGxlYXNlIHJlbW92ZSAnL2FwaS92MicgY29udGV4dCBwYXRoIGZyb20gSW5mbHV4REIgYmFzZSB1cmwsIHVzaW5nICR7dGhpcy51cmx9ICFgXG4gICAgICApXG4gICAgfVxuICB9XG4gIHNlbmQoXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIGJvZHk6IHN0cmluZyxcbiAgICBvcHRpb25zOiBTZW5kT3B0aW9ucyxcbiAgICBjYWxsYmFja3M/OiBQYXJ0aWFsPENvbW11bmljYXRpb25PYnNlcnZlcjxVaW50OEFycmF5Pj4gfCB1bmRlZmluZWRcbiAgKTogdm9pZCB7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBjb21wbGV0ZUNvbW11bmljYXRpb25PYnNlcnZlcihjYWxsYmFja3MpXG4gICAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlXG4gICAgbGV0IHNpZ25hbCA9IChvcHRpb25zIGFzIGFueSkuc2lnbmFsXG4gICAgaWYgKGNhbGxiYWNrcyAmJiBjYWxsYmFja3MudXNlQ2FuY2VsbGFibGUpIHtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcbiAgICAgIGlmICghc2lnbmFsKSB7XG4gICAgICAgIHNpZ25hbCA9IGNvbnRyb2xsZXIuc2lnbmFsXG4gICAgICAgIG9wdGlvbnMgPSB7Li4uKG9wdGlvbnMgYXMgb2JqZWN0KSwgLi4uc2lnbmFsfSBhcyBTZW5kT3B0aW9uc1xuICAgICAgfVxuICAgICAgY2FsbGJhY2tzLnVzZUNhbmNlbGxhYmxlKHtcbiAgICAgICAgY2FuY2VsKCkge1xuICAgICAgICAgIGNhbmNlbGxlZCA9IHRydWVcbiAgICAgICAgICBjb250cm9sbGVyLmFib3J0KClcbiAgICAgICAgfSxcbiAgICAgICAgaXNDYW5jZWxsZWQoKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbmNlbGxlZCB8fCBzaWduYWwuYWJvcnRlZFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5mZXRjaChwYXRoLCBib2R5LCBvcHRpb25zKVxuICAgICAgLnRoZW4oYXN5bmMgcmVzcG9uc2UgPT4ge1xuICAgICAgICBpZiAoY2FsbGJhY2tzPy5yZXNwb25zZVN0YXJ0ZWQpIHtcbiAgICAgICAgICBvYnNlcnZlci5yZXNwb25zZVN0YXJ0ZWQoXG4gICAgICAgICAgICBnZXRSZXNwb25zZUhlYWRlcnMocmVzcG9uc2UpLFxuICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gMzAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICAgICAgICAudGV4dCgpXG4gICAgICAgICAgICAudGhlbigodGV4dDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghdGV4dCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckVycm9yID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtaW5mbHV4ZGItZXJyb3InKVxuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJFcnJvcikge1xuICAgICAgICAgICAgICAgICAgdGV4dCA9IGhlYWRlckVycm9yXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKFxuICAgICAgICAgICAgICAgIG5ldyBIdHRwRXJyb3IoXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdyZXRyeS1hZnRlcicpLFxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlOiBFcnJvcikgPT4ge1xuICAgICAgICAgICAgICBMb2dnZXIud2FybignVW5hYmxlIHRvIHJlY2VpdmUgZXJyb3IgYm9keScsIGUpXG4gICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKFxuICAgICAgICAgICAgICAgIG5ldyBIdHRwRXJyb3IoXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3JldHJ5LWFmdGVyJyksXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmJvZHkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKClcbiAgICAgICAgICAgIGxldCBjaHVuazogUmVhZGFibGVTdHJlYW1SZWFkUmVzdWx0PFVpbnQ4QXJyYXk+XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgIGNodW5rID0gYXdhaXQgcmVhZGVyLnJlYWQoKVxuICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KGNodW5rLnZhbHVlKVxuICAgICAgICAgICAgfSB3aGlsZSAoIWNodW5rLmRvbmUpXG4gICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5hcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKVxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChuZXcgVWludDhBcnJheShidWZmZXIpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh0ZXh0KSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgIGlmICghY2FuY2VsbGVkKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IG9ic2VydmVyLmNvbXBsZXRlKCkpXG4gIH1cbiAgYXN5bmMgcmVxdWVzdChcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgYm9keTogYW55LFxuICAgIG9wdGlvbnM6IFNlbmRPcHRpb25zLFxuICAgIHJlc3BvbnNlU3RhcnRlZD86IFJlc3BvbnNlU3RhcnRlZEZuXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoKHBhdGgsIGJvZHksIG9wdGlvbnMpXG4gICAgY29uc3Qge3N0YXR1cywgaGVhZGVyc30gPSByZXNwb25zZVxuICAgIGNvbnN0IHJlc3BvbnNlQ29udGVudFR5cGUgPSBoZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJydcbiAgICBpZiAocmVzcG9uc2VTdGFydGVkKSB7XG4gICAgICByZXNwb25zZVN0YXJ0ZWQoZ2V0UmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlKSwgcmVzcG9uc2Uuc3RhdHVzKVxuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPj0gMzAwKSB7XG4gICAgICBsZXQgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlckVycm9yID0gaGVhZGVycy5nZXQoJ3gtaW5mbHV4ZGItZXJyb3InKVxuICAgICAgICBpZiAoaGVhZGVyRXJyb3IpIHtcbiAgICAgICAgICBkYXRhID0gaGVhZGVyRXJyb3JcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcihcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICByZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgICAgICBkYXRhLFxuICAgICAgICByZXNwb25zZS5oZWFkZXJzLmdldCgncmV0cnktYWZ0ZXInKSxcbiAgICAgICAgcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpXG4gICAgICApXG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlVHlwZSA9IG9wdGlvbnMuaGVhZGVycz8uYWNjZXB0ID8/IHJlc3BvbnNlQ29udGVudFR5cGVcbiAgICBpZiAocmVzcG9uc2VUeXBlLmluY2x1ZGVzKCdqc29uJykpIHtcbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgcmVzcG9uc2VUeXBlLmluY2x1ZGVzKCd0ZXh0JykgfHxcbiAgICAgIHJlc3BvbnNlVHlwZS5zdGFydHNXaXRoKCdhcHBsaWNhdGlvbi9jc3YnKVxuICAgICkge1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZmV0Y2goXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIGJvZHk6IGFueSxcbiAgICBvcHRpb25zOiBTZW5kT3B0aW9uc1xuICApOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgY29uc3Qge21ldGhvZCwgaGVhZGVycywgLi4ub3RoZXJ9ID0gb3B0aW9uc1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMudXJsfSR7cGF0aH1gXG4gICAgY29uc3QgcmVxdWVzdDogUmVxdWVzdEluaXQgPSB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIGJvZHk6XG4gICAgICAgIG1ldGhvZCA9PT0gJ0dFVCcgfHwgbWV0aG9kID09PSAnSEVBRCdcbiAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgIDogdHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnXG4gICAgICAgICAgPyBib2R5XG4gICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4udGhpcy5kZWZhdWx0SGVhZGVycyxcbiAgICAgICAgLi4uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgICBjcmVkZW50aWFsczogJ29taXQnIGFzICdvbWl0JyxcbiAgICAgIC8vIGFsbG93IHRvIHNwZWNpZnkgY3VzdG9tIG9wdGlvbnMsIHN1Y2ggYXMgc2lnbmFsLCBpbiBTZW5kT3B0aW9uc1xuICAgICAgLi4ub3RoZXIsXG4gICAgfVxuICAgIHRoaXMucmVxdWVzdERlY29yYXRvcihyZXF1ZXN0LCBvcHRpb25zLCB1cmwpXG4gICAgcmV0dXJuIGZldGNoKHVybCwgcmVxdWVzdClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0RGVjb3JhdG9yIGFsbG93cyB0byBtb2RpZnkgcmVxdWVzdHMgYmVmb3JlIHNlbmRpbmcuXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBnemlwXG4gICAqIGNvbXByZXNzaW9uIG9mIHJlcXVlc3RzIHVzaW5nIHBha28uanMuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IGNsaWVudCA9IG5ldyBJbmZsdXhEQih7dXJsOiAnaHR0cDovL2EnfSlcbiAgICogY2xpZW50LnRyYW5zcG9ydC5yZXF1ZXN0RGVjb3JhdG9yID0gZnVuY3Rpb24ocmVxdWVzdCwgb3B0aW9ucykge1xuICAgKiAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0LmJvZHlcbiAgICogICBpZiAoXG4gICAqICAgICB0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycgJiZcbiAgICogICAgIG9wdGlvbnMuZ3ppcFRocmVzaG9sZCAhPT0gdW5kZWZpbmVkICYmXG4gICAqICAgICBib2R5Lmxlbmd0aCA+IG9wdGlvbnMuZ3ppcFRocmVzaG9sZFxuICAgKiAgICkge1xuICAgKiAgICAgcmVxdWVzdC5oZWFkZXJzWydjb250ZW50LWVuY29kaW5nJ10gPSAnZ3ppcCdcbiAgICogICAgIHJlcXVlc3QuYm9keSA9IHBha28uZ3ppcChib2R5KVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYyByZXF1ZXN0RGVjb3JhdG9yOiAoXG4gICAgcmVxdWVzdDogUmVxdWVzdEluaXQsXG4gICAgb3B0aW9uczogU2VuZE9wdGlvbnMsXG4gICAgdXJsOiBzdHJpbmdcbiAgKSA9PiB2b2lkID0gZnVuY3Rpb24oKSB7fVxufVxuIiwiaW1wb3J0IHtDb21tdW5pY2F0aW9uT2JzZXJ2ZXIsIEhlYWRlcnN9IGZyb20gJy4uL3Jlc3VsdHMnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXBsZXRlQ29tbXVuaWNhdGlvbk9ic2VydmVyKFxuICBjYWxsYmFja3M6IFBhcnRpYWw8Q29tbXVuaWNhdGlvbk9ic2VydmVyPGFueT4+ID0ge31cbik6IE9taXQ8UmVxdWlyZWQ8Q29tbXVuaWNhdGlvbk9ic2VydmVyPGFueT4+LCAndXNlQ2FuY2VsbGFibGUnPiB7XG4gIGxldCBzdGF0ZSA9IDBcbiAgY29uc3QgcmV0VmFsID0ge1xuICAgIG5leHQ6IChkYXRhOiBhbnkpOiB2b2lkID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgc3RhdGUgPT09IDAgJiZcbiAgICAgICAgY2FsbGJhY2tzLm5leHQgJiZcbiAgICAgICAgZGF0YSAhPT0gbnVsbCAmJlxuICAgICAgICBkYXRhICE9PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICBjYWxsYmFja3MubmV4dChkYXRhKVxuICAgICAgfVxuICAgIH0sXG4gICAgZXJyb3I6IChlcnJvcjogRXJyb3IpOiB2b2lkID0+IHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlIHByb3BhZ2F0ZSBlcnJvciBhdCBtb3N0IG9uY2UgKi9cbiAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICBzdGF0ZSA9IDFcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2Ugc2FmZXR5IGNoZWNrICovXG4gICAgICAgIGlmIChjYWxsYmFja3MuZXJyb3IpIGNhbGxiYWNrcy5lcnJvcihlcnJvcilcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBsZXRlOiAoKTogdm9pZCA9PiB7XG4gICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgc3RhdGUgPSAyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlIHNhZmV0eSBjaGVjayAqL1xuICAgICAgICBpZiAoY2FsbGJhY2tzLmNvbXBsZXRlKSBjYWxsYmFja3MuY29tcGxldGUoKVxuICAgICAgfVxuICAgIH0sXG4gICAgcmVzcG9uc2VTdGFydGVkOiAoaGVhZGVyczogSGVhZGVycywgc3RhdHVzQ29kZT86IG51bWJlcik6IHZvaWQgPT4ge1xuICAgICAgaWYgKGNhbGxiYWNrcy5yZXNwb25zZVN0YXJ0ZWQpXG4gICAgICAgIGNhbGxiYWNrcy5yZXNwb25zZVN0YXJ0ZWQoaGVhZGVycywgc3RhdHVzQ29kZSlcbiAgICB9LFxuICB9XG4gIHJldHVybiByZXRWYWxcbn1cbiIsImltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAnLi9vYnNlcnZhYmxlJ1xuaW1wb3J0IHtQYXJhbWV0ZXJpemVkUXVlcnl9IGZyb20gJy4vcXVlcnknXG5pbXBvcnQge1xuICBDb21tdW5pY2F0aW9uT2JzZXJ2ZXIsXG4gIEZsdXhSZXN1bHRPYnNlcnZlcixcbiAgRmx1eFRhYmxlTWV0YURhdGEsXG59IGZyb20gJy4vcmVzdWx0cydcblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRSb3dNYXBwaW5nKFxuICB2YWx1ZXM6IHN0cmluZ1tdLFxuICB0YWJsZU1ldGE6IEZsdXhUYWJsZU1ldGFEYXRhXG4pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgcmV0dXJuIHRhYmxlTWV0YS50b09iamVjdCh2YWx1ZXMpXG59XG5cbi8qKiBRdWVyeU9wdGlvbnMgY29udGFpbnMgUXVlcnlBcGkgY29uZmlndXJhdGlvbiBvcHRpb25zLiAqL1xuZXhwb3J0IGludGVyZmFjZSBRdWVyeU9wdGlvbnMge1xuICAvKipcbiAgICogU3BlY2lmaWVzIHRoZSBuYW1lIG9mIHRoZSBvcmdhbml6YXRpb24gZXhlY3V0aW5nIHRoZSBxdWVyeS4gVGFrZXMgZWl0aGVyIHRoZSBJRCBvciBOYW1lIGludGVyY2hhbmdlYWJseS5cbiAgICovXG4gIG9yZzogc3RyaW5nXG4gIC8qKlxuICAgKiBUeXBlIG9mIHRoZSBxdWVyeSwgZGVmYXVsdCBpcyBcImZsdXhcIlxuICAgKi9cbiAgdHlwZT86ICdmbHV4J1xuICAvKipcbiAgICogUmVxdWVzdHMgZ3ppcCBlbmNvZGVkIHJlc3BvbnNlLlxuICAgKi9cbiAgZ3ppcD86IGJvb2xlYW5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgdGltZSB0aGF0IHNob3VsZCBiZSByZXBvcnRlZCBhcyBcIm5vd1wiIGluIHRoZSBxdWVyeS4gUkZDMzMzOSB2YWx1ZSBtdXN0IGJlIHJldHVybmVkLFxuICAgKiBmb3IgZXhhbXBsZSBgbmV3IERhdGUoKS50b0lTT1N0cmluZygpYC5cbiAgICovXG4gIG5vdz86ICgpID0+IHN0cmluZ1xuICAvKipcbiAgICogSFRUUCBoZWFkZXJzIHRoYXQgd2lsbCBiZSBzZW50IHdpdGggZXZlcnkgcXVlcnkgcmVxdWVzdC5cbiAgICovXG4gIGhlYWRlcnM/OiB7W2tleTogc3RyaW5nXTogc3RyaW5nfVxufVxuXG4vKiogV3JhcHMgdmFsdWVzIGFuZCBhc3NvY2lhdGVkIG1ldGFkYXRhIG9mIGEgcXVlcnkgcmVzdWx0IHJvdyAqL1xuZXhwb3J0IGludGVyZmFjZSBSb3cge1xuICB2YWx1ZXM6IHN0cmluZ1tdXG4gIHRhYmxlTWV0YTogRmx1eFRhYmxlTWV0YURhdGFcbn1cblxuLyoqXG4gKiBRdWVyeSBJbmZsdXhEQiAyLjAuIFByb3ZpZGVzIG1ldGhvZHMgdGhhdCBub3RpZnkgYWJvdXRzIHJlc3VsdCBsaW5lcyBvZiB0aGUgZXhlY3V0ZWQgcXVlcnkuXG4gKiBTZWUge0BsaW5rIGh0dHBzOi8vdjIuZG9jcy5pbmZsdXhkYXRhLmNvbS92Mi4wL2FwaS8jb3BlcmF0aW9uL1Bvc3RRdWVyeSB9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGludGVyZmFjZSBRdWVyeUFwaSB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IHF1ZXJ5IEFQSSB3aXRoIGV4dHJhIG9wdGlvbnMgYXBwbGllZC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBxdWVyeSBvcHRpb25zIHRvIHVzZVxuICAgKiBAcmV0dXJucyBxdWVyeUFwaSBpbnN0YW5jZSB3aXRoIHRoZSBzdXBwbGllZCBvcHRpb25zXG4gICAqL1xuICB3aXRoKG9wdGlvbnM6IFBhcnRpYWw8UXVlcnlPcHRpb25zPik6IFF1ZXJ5QXBpXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb2xkIG9ic2VydmFibGUgb2YgdGhlIGxpbmVzIHJldHVybmVkIGJ5IHRoZSBnaXZlbiBxdWVyeS5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnlcbiAgICogQHJldHVybnMgb2JzZXJ2YWJsZSBvZiBDU1YgcmVzdWx0IGxpbmVzXG4gICAqL1xuICBsaW5lcyhxdWVyeTogc3RyaW5nIHwgUGFyYW1ldGVyaXplZFF1ZXJ5KTogT2JzZXJ2YWJsZTxzdHJpbmc+XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb2xkIG9ic2VydmFibGUgb2YgdGhlIHJvd3MgcmV0dXJuZWQgYnkgdGhlIGdpdmVuIHF1ZXJ5LlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnkgLSBxdWVyeVxuICAgKiBAcmV0dXJucyBvYnNlcnZhYmxlIG9mIHJlc3VsdCByb3dzXG4gICAqL1xuICByb3dzKHF1ZXJ5OiBzdHJpbmcgfCBQYXJhbWV0ZXJpemVkUXVlcnkpOiBPYnNlcnZhYmxlPFJvdz5cblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZWNlaXZlcyByZXN1bHQgbGluZXMgKGluY2x1ZGluZyBlbXB0eSBhbmQgYW5ub3RhdGlvbiBsaW5lcylcbiAgICogdGhyb3VnaCB0aGUgc3VwcGxpZWQgY29uc3VtZXIuIFNlZSBbYW5ub3RhdGVkLWNzdl0oaHR0cHM6Ly92Mi5kb2NzLmluZmx1eGRhdGEuY29tL3YyLjAvcmVmZXJlbmNlL3N5bnRheC9hbm5vdGF0ZWQtY3N2LykuXG4gICAqXG4gICAqIEBwYXJhbSBxdWVyeSAtIHF1ZXJ5XG4gICAqIEBwYXJhbSBjb25zdW1lciAtIGNzdiByZXN1bHQgbGluZXMgYW5kIGVycm9yIGNvbnN1bWVyXG4gICAqL1xuICBxdWVyeUxpbmVzKFxuICAgIHF1ZXJ5OiBzdHJpbmcgfCBQYXJhbWV0ZXJpemVkUXVlcnksXG4gICAgY29uc3VtZXI6IENvbW11bmljYXRpb25PYnNlcnZlcjxzdHJpbmc+XG4gICk6IHZvaWRcblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZWNlaXZlcyB0YWJsZSBtZXRhZGF0YSBhbmQgcm93cyB0aHJvdWdoIHRoZSBzdXBwbGllZCBjb25zdW1lci5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnlcbiAgICogQHBhcmFtIGNvbnN1bWVyIC0gcmVzdWx0IHJvd3MgYW5kIGVycm9yIGNvbnN1bWVyXG4gICAqL1xuICBxdWVyeVJvd3MoXG4gICAgcXVlcnk6IHN0cmluZyB8IFBhcmFtZXRlcml6ZWRRdWVyeSxcbiAgICBjb25zdW1lcjogRmx1eFJlc3VsdE9ic2VydmVyPHN0cmluZ1tdPlxuICApOiB2b2lkXG5cbiAgLyoqXG4gICAqIFF1ZXJ5UmF3IGV4ZWN1dGVzIGEgcXVlcnkgYW5kIHJldHVybnMgdGhlIGZ1bGwgcmVzcG9uc2UgYXMgYSBzdHJpbmcuXG4gICAqIFVzZSB3aXRoIGNhdXRpb24sIGEgcG9zc2libHkgaHVnZSBzdHJlYW0gaXMgY29waWVkIHRvIG1lbW9yeS5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnlcbiAgICogQHJldHVybnMgUHJvbWlzZSBvZiByZXNwb25zZSB0ZXh0XG4gICAqL1xuICBxdWVyeVJhdyhxdWVyeTogc3RyaW5nIHwgUGFyYW1ldGVyaXplZFF1ZXJ5KTogUHJvbWlzZTxzdHJpbmc+XG5cbiAgLyoqXG4gICAqIENvbGxlY3RSb3dzIGV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgY29sbGVjdHMgYWxsIHRoZSByZXN1bHRzIGluIHRoZSByZXR1cm5lZCBQcm9taXNlLlxuICAgKiBUaGlzIG1ldGhvZCBpcyBzdWl0YWJsZSB0byBjb2xsZWN0IHNpbXBsZSByZXN1bHRzLiBVc2Ugd2l0aCBjYXV0aW9uLFxuICAgKiBhIHBvc3NpYmx5IGh1Z2Ugc3RyZWFtIG9mIHJlc3VsdHMgaXMgY29waWVkIHRvIG1lbW9yeS5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnlcbiAgICogQHBhcmFtIHJvd01hcHBlciAtIG1hcHMgdGhlIHN1cHBsaWVkIHJvdyB0byBhbiBpdGVtIHRoYXQgaXMgdGhlbiBjb2xsZWN0ZWQsXG4gICAqICB1bmRlZmluZWQgcmV0dXJuIHZhbHVlcyBhcmUgbm90IGNvbGxlY3RlZC4gSWYgbm8gcm93TWFwcGVyIGlzIHN1cHBsaWVkLFxuICAgKiAgYHJvdyA9PiByb3cudGFibGVNZXRhLnRvT2JqZWN0KHJvdy52YWx1ZXMpYCBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyBQcm9taXNlIG9mIG1hcHBlZCByZXN1bHRzXG4gICAqL1xuICBjb2xsZWN0Um93czxUPihcbiAgICBxdWVyeTogc3RyaW5nIHwgUGFyYW1ldGVyaXplZFF1ZXJ5LFxuICAgIHJvd01hcHBlcj86IChcbiAgICAgIHZhbHVlczogc3RyaW5nW10sXG4gICAgICB0YWJsZU1ldGE6IEZsdXhUYWJsZU1ldGFEYXRhXG4gICAgKSA9PiBUIHwgdW5kZWZpbmVkXG4gICk6IFByb21pc2U8QXJyYXk8VD4+XG5cbiAgLyoqXG4gICAqIENvbGxlY3RMaW5lcyBleGVjdXRlcyB0aGUgcXVlcnkgYW5kIGNvbGxlY3RzIGFsbCByZXN1bHQgbGluZXMgaW4gdGhlIHJldHVybmVkIFByb21pc2UuXG4gICAqIFRoaXMgbWV0aG9kIGlzIHN1aXRhYmxlIHRvIGNvbGxlY3Qgc2ltcGxlIHJlc3VsdHMuIFVzZSB3aXRoIGNhdXRpb24sXG4gICAqIGEgcG9zc2libHkgaHVnZSBzdHJlYW0gb2YgbGluZXMgaXMgY29waWVkIHRvIG1lbW9yeS5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnlcbiAgICogQHJldHVybnMgUHJvbWlzZSBvZiByZXR1cm5lZCBjc3YgbGluZXNcbiAgICovXG4gIGNvbGxlY3RMaW5lcyhxdWVyeTogc3RyaW5nIHwgUGFyYW1ldGVyaXplZFF1ZXJ5KTogUHJvbWlzZTxBcnJheTxzdHJpbmc+PlxufVxuIiwiaW1wb3J0IHtcbiAgT2JzZXJ2YWJsZSxcbiAgT2JzZXJ2ZXIsXG4gIE9ic2VydmVyQ29tcGxldGUsXG4gIE9ic2VydmVyRXJyb3IsXG4gIE9ic2VydmVyTmV4dCxcbiAgU3Vic2NyaXB0aW9uLFxuICBzeW1ib2xPYnNlcnZhYmxlLFxufSBmcm9tICcuLi9vYnNlcnZhYmxlJ1xuaW1wb3J0IHtDYW5jZWxsYWJsZSwgQ29tbXVuaWNhdGlvbk9ic2VydmVyfSBmcm9tICcuLi9yZXN1bHRzJ1xuXG5leHBvcnQgdHlwZSBRdWVyeUV4ZWN1dG9yID0gKGNvbnN1bWVyOiBDb21tdW5pY2F0aW9uT2JzZXJ2ZXI8c3RyaW5nPikgPT4gdm9pZFxuXG50eXBlIERlY29yYXRvcjxUPiA9IChvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pID0+IE9ic2VydmVyPHN0cmluZz5cblxuY2xhc3MgUXVlcnlTdWJzY3JpcHRpb24gaW1wbGVtZW50cyBTdWJzY3JpcHRpb24ge1xuICBwcml2YXRlIGNhbmNlbGxhYmxlPzogQ2FuY2VsbGFibGVcbiAgcHJpdmF0ZSBpc0Nsb3NlZCA9IGZhbHNlXG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKG9ic2VydmVyOiBPYnNlcnZlcjxzdHJpbmc+LCBleGVjdXRvcjogUXVlcnlFeGVjdXRvcikge1xuICAgIHRyeSB7XG4gICAgICBleGVjdXRvcih7XG4gICAgICAgIG5leHQ6IHZhbHVlID0+IHtcbiAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZSA9PiB7XG4gICAgICAgICAgdGhpcy5pc0Nsb3NlZCA9IHRydWVcbiAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKVxuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuaXNDbG9zZWQgPSB0cnVlXG4gICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKVxuICAgICAgICB9LFxuICAgICAgICB1c2VDYW5jZWxsYWJsZTogYyA9PiB7XG4gICAgICAgICAgdGhpcy5jYW5jZWxsYWJsZSA9IGNcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5pc0Nsb3NlZCA9IHRydWVcbiAgICAgIG9ic2VydmVyLmVycm9yKGUpXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBjbG9zZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNDbG9zZWRcbiAgfVxuXG4gIHB1YmxpYyB1bnN1YnNjcmliZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNhbmNlbGxhYmxlPy5jYW5jZWwoKVxuICAgIHRoaXMuaXNDbG9zZWQgPSB0cnVlXG4gIH1cbn1cblxuZnVuY3Rpb24gbm9vcCgpOiB2b2lkIHt9XG5cbmZ1bmN0aW9uIGNvbXBsZXRlT2JzZXJ2ZXI8VD4ob2JzZXJ2ZXI6IFBhcnRpYWw8T2JzZXJ2ZXI8VD4+KTogT2JzZXJ2ZXI8VD4ge1xuICBjb25zdCB7bmV4dCwgZXJyb3IsIGNvbXBsZXRlfSA9IG9ic2VydmVyXG5cbiAgcmV0dXJuIHtcbiAgICBuZXh0OiBuZXh0ID8gbmV4dC5iaW5kKG9ic2VydmVyKSA6IG5vb3AsXG4gICAgZXJyb3I6IGVycm9yID8gZXJyb3IuYmluZChvYnNlcnZlcikgOiBub29wLFxuICAgIGNvbXBsZXRlOiBjb21wbGV0ZSA/IGNvbXBsZXRlLmJpbmQob2JzZXJ2ZXIpIDogbm9vcCxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPYnNlcnZhYmxlUXVlcnk8VD4gaW1wbGVtZW50cyBPYnNlcnZhYmxlPFQ+IHtcbiAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZXhlY3V0b3I6IFF1ZXJ5RXhlY3V0b3IsXG4gICAgcHJpdmF0ZSByZWFkb25seSBkZWNvcmF0b3I6IERlY29yYXRvcjxUPlxuICApIHt9XG5cbiAgcHVibGljIHN1YnNjcmliZShcbiAgICBvYnNlcnZlck9yTmV4dD86IFBhcnRpYWw8T2JzZXJ2ZXI8VD4+IHwgT2JzZXJ2ZXJOZXh0PFQ+LFxuICAgIGVycm9yPzogT2JzZXJ2ZXJFcnJvcixcbiAgICBjb21wbGV0ZT86IE9ic2VydmVyQ29tcGxldGVcbiAgKTogU3Vic2NyaXB0aW9uIHtcbiAgICBjb25zdCBvYnNlcnZlciA9IGNvbXBsZXRlT2JzZXJ2ZXIoXG4gICAgICB0eXBlb2Ygb2JzZXJ2ZXJPck5leHQgIT09ICdvYmplY3QnIHx8IG9ic2VydmVyT3JOZXh0ID09PSBudWxsXG4gICAgICAgID8ge25leHQ6IG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGV9XG4gICAgICAgIDogb2JzZXJ2ZXJPck5leHRcbiAgICApXG5cbiAgICByZXR1cm4gbmV3IFF1ZXJ5U3Vic2NyaXB0aW9uKHRoaXMuZGVjb3JhdG9yKG9ic2VydmVyKSwgdGhpcy5leGVjdXRvcilcbiAgfVxuXG4gIHB1YmxpYyBbc3ltYm9sT2JzZXJ2YWJsZV0oKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuIiwiaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICcuLi9vYnNlcnZhYmxlJ1xuaW1wb3J0IFF1ZXJ5QXBpLCB7UXVlcnlPcHRpb25zLCBSb3csIGRlZmF1bHRSb3dNYXBwaW5nfSBmcm9tICcuLi9RdWVyeUFwaSdcbmltcG9ydCB7VHJhbnNwb3J0fSBmcm9tICcuLi90cmFuc3BvcnQnXG5pbXBvcnQge2NodW5rc1RvTGluZXN9IGZyb20gJy4uL3Jlc3VsdHMnXG5pbXBvcnQge1xuICBDb21tdW5pY2F0aW9uT2JzZXJ2ZXIsXG4gIEZsdXhSZXN1bHRPYnNlcnZlcixcbiAgRmx1eFRhYmxlTWV0YURhdGEsXG4gIGxpbmVzVG9UYWJsZXMsXG59IGZyb20gJy4uL3Jlc3VsdHMnXG5pbXBvcnQgT2JzZXJ2YWJsZVF1ZXJ5LCB7UXVlcnlFeGVjdXRvcn0gZnJvbSAnLi9PYnNlcnZhYmxlUXVlcnknXG5pbXBvcnQge1BhcmFtZXRlcml6ZWRRdWVyeX0gZnJvbSAnLi4vcXVlcnkvZmx1eCdcblxuY29uc3QgREVGQVVMVF9kaWFsZWN0OiBhbnkgPSB7XG4gIGhlYWRlcjogdHJ1ZSxcbiAgZGVsaW1pdGVyOiAnLCcsXG4gIHF1b3RlQ2hhcjogJ1wiJyxcbiAgY29tbWVudFByZWZpeDogJyMnLFxuICBhbm5vdGF0aW9uczogWydkYXRhdHlwZScsICdncm91cCcsICdkZWZhdWx0J10sXG59XG5jb25zdCBpZGVudGl0eSA9IDxUPih2YWx1ZTogVCk6IFQgPT4gdmFsdWVcblxuZXhwb3J0IGNsYXNzIFF1ZXJ5QXBpSW1wbCBpbXBsZW1lbnRzIFF1ZXJ5QXBpIHtcbiAgcHJpdmF0ZSBvcHRpb25zOiBRdWVyeU9wdGlvbnNcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB0cmFuc3BvcnQ6IFRyYW5zcG9ydCwgb3JnOiBzdHJpbmcgfCBRdWVyeU9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB0eXBlb2Ygb3JnID09PSAnc3RyaW5nJyA/IHtvcmd9IDogb3JnXG4gIH1cblxuICB3aXRoKG9wdGlvbnM6IFBhcnRpYWw8UXVlcnlPcHRpb25zPik6IFF1ZXJ5QXBpIHtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5QXBpSW1wbCh0aGlzLnRyYW5zcG9ydCwgey4uLnRoaXMub3B0aW9ucywgLi4ub3B0aW9uc30pXG4gIH1cblxuICBsaW5lcyhxdWVyeTogc3RyaW5nIHwgUGFyYW1ldGVyaXplZFF1ZXJ5KTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGVRdWVyeSh0aGlzLmNyZWF0ZUV4ZWN1dG9yKHF1ZXJ5KSwgaWRlbnRpdHkpXG4gIH1cblxuICByb3dzKHF1ZXJ5OiBzdHJpbmcgfCBQYXJhbWV0ZXJpemVkUXVlcnkpOiBPYnNlcnZhYmxlPFJvdz4ge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZVF1ZXJ5KHRoaXMuY3JlYXRlRXhlY3V0b3IocXVlcnkpLCBvYnNlcnZlciA9PiB7XG4gICAgICByZXR1cm4gbGluZXNUb1RhYmxlcyh7XG4gICAgICAgIG5leHQodmFsdWVzLCB0YWJsZU1ldGEpIHtcbiAgICAgICAgICBvYnNlcnZlci5uZXh0KHt2YWx1ZXMsIHRhYmxlTWV0YX0pXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yKGUpIHtcbiAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKVxuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZSgpIHtcbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBxdWVyeUxpbmVzKFxuICAgIHF1ZXJ5OiBzdHJpbmcgfCBQYXJhbWV0ZXJpemVkUXVlcnksXG4gICAgY29uc3VtZXI6IENvbW11bmljYXRpb25PYnNlcnZlcjxzdHJpbmc+XG4gICk6IHZvaWQge1xuICAgIHRoaXMuY3JlYXRlRXhlY3V0b3IocXVlcnkpKGNvbnN1bWVyKVxuICB9XG5cbiAgcXVlcnlSb3dzKFxuICAgIHF1ZXJ5OiBzdHJpbmcgfCBQYXJhbWV0ZXJpemVkUXVlcnksXG4gICAgY29uc3VtZXI6IEZsdXhSZXN1bHRPYnNlcnZlcjxzdHJpbmdbXT5cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5jcmVhdGVFeGVjdXRvcihxdWVyeSkobGluZXNUb1RhYmxlcyhjb25zdW1lcikpXG4gIH1cblxuICBjb2xsZWN0Um93czxUPihcbiAgICBxdWVyeTogc3RyaW5nIHwgUGFyYW1ldGVyaXplZFF1ZXJ5LFxuICAgIHJvd01hcHBlcjogKFxuICAgICAgdmFsdWVzOiBzdHJpbmdbXSxcbiAgICAgIHRhYmxlTWV0YTogRmx1eFRhYmxlTWV0YURhdGFcbiAgICApID0+IFQgfCB1bmRlZmluZWQgPSBkZWZhdWx0Um93TWFwcGluZyBhcyAoXG4gICAgICB2YWx1ZXM6IHN0cmluZ1tdLFxuICAgICAgdGFibGVNZXRhOiBGbHV4VGFibGVNZXRhRGF0YVxuICAgICkgPT4gVCB8IHVuZGVmaW5lZFxuICApOiBQcm9taXNlPEFycmF5PFQ+PiB7XG4gICAgY29uc3QgcmV0VmFsOiBBcnJheTxUPiA9IFtdXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMucXVlcnlSb3dzKHF1ZXJ5LCB7XG4gICAgICAgIG5leHQodmFsdWVzOiBzdHJpbmdbXSwgdGFibGVNZXRhOiBGbHV4VGFibGVNZXRhRGF0YSk6IHZvaWQge1xuICAgICAgICAgIGNvbnN0IHRvQWRkID0gcm93TWFwcGVyLmNhbGwodGhpcywgdmFsdWVzLCB0YWJsZU1ldGEpXG4gICAgICAgICAgaWYgKHRvQWRkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldFZhbC5wdXNoKHRvQWRkKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IoZXJyb3I6IEVycm9yKTogdm9pZCB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZSgpOiB2b2lkIHtcbiAgICAgICAgICByZXNvbHZlKHJldFZhbClcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGNvbGxlY3RMaW5lcyhxdWVyeTogc3RyaW5nIHwgUGFyYW1ldGVyaXplZFF1ZXJ5KTogUHJvbWlzZTxBcnJheTxzdHJpbmc+PiB7XG4gICAgY29uc3QgcmV0VmFsOiBBcnJheTxzdHJpbmc+ID0gW11cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5xdWVyeUxpbmVzKHF1ZXJ5LCB7XG4gICAgICAgIG5leHQobGluZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgICAgcmV0VmFsLnB1c2gobGluZSlcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IoZXJyb3I6IEVycm9yKTogdm9pZCB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZSgpOiB2b2lkIHtcbiAgICAgICAgICByZXNvbHZlKHJldFZhbClcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHF1ZXJ5UmF3KHF1ZXJ5OiBzdHJpbmcgfCBQYXJhbWV0ZXJpemVkUXVlcnkpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHtvcmcsIHR5cGUsIGd6aXAsIGhlYWRlcnN9ID0gdGhpcy5vcHRpb25zXG4gICAgcmV0dXJuIHRoaXMudHJhbnNwb3J0LnJlcXVlc3QoXG4gICAgICBgL2FwaS92Mi9xdWVyeT9vcmc9JHtlbmNvZGVVUklDb21wb25lbnQob3JnKX1gLFxuICAgICAgSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIHRoaXMuZGVjb3JhdGVSZXF1ZXN0KHtcbiAgICAgICAgICBxdWVyeTogcXVlcnkudG9TdHJpbmcoKSxcbiAgICAgICAgICBkaWFsZWN0OiBERUZBVUxUX2RpYWxlY3QsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYWNjZXB0OiAndGV4dC9jc3YnLFxuICAgICAgICAgICdhY2NlcHQtZW5jb2RpbmcnOiBnemlwID8gJ2d6aXAnIDogJ2lkZW50aXR5JyxcbiAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGVuY29kaW5nPXV0Zi04JyxcbiAgICAgICAgICAuLi5oZWFkZXJzLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRXhlY3V0b3IocXVlcnk6IHN0cmluZyB8IFBhcmFtZXRlcml6ZWRRdWVyeSk6IFF1ZXJ5RXhlY3V0b3Ige1xuICAgIGNvbnN0IHtvcmcsIHR5cGUsIGd6aXAsIGhlYWRlcnN9ID0gdGhpcy5vcHRpb25zXG5cbiAgICByZXR1cm4gKGNvbnN1bWVyKTogdm9pZCA9PiB7XG4gICAgICB0aGlzLnRyYW5zcG9ydC5zZW5kKFxuICAgICAgICBgL2FwaS92Mi9xdWVyeT9vcmc9JHtlbmNvZGVVUklDb21wb25lbnQob3JnKX1gLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICB0aGlzLmRlY29yYXRlUmVxdWVzdCh7XG4gICAgICAgICAgICBxdWVyeTogcXVlcnkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGRpYWxlY3Q6IERFRkFVTFRfZGlhbGVjdCxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgfSlcbiAgICAgICAgKSxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgZW5jb2Rpbmc9dXRmLTgnLFxuICAgICAgICAgICAgJ2FjY2VwdC1lbmNvZGluZyc6IGd6aXAgPyAnZ3ppcCcgOiAnaWRlbnRpdHknLFxuICAgICAgICAgICAgLi4uaGVhZGVycyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBjaHVua3NUb0xpbmVzKGNvbnN1bWVyLCB0aGlzLnRyYW5zcG9ydC5jaHVua0NvbWJpbmVyKVxuICAgICAgKVxuICAgIH1cbiAgfVxuICBwcml2YXRlIGRlY29yYXRlUmVxdWVzdChyZXF1ZXN0OiBhbnkpOiBhbnkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm5vdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVxdWVzdC5ub3cgPSB0aGlzLm9wdGlvbnMubm93KClcbiAgICB9XG4gICAgLy8gaHR0cHM6Ly92Mi5kb2NzLmluZmx1eGRhdGEuY29tL3YyLjAvYXBpLyNvcGVyYXRpb24vUG9zdFF1ZXJ5IHJlcXVpcmVzIHR5cGVcbiAgICByZXF1ZXN0LnR5cGUgPSB0aGlzLm9wdGlvbnMudHlwZSA/PyAnZmx1eCdcbiAgICByZXR1cm4gcmVxdWVzdFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFF1ZXJ5QXBpSW1wbFxuIiwiaW1wb3J0IFdyaXRlQXBpIGZyb20gJy4vV3JpdGVBcGknXG5pbXBvcnQge0NsaWVudE9wdGlvbnMsIFdyaXRlT3B0aW9ucywgV3JpdGVQcmVjaXNpb25UeXBlfSBmcm9tICcuL29wdGlvbnMnXG5pbXBvcnQgV3JpdGVBcGlJbXBsIGZyb20gJy4vaW1wbC9Xcml0ZUFwaUltcGwnXG5pbXBvcnQge0lsbGVnYWxBcmd1bWVudEVycm9yfSBmcm9tICcuL2Vycm9ycydcbmltcG9ydCB7VHJhbnNwb3J0fSBmcm9tICcuL3RyYW5zcG9ydCdcbi8vIHJlcGxhY2VkIGJ5IC4vaW1wbC9icm93c2VyL0ZldGNoVHJhbnNwb3J0IGluIGJyb3dzZXIgYnVpbGRzXG5pbXBvcnQgVHJhbnNwb3J0SW1wbCBmcm9tICcuL2ltcGwvbm9kZS9Ob2RlSHR0cFRyYW5zcG9ydCdcbmltcG9ydCBRdWVyeUFwaSwge1F1ZXJ5T3B0aW9uc30gZnJvbSAnLi9RdWVyeUFwaSdcbmltcG9ydCBRdWVyeUFwaUltcGwgZnJvbSAnLi9pbXBsL1F1ZXJ5QXBpSW1wbCdcblxuLyoqXG4gKiBJbmZsdXhEQiAyLjAgZW50cnkgcG9pbnQgdGhhdCBjb25maWd1cmVzIGNvbW11bmljYXRpb24gd2l0aCBJbmZsdXhEQiBzZXJ2ZXJcbiAqIGFuZCBwcm92aWRlIEFQSXMgdG8gd3JpdGUgYW5kIHF1ZXJ5IGRhdGEuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluZmx1eERCIHtcbiAgcHJpdmF0ZSBfb3B0aW9uczogQ2xpZW50T3B0aW9uc1xuICByZWFkb25seSB0cmFuc3BvcnQ6IFRyYW5zcG9ydFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGluZmx1eGRiIGNsaWVudCBvcHRpb25zIGZyb20gYW4gb3B0aW9ucyBvYmplY3Qgb3IgdXJsLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGNsaWVudCBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBDbGllbnRPcHRpb25zIHwgc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5fb3B0aW9ucyA9IHt1cmw6IG9wdGlvbnN9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykge1xuICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEVycm9yKCdObyB1cmwgb3IgY29uZmlndXJhdGlvbiBzcGVjaWZpZWQhJylcbiAgICB9XG4gICAgY29uc3QgdXJsID0gdGhpcy5fb3B0aW9ucy51cmxcbiAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpXG4gICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXJyb3IoJ05vIHVybCBzcGVjaWZpZWQhJylcbiAgICBpZiAodXJsLmVuZHNXaXRoKCcvJykpIHRoaXMuX29wdGlvbnMudXJsID0gdXJsLnN1YnN0cmluZygwLCB1cmwubGVuZ3RoIC0gMSlcbiAgICB0aGlzLnRyYW5zcG9ydCA9IHRoaXMuX29wdGlvbnMudHJhbnNwb3J0ID8/IG5ldyBUcmFuc3BvcnRJbXBsKHRoaXMuX29wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBXcml0ZUFwaSBmb3IgdGhlIHN1cHBsaWVkIG9yZ2FuaXphdGlvbiBhbmQgYnVja2V0LiBCRVdBUkUgdGhhdCByZXR1cm5lZCBpbnN0YW5jZXMgbXVzdCBiZSBjbG9zZWRcbiAgICogaW4gb3JkZXIgdG8gZmx1c2ggdGhlIHJlbWFpbmluZyBkYXRhIGFuZCBjbG9zZSBhbHJlYWR5IHNjaGVkdWxlZCByZXRyeSBleGVjdXRpb25zLlxuICAgKlxuICAgKiBAcmVtYXJrc1xuICAgKiBJbnNwZWN0IHRoZSB7QGxpbmsgV3JpdGVPcHRpb25zfSB0byBjb250cm9sIGFsc28gYWR2YW5jZWQgb3B0aW9ucywgc3VjaCByZXRyaWVzIG9mIGZhaWx1cmUsIHJldHJ5IHN0cmF0ZWd5IG9wdGlvbnMsIGRhdGEgY2h1bmtpbmdcbiAgICogYW5kIGZsdXNoaW5nIHdpbmRvd3MuIFNlZSB7QGxpbmsgREVGQVVMVF9Xcml0ZU9wdGlvbnN9IHRvIHNlZSB0aGUgZGVmYXVsdHMuXG4gICAqXG4gICAqIFNlZSBhbHNvIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5mbHV4ZGF0YS9pbmZsdXhkYi1jbGllbnQtanMvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvd3JpdGUuanMgfCB3cml0ZS5qcyBleGFtcGxlfSxcbiAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmZsdXhkYXRhL2luZmx1eGRiLWNsaWVudC1qcy9ibG9iL21hc3Rlci9leGFtcGxlcy93cml0ZUFkdmFuY2VkLmpzIHwgd3JpdGVBZHZhbmNlZC5qcyBleGFtcGxlfSxcbiAgICogYW5kIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5mbHV4ZGF0YS9pbmZsdXhkYi1jbGllbnQtanMvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvaW5kZXguaHRtbCB8IGJyb3dzZXIgZXhhbXBsZX0uXG4gICAqXG4gICAqIEBwYXJhbSBvcmcgLSBTcGVjaWZpZXMgdGhlIGRlc3RpbmF0aW9uIG9yZ2FuaXphdGlvbiBmb3Igd3JpdGVzLiBUYWtlcyBlaXRoZXIgdGhlIElEIG9yIE5hbWUgaW50ZXJjaGFuZ2VhYmx5LlxuICAgKiBAcGFyYW0gYnVja2V0IC0gVGhlIGRlc3RpbmF0aW9uIGJ1Y2tldCBmb3Igd3JpdGVzLlxuICAgKiBAcGFyYW0gcHJlY2lzaW9uIC0gVGltZXN0YW1wIHByZWNpc2lvbiBmb3IgbGluZSBpdGVtcy5cbiAgICogQHBhcmFtIHdyaXRlT3B0aW9ucyAtIEN1c3RvbSB3cml0ZSBvcHRpb25zLlxuICAgKiBAcmV0dXJucyBXcml0ZUFwaSBpbnN0YW5jZVxuICAgKi9cbiAgZ2V0V3JpdGVBcGkoXG4gICAgb3JnOiBzdHJpbmcsXG4gICAgYnVja2V0OiBzdHJpbmcsXG4gICAgcHJlY2lzaW9uOiBXcml0ZVByZWNpc2lvblR5cGUgPSAnbnMnLFxuICAgIHdyaXRlT3B0aW9ucz86IFBhcnRpYWw8V3JpdGVPcHRpb25zPlxuICApOiBXcml0ZUFwaSB7XG4gICAgcmV0dXJuIG5ldyBXcml0ZUFwaUltcGwoXG4gICAgICB0aGlzLnRyYW5zcG9ydCxcbiAgICAgIG9yZyxcbiAgICAgIGJ1Y2tldCxcbiAgICAgIHByZWNpc2lvbixcbiAgICAgIHdyaXRlT3B0aW9ucyA/PyB0aGlzLl9vcHRpb25zLndyaXRlT3B0aW9uc1xuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIFF1ZXJ5QXBpIGZvciB0aGUgc3VwcGxpZWQgb3JnYW5pemF0aW9uIC5cbiAgICpcbiAgICogQHJlbWFya3NcbiAgICogU2VlIGFsc28ge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmZsdXhkYXRhL2luZmx1eGRiLWNsaWVudC1qcy9ibG9iL21hc3Rlci9leGFtcGxlcy9xdWVyeS50cyB8IHF1ZXJ5LnRzIGV4YW1wbGV9LFxuICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZmx1eGRhdGEvaW5mbHV4ZGItY2xpZW50LWpzL2Jsb2IvbWFzdGVyL2V4YW1wbGVzL3F1ZXJ5V2l0aFBhcmFtcy50cyB8IHF1ZXJ5V2l0aFBhcmFtcy50cyBleGFtcGxlfSxcbiAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmZsdXhkYXRhL2luZmx1eGRiLWNsaWVudC1qcy9ibG9iL21hc3Rlci9leGFtcGxlcy9yeGpzLXF1ZXJ5LnRzIHwgcnhqcy1xdWVyeS50cyBleGFtcGxlfSxcbiAgICogYW5kIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5mbHV4ZGF0YS9pbmZsdXhkYi1jbGllbnQtanMvYmxvYi9tYXN0ZXIvZXhhbXBsZXMvaW5kZXguaHRtbCB8IGJyb3dzZXIgZXhhbXBsZX0sXG4gICAqXG4gICAqIEBwYXJhbSBvcmcgLSBvcmdhbml6YXRpb24gb3IgcXVlcnkgb3B0aW9uc1xuICAgKiBAcmV0dXJucyBRdWVyeUFwaSBpbnN0YW5jZVxuICAgKi9cbiAgZ2V0UXVlcnlBcGkob3JnOiBzdHJpbmcgfCBRdWVyeU9wdGlvbnMpOiBRdWVyeUFwaSB7XG4gICAgcmV0dXJuIG5ldyBRdWVyeUFwaUltcGwodGhpcy50cmFuc3BvcnQsIG9yZylcbiAgfVxufVxuIiwiaW1wb3J0IHtlc2NhcGV9IGZyb20gJy4vdXRpbC9lc2NhcGUnXG5cbi8qKlxuICogU2V0dGluZ3MgdGhhdCBjb250cm9sIHRoZSB3YXkgb2YgaG93IGEge0BsaW5rIFBvaW50fSBpcyBzZXJpYWxpemVkXG4gKiB0byBhIHByb3RvY29sIGxpbmUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnRTZXR0aW5ncyB7XG4gIGRlZmF1bHRUYWdzPzoge1trZXk6IHN0cmluZ106IHN0cmluZ31cbiAgY29udmVydFRpbWU/OiAoXG4gICAgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IERhdGUgfCB1bmRlZmluZWRcbiAgKSA9PiBzdHJpbmcgfCB1bmRlZmluZWRcbn1cblxuLyoqXG4gKiBQb2ludCBkZWZpbmVzIHZhbHVlcyBvZiBhIHNpbmdsZSBtZWFzdXJlbWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIFBvaW50IHtcbiAgcHJpdmF0ZSBuYW1lOiBzdHJpbmdcbiAgcHJpdmF0ZSB0YWdzOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfSA9IHt9XG4gIC8qKiBlc2NhcGVkIGZpZWxkIHZhbHVlcyAqL1xuICBwdWJsaWMgZmllbGRzOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfSA9IHt9XG4gIHByaXZhdGUgdGltZTogc3RyaW5nIHwgbnVtYmVyIHwgRGF0ZSB8IHVuZGVmaW5lZFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgUG9pbnQgd2l0aCBzcGVjaWZpZWQgYSBtZWFzdXJlbWVudCBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gbWVhc3VyZW1lbnROYW1lIC0gdGhlIG1lYXN1cmVtZW50IG5hbWVcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1lYXN1cmVtZW50TmFtZT86IHN0cmluZykge1xuICAgIGlmIChtZWFzdXJlbWVudE5hbWUpIHRoaXMubmFtZSA9IG1lYXN1cmVtZW50TmFtZVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgcG9pbnQncyBtZWFzdXJlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBtZWFzdXJlbWVudCBuYW1lXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICovXG4gIHB1YmxpYyBtZWFzdXJlbWVudChuYW1lOiBzdHJpbmcpOiBQb2ludCB7XG4gICAgdGhpcy5uYW1lID0gbmFtZVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHRhZy5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSB0YWcgbmFtZVxuICAgKiBAcGFyYW0gdmFsdWUgLSB0YWcgdmFsdWVcbiAgICogQHJldHVybnMgdGhpc1xuICAgKi9cbiAgcHVibGljIHRhZyhuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBQb2ludCB7XG4gICAgdGhpcy50YWdzW25hbWVdID0gdmFsdWVcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBib29sZWFuIGZpZWxkLlxuICAgKlxuICAgKiBAcGFyYW0gZmllbGQgLSBmaWVsZCBuYW1lXG4gICAqIEBwYXJhbSB2YWx1ZSAtIGZpZWxkIHZhbHVlXG4gICAqIEByZXR1cm5zIHRoaXNcbiAgICovXG4gIHB1YmxpYyBib29sZWFuRmllbGQobmFtZTogc3RyaW5nLCB2YWx1ZTogYm9vbGVhbiB8IGFueSk6IFBvaW50IHtcbiAgICB0aGlzLmZpZWxkc1tuYW1lXSA9IHZhbHVlID8gJ1QnIDogJ0YnXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGludGVnZXIgZmllbGQuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gZmllbGQgbmFtZVxuICAgKiBAcGFyYW0gdmFsdWUgLSBmaWVsZCB2YWx1ZVxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqL1xuICBwdWJsaWMgaW50RmllbGQobmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIHwgYW55KTogUG9pbnQge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICBsZXQgdmFsOiBudW1iZXJcbiAgICAgIGlmIChpc05hTigodmFsID0gcGFyc2VJbnQoU3RyaW5nKHZhbHVlKSkpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEV4cGVjdGVkIGludGVnZXIgdmFsdWUgZm9yIGZpZWxkICR7bmFtZX0sIGJ1dCBnb3QgJyR7dmFsdWV9JyFgXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsXG4gICAgfVxuICAgIHRoaXMuZmllbGRzW25hbWVdID0gYCR7TWF0aC5mbG9vcih2YWx1ZSBhcyBudW1iZXIpfWlgXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgbnVtYmVyIGZpZWxkLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIGZpZWxkIG5hbWVcbiAgICogQHBhcmFtIHZhbHVlIC0gZmllbGQgdmFsdWVcbiAgICogQHJldHVybnMgdGhpc1xuICAgKi9cbiAgcHVibGljIGZsb2F0RmllbGQobmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIHwgYW55KTogUG9pbnQge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICBsZXQgdmFsOiBudW1iZXJcbiAgICAgIGlmIChpc05hTigodmFsID0gcGFyc2VGbG9hdCh2YWx1ZSkpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEV4cGVjdGVkIGZsb2F0IHZhbHVlIGZvciBmaWVsZCAke25hbWV9LCBidXQgZ290ICcke3ZhbHVlfSchYFxuICAgICAgICApXG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbFxuICAgIH1cbiAgICB0aGlzLmZpZWxkc1tuYW1lXSA9IFN0cmluZyh2YWx1ZSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzdHJpbmcgZmllbGQuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gZmllbGQgbmFtZVxuICAgKiBAcGFyYW0gdmFsdWUgLSBmaWVsZCB2YWx1ZVxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqL1xuICBwdWJsaWMgc3RyaW5nRmllbGQobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIHwgYW55KTogUG9pbnQge1xuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gICAgICB0aGlzLmZpZWxkc1tuYW1lXSA9IGVzY2FwZS5xdW90ZWQodmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogU2V0cyBwb2ludCB0aW1lc3RhbXAuIFRpbWVzdGFtcCBjYW4gYmUgc3BlY2lmaWVkIGFzIGEgRGF0ZSAocHJlZmVycmVkKSwgbnVtYmVyLCBzdHJpbmdcbiAgICogb3IgYW4gdW5kZWZpbmVkIHZhbHVlLiBBbiB1bmRlZmluZWQgdmFsdWUgaW5zdHJ1Y3RzIHRvIGFzc2lnbiBhIGxvY2FsIHRpbWVzdGFtcCB1c2luZ1xuICAgKiB0aGUgY2xpZW50J3MgY2xvY2suIEFuIGVtcHR5IHN0cmluZyBjYW4gYmUgdXNlZCB0byBsZXQgdGhlIHNlcnZlciBhc3NpZ25cbiAgICogdGhlIHRpbWVzdGFtcC4gQSBudW1iZXIgdmFsdWUgcmVwcmVzZW50cyB0aW1lIGFzIGEgY291bnQgb2YgdGltZSB1bml0cyBzaW5jZSBlcG9jaC5cbiAgICogVGhlIGN1cnJlbnQgdGltZSBpbiBuYW5vc2Vjb25kcyBjYW4ndCBwcmVjaXNlbHkgZml0IGludG8gYSBKUyBudW1iZXIsIHdoaWNoXG4gICAqIGNhbiBob2xkIGF0IG1vc3QgMl41MyBpbnRlZ2VyIG51bWJlci4gTmFub3NlY29uZCBwcmVjaXNpb24gbnVtYmVycyBhcmUgdGh1cyBzdXBwbGllZCBhc1xuICAgKiBhIChiYXNlLTEwKSBzdHJpbmcuIEFuIGFwcGxpY2F0aW9uIGNhbiB1c2UgRVMyMDIwIEJpZ0ludCB0byByZXByZXNlbnQgbmFub3NlY29uZHMsXG4gICAqIEJpZ0ludCdzIGB0b1N0cmluZygpYCByZXR1cm5zIHRoZSByZXF1aXJlZCBoaWdoLXByZWNpc2lvbiBzdHJpbmcuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBJbmZsdXhEQiByZXF1aXJlcyB0aGUgdGltZXN0YW1wIHRvIGZpdCBpbnRvIGludDY0IGRhdGEgdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHZhbHVlIC0gcG9pbnQgdGltZVxuICAgKiBAcmV0dXJucyB0aGlzXG4gICAqL1xuICBwdWJsaWMgdGltZXN0YW1wKHZhbHVlOiBEYXRlIHwgbnVtYmVyIHwgc3RyaW5nIHwgdW5kZWZpbmVkKTogUG9pbnQge1xuICAgIHRoaXMudGltZSA9IHZhbHVlXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIEluZmx1eERCIHByb3RvY29sIGxpbmUgb3V0IG9mIHRoaXMgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSBzZXR0aW5ncyAtIHNldHRpbmdzIGRlZmluZSB0aGUgZXhhY3QgcmVwcmVzZW50YXRpb24gb2YgcG9pbnQgdGltZSBhbmQgY2FuIGFsc28gYWRkIGRlZmF1bHQgdGFnc1xuICAgKiBAcmV0dXJucyBhbiBJbmZsdXhEQiBwcm90b2NvbCBsaW5lIG91dCBvZiB0aGlzIGluc3RhbmNlXG4gICAqL1xuICBwdWJsaWMgdG9MaW5lUHJvdG9jb2woc2V0dGluZ3M/OiBQb2ludFNldHRpbmdzKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMubmFtZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGxldCBmaWVsZHNMaW5lID0gJydcbiAgICBPYmplY3Qua2V5cyh0aGlzLmZpZWxkcylcbiAgICAgIC5zb3J0KClcbiAgICAgIC5mb3JFYWNoKHggPT4ge1xuICAgICAgICBpZiAoeCkge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZmllbGRzW3hdXG4gICAgICAgICAgaWYgKGZpZWxkc0xpbmUubGVuZ3RoID4gMCkgZmllbGRzTGluZSArPSAnLCdcbiAgICAgICAgICBmaWVsZHNMaW5lICs9IGAke2VzY2FwZS50YWcoeCl9PSR7dmFsfWBcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICBpZiAoZmllbGRzTGluZS5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWQgLy8gbm8gZmllbGRzIHByZXNlbnRcbiAgICBsZXQgdGFnc0xpbmUgPSAnJ1xuICAgIGNvbnN0IHRhZ3MgPVxuICAgICAgc2V0dGluZ3MgJiYgc2V0dGluZ3MuZGVmYXVsdFRhZ3NcbiAgICAgICAgPyB7Li4uc2V0dGluZ3MuZGVmYXVsdFRhZ3MsIC4uLnRoaXMudGFnc31cbiAgICAgICAgOiB0aGlzLnRhZ3NcbiAgICBPYmplY3Qua2V5cyh0YWdzKVxuICAgICAgLnNvcnQoKVxuICAgICAgLmZvckVhY2goeCA9PiB7XG4gICAgICAgIGlmICh4KSB7XG4gICAgICAgICAgY29uc3QgdmFsID0gdGFnc1t4XVxuICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgIHRhZ3NMaW5lICs9ICcsJ1xuICAgICAgICAgICAgdGFnc0xpbmUgKz0gYCR7ZXNjYXBlLnRhZyh4KX09JHtlc2NhcGUudGFnKHZhbCl9YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICBsZXQgdGltZSA9IHRoaXMudGltZVxuICAgIGlmIChzZXR0aW5ncyAmJiBzZXR0aW5ncy5jb252ZXJ0VGltZSkge1xuICAgICAgdGltZSA9IHNldHRpbmdzLmNvbnZlcnRUaW1lKHRpbWUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGAke2VzY2FwZS5tZWFzdXJlbWVudCh0aGlzLm5hbWUpfSR7dGFnc0xpbmV9ICR7ZmllbGRzTGluZX0ke1xuICAgICAgdGltZSAhPT0gdW5kZWZpbmVkID8gJyAnICsgdGltZSA6ICcnXG4gICAgfWBcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMudG9MaW5lUHJvdG9jb2wodW5kZWZpbmVkKVxuICAgIHJldHVybiBsaW5lID8gbGluZSA6IGBpbnZhbGlkIHBvaW50OiAke0pTT04uc3RyaW5naWZ5KHRoaXMsIHVuZGVmaW5lZCl9YFxuICB9XG59XG4iLCJpbXBvcnQge0NvbW11bmljYXRpb25PYnNlcnZlcn0gZnJvbSAnLi9Db21tdW5pY2F0aW9uT2JzZXJ2ZXInXG5cbi8qKlxuICogU3RyaW5nVG9MaW5lcyBpcyBhIHRyYW5zZm9ybWF0aW9uIHRoYXQgZW1taXRzIHN0cmluZ3MgZm9yIGVhY2ggQ1NWXG4gKiBsaW5lIGluIHRoZSBzdXBwbGllZCBzb3VyY2Ugc3RyaW5nLlxuICogQHBhcmFtIHNvdXJjZSAtIHNvdXJjZSBzdHJpbmdcbiAqIEBwYXJhbSB0YXJnZXQgLSB0YXJnZXQgdG8gZW1taXQgQ1NWIGxpbmVzIHRvXG4gKiBAcmV0dXJucyBjb21tdW5pY2F0aW9uIG9icnZlciB0byBhY2NlcHQgVWludDhBcnJheXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvTGluZXMoXG4gIHNvdXJjZTogc3RyaW5nLFxuICB0YXJnZXQ6IENvbW11bmljYXRpb25PYnNlcnZlcjxzdHJpbmc+XG4pOiB2b2lkIHtcbiAgbGV0IHF1b3RlZCA9IGZhbHNlXG4gIGxldCBzdGFydCA9IDBcbiAgbGV0IGluZGV4ID0gMFxuXG4gIHdoaWxlIChpbmRleCA8IHNvdXJjZS5sZW5ndGgpIHtcbiAgICBjb25zdCBjID0gc291cmNlLmNoYXJDb2RlQXQoaW5kZXgpXG4gICAgaWYgKGMgPT09IDEwKSB7XG4gICAgICBpZiAoIXF1b3RlZCkge1xuICAgICAgICAvKiBkbyBub3QgZW1pdCBDUitMUiBvciBMRiBsaW5lIGVuZGluZyAqL1xuICAgICAgICBjb25zdCBlbmQgPVxuICAgICAgICAgIGluZGV4ID4gMCAmJiBzb3VyY2UuY2hhckNvZGVBdChpbmRleCAtIDEpID09PSAxMyA/IGluZGV4IC0gMSA6IGluZGV4XG4gICAgICAgIC8vIGRvIG5vdCBlbW1pdCBtb3JlIGxpbmVzIGlmIHRoZSBwcm9jZXNzaW5nIGlzIGFscmVhZHkgZmluaXNoZWRcbiAgICAgICAgdGFyZ2V0Lm5leHQoc291cmNlLnN1YnN0cmluZyhzdGFydCwgZW5kKSlcbiAgICAgICAgc3RhcnQgPSBpbmRleCArIDFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGMgPT09IDM0IC8qIFwiICovKSB7XG4gICAgICBxdW90ZWQgPSAhcXVvdGVkXG4gICAgfVxuICAgIGluZGV4KytcbiAgfVxuICBpZiAoc3RhcnQgPCBpbmRleCkge1xuICAgIHRhcmdldC5uZXh0KHNvdXJjZS5zdWJzdHJpbmcoc3RhcnQsIGluZGV4KSlcbiAgfVxuICB0YXJnZXQuY29tcGxldGUoKVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==